{"title":"Project03_GpMall","date":"2020-11-06T20:22:29.000Z","date_formatted":{"ll":"Nov 6, 2020","L":"11/06/2020","MM-DD":"11-06"},"link":"2020/222029/Project-03","comments":true,"tags":["Java","Spring","分布式","微服务"],"categories":["项目"],"updated":"2020-12-07T15:52:30.373Z","content":"<p>基于开源项目 <a href=\"https://github.com/2227324689/gpmall\" target=\"_blank\">gpmall</a> 前端部分的微服务架构的高并发商城。具体实现了项目中用户模块、商品模块、订单模块、支付<br>\n模块，增加了秒杀模块的业务。</p>\n<a id=\"more\"></a>\n<p>项目划分：</p>\n<div class=\"φbt\"><div class=\"φbv\"><table><thead>\n<tr>\n<th style=\"padding:0\"></th>\n<th style=\"padding:0\"></th>\n<th style=\"padding:0\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>db_script 本项目的数据库脚本</td>\n<td>使用mysql</td>\n<td>暂时未做分表处理，不过有考虑到分表的情况</td>\n</tr>\n<tr>\n<td>gpmall-cashier 收银台，负责支付相关的交互逻辑</td>\n<td>web项目</td>\n<td>8083端口</td>\n</tr>\n<tr>\n<td>gpmall-commons 公共的组件</td>\n<td>jar</td>\n<td>公共组件，很多地方都有引用，改动的时候要注意</td>\n</tr>\n<tr>\n<td>gpmall-front 咕泡商城的前端项目</td>\n<td>前端项目</td>\n<td>使用vue、node、es等前端技术开发</td>\n</tr>\n<tr>\n<td>gpmall-parent 父控文件，用来统一管理所有jar包</td>\n<td>父控文件</td>\n<td>用来统一管理所有项目的jar包的版本</td>\n</tr>\n<tr>\n<td>gpmall-shopping 商品/购物车/首页渲染等交互</td>\n<td>web项目</td>\n<td>8081端口</td>\n</tr>\n<tr>\n<td>gpmall-user 提供用户相关的交互，如登录、注册、个人中心等</td>\n<td>web项目</td>\n<td>8082端口</td>\n</tr>\n<tr>\n<td>market-service 促销活动的Dubbo服务【暂时未联调完成，可以不启动】</td>\n<td>dubbo服务</td>\n<td>20884端口</td>\n</tr>\n<tr>\n<td>pay-service 提供支付处理能力</td>\n<td>dubbo服务</td>\n<td>20883端口</td>\n</tr>\n<tr>\n<td>shopping-service，提供购物车、推荐商品、商品等服务</td>\n<td>dubbo服务</td>\n<td>20881端口</td>\n</tr>\n<tr>\n<td>user-service ，提供用户相关服务</td>\n<td>dubbo服务</td>\n<td>20880端口</td>\n</tr>\n<tr>\n<td>order-service ，提供订单服务</td>\n<td>dubbo服务</td>\n<td>20882端口</td>\n</tr>\n</tbody>\n</table></div></div><h2 id=\"user-模块\">user 模块<a title=\"#user-模块\" href=\"#user-模块\"></a></h2>\n<h3 id=\"用户模块（/user）\">用户模块（/user）<a title=\"#用户模块（/user）\" href=\"#用户模块（/user）\"></a></h3>\n<h4 id=\"✅注册激活（/verify）\">✅注册激活（/verify）<a title=\"#✅注册激活（/verify）\" href=\"#✅注册激活（/verify）\"></a></h4>\n<p>​\t<strong>入参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">uid\t\t\t\t\t\tString\t\t\t\t\t激活id</span><br><span class=\"line\">username\t\t\t\tString\t\t\t\t\t用户名</span><br></pre></td></tr></table></figure>\n<p>请求路径：/user/verify</p>\n<p>是否需要携带Token：否</p>\n<p>请求类型：get</p>\n<p>请求路径示例：</p>\n<p><a href=\"http://localhost:8080/user/verify?uid=xxx&amp;username=xxx\">http://localhost:8080/user/verify?uid=xxx&amp;username=xxx</a></p>\n<p><strong>出参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">success\t\t\t\t\tboolean\t\t\t\t成功标记</span><br><span class=\"line\">message\t\t\t\t\tString\t\t\t\t具体信息</span><br><span class=\"line\">code\t\t\t\t\t\tInteger\t\t\t\t状态码</span><br><span class=\"line\">result\t\t\t\t\tString(JSON)\t具体数据</span><br><span class=\"line\">timestamp\t\t\t\tLong\t\t\t\t\t时间戳</span><br></pre></td></tr></table></figure>\n<p>返回参数示例：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"attr\">&quot;success&quot;</span>:<span class=\"literal\">true</span>,<span class=\"attr\">&quot;message&quot;</span>:<span class=\"string\">&quot;success&quot;</span>,<span class=\"attr\">&quot;code&quot;</span>:<span class=\"number\">200</span>,<span class=\"attr\">&quot;result&quot;</span>:<span class=\"literal\">null</span>,<span class=\"attr\">&quot;timestamp&quot;</span>:<span class=\"number\">1587710244802</span>&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"shopping-模块\">Shopping 模块<a title=\"#shopping-模块\" href=\"#shopping-模块\"></a></h2>\n<h3 id=\"商品模块\">商品模块<a title=\"#商品模块\" href=\"#商品模块\"></a></h3>\n<h4 id=\"✅获得购物车列表（/carts）\">✅获得购物车列表（/carts）<a title=\"#✅获得购物车列表（/carts）\" href=\"#✅获得购物车列表（/carts）\"></a></h4>\n<h5 id=\"接口文档\">接口文档<a title=\"#接口文档\" href=\"#接口文档\"></a></h5>\n<p><strong>入参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">无</span><br></pre></td></tr></table></figure>\n<p>请求路径：/shopping/carts</p>\n<p>是否需要携带Token：是</p>\n<p>请求类型：get</p>\n<p>请求参数示例：无</p>\n<p><strong>出参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">success\t\t\t\t\tboolean\t\t\t\t成功标记</span><br><span class=\"line\">message\t\t\t\t\tString\t\t\t\t具体信息</span><br><span class=\"line\">code\t\t\t\t\t\tInteger\t\t\t\t状态码</span><br><span class=\"line\">result\t\t\t\t\tString(JSON)\t具体数据</span><br><span class=\"line\">timestamp\t\t\t\tLong\t\t\t\t\t时间戳</span><br></pre></td></tr></table></figure>\n<p>返回参数示例：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;success&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;message&quot;</span>: <span class=\"string\">&quot;success&quot;</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;code&quot;</span>: <span class=\"number\">200</span>,</span><br><span class=\"line\">  <span class=\"attr\">&quot;result&quot;</span>: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;productId&quot;</span>: <span class=\"number\">100040607</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;salePrice&quot;</span>: <span class=\"number\">2999</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productNum&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;limitNum&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;checked&quot;</span>: <span class=\"string\">&quot;true&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productName&quot;</span>: <span class=\"string\">&quot;坚果 3&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productImg&quot;</span>: <span class=\"string\">&quot;https://resource.smartisan.com/resource/13e91511f6ba3227ca5378fd2e93c54b.png&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;productId&quot;</span>: <span class=\"number\">100040501</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;salePrice&quot;</span>: <span class=\"number\">2999</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productNum&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;limitNum&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;checked&quot;</span>: <span class=\"string\">&quot;false&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productName&quot;</span>: <span class=\"string\">&quot;畅呼吸智能空气净化器 · 超级除甲醛版&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productImg&quot;</span>: <span class=\"string\">&quot;https://resource.smartisan.com/resource/71432ad30288fb860a4389881069b874.png&quot;</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;productId&quot;</span>: <span class=\"number\">100039702</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;salePrice&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productNum&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;limitNum&quot;</span>: <span class=\"number\">100</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;checked&quot;</span>: <span class=\"string\">&quot;true&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productName&quot;</span>: <span class=\"string\">&quot;Smartisan 帆布鞋&quot;</span>,</span><br><span class=\"line\">      <span class=\"attr\">&quot;productImg&quot;</span>: <span class=\"string\">&quot;https://resource.smartisan.com/resource/578116bddf1d170c89e9af7ba5073fb6.jpg&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">&quot;timestamp&quot;</span>: <span class=\"number\">1605518470998</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"参考代码\">参考代码<a title=\"#参考代码\" href=\"#参考代码\"></a></h5>\n<h6 id=\"provider\">Provider<a title=\"#provider\" href=\"#provider\"></a></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Slf4j</span></span><br><span class=\"line\"><span class=\"meta\">@RestController</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping(&quot;/shopping&quot;)</span></span><br><span class=\"line\"><span class=\"meta\">@Api(tags = &quot;AddressController&quot;, description = &quot;地址控制层&quot;)</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AddressController</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">   <span class=\"meta\">@Reference(timeout = 3000,check = false)</span></span><br><span class=\"line\">    IAddressService addressService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ApiOperation(&quot;添加地址&quot;)</span></span><br><span class=\"line\">    <span class=\"meta\">@PostMapping(&quot;/addresses&quot;)</span></span><br><span class=\"line\">    <span class=\"meta\">@ApiImplicitParam(name = &quot;form&quot;, value = &quot;地址信息&quot;, dataType = &quot;AddressForm&quot;, required = true)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ResponseData <span class=\"title\">addressAdd</span><span class=\"params\">(<span class=\"meta\">@RequestBody</span> AddressForm form, HttpServletRequest servletRequest)</span> </span>&#123;</span><br><span class=\"line\">        log.debug(form.is_Default()+<span class=\"string\">&quot;&quot;</span>);</span><br><span class=\"line\">        log.debug(form.toString());</span><br><span class=\"line\"></span><br><span class=\"line\">        AddAddressRequest request = <span class=\"keyword\">new</span> AddAddressRequest();</span><br><span class=\"line\">        String userInfo = (String) servletRequest.getAttribute(TokenIntercepter.USER_INFO_KEY);</span><br><span class=\"line\">        JSONObject object = JSON.parseObject(userInfo);</span><br><span class=\"line\">        Long uid = Long.parseLong(object.get(<span class=\"string\">&quot;uid&quot;</span>).toString());</span><br><span class=\"line\">        request.setUserId(uid);</span><br><span class=\"line\">        request.setUserName(form.getUserName());</span><br><span class=\"line\">        request.setStreetName(form.getStreetName());</span><br><span class=\"line\">        request.setTel(form.getTel());</span><br><span class=\"line\">        request.setIsDefault(form.is_Default() ? <span class=\"number\">1</span> : <span class=\"keyword\">null</span>);</span><br><span class=\"line\">        AddAddressResponse response = addressService.createAddress(request);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (response.getCode().equals(ShoppingRetCode.SUCCESS.getCode())) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ResponseUtil().setData(response.getMsg());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ResponseUtil().setErrorMsg(response.getMsg());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h6 id=\"consumer\">Consumer<a title=\"#consumer\" href=\"#consumer\"></a></h6>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Service(interfaceClass = IProductService.class)</span><span class=\"comment\">//指定接口</span></span><br><span class=\"line\"><span class=\"meta\">@Component</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">IProductServiceImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">IProductService</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    ItemMapper itemMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> ProductDetailResponse <span class=\"title\">getProductDetail</span><span class=\"params\">(ProductDetailRequest request)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        ProductDetailResponse productDetailResponse = <span class=\"keyword\">new</span> ProductDetailResponse();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 参数基础检查</span></span><br><span class=\"line\">        request.requestCheck();</span><br><span class=\"line\"></span><br><span class=\"line\">        Long productId = request.getId();</span><br><span class=\"line\"></span><br><span class=\"line\">        Item item = itemMapper.selectByPrimaryKey(productId);</span><br><span class=\"line\"></span><br><span class=\"line\">        ProductDetailDto productDetailDto = <span class=\"keyword\">new</span> ProductDetailDto();</span><br><span class=\"line\">        productDetailDto.setProductId(item.getId());</span><br><span class=\"line\">        productDetailDto.setSubTitle(item.getTitle());</span><br><span class=\"line\">        productDetailDto.setSalePrice(item.getPrice());</span><br><span class=\"line\"></span><br><span class=\"line\">        productDetailResponse.setProductDetailDto(productDetailDto);</span><br><span class=\"line\">        productDetailResponse.setCode(ShoppingRetCode.SUCCESS.getCode());</span><br><span class=\"line\">        productDetailResponse.setMsg(ShoppingRetCode.SUCCESS.getMessage());</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> productDetailResponse;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"redis-相关\">Redis 相关<a title=\"#redis-相关\" href=\"#redis-相关\"></a></h5>\n<p>List&lt;Product&gt; list</p>\n<p>key -----&gt; cart_intem 85 cart_intem 86 HKEYS</p>\n<ol>\n<li>\n<p>把 List 转化为JSONSonstring</p>\n</li>\n<li>\n<p>使用 Hash</p>\n<p>key: userId</p>\n<p>field1: porductId</p>\n<p>value1: 购物车里面商品的对象 Cartproductdt</p>\n<p>field2: porductId</p>\n<p>value2: 购物车里面商品的对象 Cartproductdt</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RedissonTest</span> <span class=\"keyword\">extends</span> <span class=\"title\">RedissonDemoApplicationTests</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  \t<span class=\"comment\">//注入 redissonClient</span></span><br><span class=\"line\">    <span class=\"meta\">@Autowired</span></span><br><span class=\"line\">    RedissonClient redissonClient;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test01</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t\t\t\t</span><br><span class=\"line\">      \t<span class=\"comment\">//使用 redissonClient</span></span><br><span class=\"line\">        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(<span class=\"string\">&quot;liushifu&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        bucket.set(<span class=\"string\">&quot;shai&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test02</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(<span class=\"string\">&quot;liushifu&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        String val = (String) bucket.get();</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(val);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test03</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(<span class=\"string\">&quot;ligenli&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        rMap.put(<span class=\"string\">&quot;weight&quot;</span>,<span class=\"string\">&quot;130&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test04</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(<span class=\"string\">&quot;ligenli&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// hget</span></span><br><span class=\"line\">        String weight = (String) rMap.get(<span class=\"string\">&quot;weight&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println(weight);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">test05</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        RDeque&lt;Object&gt; rDeque = redissonClient.getDeque(<span class=\"string\">&quot;mylist&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//        rDeque.addFirst();</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//        rDeque.addLast();</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"✅删除购物车中的商品（/carts/{uid}/{pid}）\">✅删除购物车中的商品（/carts/{uid}/{pid}）<a title=\"#✅删除购物车中的商品（/carts/{uid}/{pid}）\" href=\"#✅删除购物车中的商品（/carts/{uid}/{pid}）\"></a></h4>\n<p><strong>入参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">uid\t\t\t\t\t\tlong\t\t\t\t\t\t用户id</span><br><span class=\"line\">pid\t\t\t\t\t\tlong\t\t\t\t\t\t商品ID</span><br></pre></td></tr></table></figure>\n<p>请求路径：/shopping/carts/{uid}/{pid}</p>\n<p>是否需要携带Token：是</p>\n<p>请求类型：delete</p>\n<p>请求参数示例：无</p>\n<p><strong>出参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">success\t\t\t\t\tboolean\t\t\t\t成功标记</span><br><span class=\"line\">message\t\t\t\t\tString\t\t\t\t具体信息</span><br><span class=\"line\">code\t\t\t\t\t\tInteger\t\t\t\t状态码</span><br><span class=\"line\">result\t\t\t\t\tString(JSON)\t具体数据</span><br><span class=\"line\">timestamp\t\t\t\tLong\t\t\t\t\t时间戳</span><br></pre></td></tr></table></figure>\n<p>返回参数示例：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"attr\">&quot;success&quot;</span>:<span class=\"literal\">true</span>,<span class=\"attr\">&quot;message&quot;</span>:<span class=\"string\">&quot;success&quot;</span>,<span class=\"attr\">&quot;code&quot;</span>:<span class=\"number\">200</span>,<span class=\"attr\">&quot;result&quot;</span>:<span class=\"string\">&quot;成功&quot;</span>,<span class=\"attr\">&quot;timestamp&quot;</span>:<span class=\"number\">1587794411224</span>&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"订单模块\">订单模块<a title=\"#订单模块\" href=\"#订单模块\"></a></h3>\n<h4 id=\"✅取消订单（cancelorder）\">✅取消订单（cancelOrder）<a title=\"#✅取消订单（cancelorder）\" href=\"#✅取消订单（cancelorder）\"></a></h4>\n<p><strong>入参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">id\t\t\t\t\t\tLong\t\t\t\t\t订单id</span><br></pre></td></tr></table></figure>\n<p>请求路径：/shopping/cancelOrder</p>\n<p>是否需要携带Token：是</p>\n<p>请求类型：post</p>\n<p>请求参数示例：</p>\n<p>{“id”:“1”}</p>\n<p><strong>出参</strong>\t\t\t\t\t\t<strong>类型</strong>\t\t\t\t\t\t<strong>含义</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\">success\t\t\t\t\tboolean\t\t\t\t成功标记</span><br><span class=\"line\">message\t\t\t\t\tString\t\t\t\t具体信息</span><br><span class=\"line\">code\t\t\t\t\t\tInteger\t\t\t\t状态码</span><br><span class=\"line\">result\t\t\t\t\tString(JSON)\t具体数据</span><br><span class=\"line\">timestamp\t\t\t\tLong\t\t\t\t\t时间戳</span><br></pre></td></tr></table></figure>\n<p><strong>数据库</strong></p>\n<p>更新表 tb_order</p>\n<p>![image-20201117092949558](/Users/wumin/Library/Application Support/typora-user-images/image-20201117092949558.png)</p>\n<p>tb_order_item</p>\n<p>![image-20201117103928650](/Users/wumin/Library/Application Support/typora-user-images/image-20201117103928650.png)</p>\n<p>返回参数示例：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">&#123;<span class=\"attr\">&quot;success&quot;</span>:<span class=\"literal\">true</span>,<span class=\"attr\">&quot;message&quot;</span>:<span class=\"string\">&quot;success&quot;</span>,<span class=\"attr\">&quot;code&quot;</span>:<span class=\"number\">200</span>,<span class=\"attr\">&quot;result&quot;</span>:<span class=\"string\">&quot;成功&quot;</span>,<span class=\"attr\">&quot;timestamp&quot;</span>:<span class=\"number\">1587795935665</span>&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"支付模块\">支付模块<a title=\"#支付模块\" href=\"#支付模块\"></a></h3>\n<h3 id=\"秒杀模块\">秒杀模块<a title=\"#秒杀模块\" href=\"#秒杀模块\"></a></h3>\n<h4 id=\"项目结构\">项目结构<a title=\"#项目结构\" href=\"#项目结构\"></a></h4>\n<img src=\"/Users/wumin/Library/Application Support/typora-user-images/image-20201123142328324.png\" alt=\"image-20201123142328324\" style=\"zoom:50%;\" align=\"left\"/>\n<h2 id=\"其他\">其他<a title=\"#其他\" href=\"#其他\"></a></h2>\n<p>压测对比结果</p>\n<p>样本1</p>\n<p>![image-20201125201712268](/Users/wumin/Library/Application Support/typora-user-images/image-20201125201712268.png)</p>\n<p>样本2</p>\n<p>![image-20201125202401250](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202401250.png)</p>\n<p>![image-20201125202421028](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202421028.png)</p>\n<p>![image-20201125202440625](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202440625.png)</p>\n<p>样本3</p>\n<h2 id=\"???\">???<a title=\"#???\" href=\"#???\"></a></h2>\n","prev":{"title":"Project03_Tmall","link":"2020/491633/Test"},"next":{"title":"Project02_LiteMall","link":"2020/382324/Project-02"},"plink":"https://gardenZzz.github.io/2020/222029/Project-03/","toc":[{"id":"user-模块","title":"user 模块","index":"1","children":[{"id":"用户模块（/user）","title":"用户模块（&#x2F;user）","index":"1.1"}]},{"id":"shopping-模块","title":"Shopping 模块","index":"2","children":[{"id":"商品模块","title":"商品模块","index":"2.1"},{"id":"订单模块","title":"订单模块","index":"2.2"},{"id":"支付模块","title":"支付模块","index":"2.3"},{"id":"秒杀模块","title":"秒杀模块","index":"2.4"}]},{"id":"其他","title":"其他","index":"3"},{"id":"???","title":"???","index":"4"}],"reward":true,"copyright":{"author":"Garden X","link":"<a href=\"https://gardenZzz.github.io/2020/222029/Project-03/\" title=\"Project03_GpMall\">https://gardenZzz.github.io/2020/222029/Project-03/</a>","license":"自由转载-非商用-禁止演绎-保持署名 (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)"},"reading_time":"1338 words in 9 min"}