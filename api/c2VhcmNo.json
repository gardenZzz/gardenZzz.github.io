[{"title":"Hello World","date":"2019-11-27T21:14:08.000Z","date_formatted":{"ll":"Nov 27, 2019","L":"11/27/2019","MM-DD":"11-27"},"updated":"2020-11-29T04:50:32.178Z","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick Start\nCreate a new post\n$ hexo new &quot;My New Post&quot;\nMore info: Writing\nRun server\n$ hexo server\nMore info: Server\nGenerate static files\n$ hexo generate\nMore info: Generating\nDeploy to remote sites\n$ hexo deploy\nMore info: Deployment\n","plink":"https://gardenZzz.github.io/2019/142108/hello-world/"},{"title":"0","date":"2019-11-27T21:14:08.000Z","date_formatted":{"ll":"Nov 27, 2019","L":"11/27/2019","MM-DD":"11-27"},"updated":"2020-11-28T08:54:44.355Z","content":"这里是摘要\n\n启动\nStart Name Server\n nohup sh bin/mqnamesrv &amp;\nStart Broker\n   nohup sh bin/mqbroker -n localhost:9876 &amp;\n结束\nShutdown Servers\nsh bin/mqshutdown broker\nsh bin/mqshutdown namesrv\n  .embed-container {\n    position: relative;\n    padding-bottom: 56.25%;\n    height: 0;\n    overflow: hidden;\n    max-width: 100%;\n  }\n  .embed-container iframe, .embed-container object, .embed-container embed {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n  \n\n\n\n\n        \n        \n        \n        \n        \n            document.getElementById(\"mmedia-MEBgQNdD\").style.height=document.getElementById(\"mmedia-MEBgQNdD\").scrollWidth*0.76+\"px\";\n            window.onresize = function(){\n              document.getElementById(\"mmedia-MEBgQNdD\").style.height=document.getElementById(\"mmedia-MEBgQNdD\").scrollWidth*0.76+\"px\";\n            };\n        \n        ","thumbnail":"https://images.unsplash.com/photo-1560930375-f0f48057f535?fit=crop&w=1280&h=720&q=80","color":"#111","plink":"https://gardenZzz.github.io/2019/142108/0000/"},{"title":"about","date":"2020-11-28T18:35:45.000Z","date_formatted":{"ll":"Nov 28, 2020","L":"11/28/2020","MM-DD":"11-28"},"updated":"2020-11-28T10:35:45.034Z","content":"","plink":"https://gardenZzz.github.io/2020/351845/about/"},{"title":"Project03_Tmall","date":"2020-11-27T16:49:33.000Z","date_formatted":{"ll":"Nov 27, 2020","L":"11/27/2020","MM-DD":"11-27"},"updated":"2020-11-28T08:53:41.732Z","content":"这里是摘要\n\n微服务架构 商城项目\n项目划分：\n\n\n\n\n\n\n\n\n\ndb_script 本项目的数据库脚本\n使用mysql\n暂时未做分表处理，不过有考虑到分表的情况\n\n\ngpmall-cashier 收银台，负责支付相关的交互逻辑\nweb项目\n8083端口\n\n\ngpmall-commons 公共的组件\njar\n公共组件，很多地方都有引用，改动的时候要注意\n\n\ngpmall-front 咕泡商城的前端项目\n前端项目\n使用vue、node、es等前端技术开发\n\n\ngpmall-parent 父控文件，用来统一管理所有jar包\n父控文件\n用来统一管理所有项目的jar包的版本\n\n\ngpmall-shopping 商品/购物车/首页渲染等交互\nweb项目\n8081端口\n\n\ngpmall-user 提供用户相关的交互，如登录、注册、个人中心等\nweb项目\n8082端口\n\n\nmarket-service 促销活动的Dubbo服务【暂时未联调完成，可以不启动】\ndubbo服务\n20884端口\n\n\npay-service 提供支付处理能力\ndubbo服务\n20883端口\n\n\nshopping-service，提供购物车、推荐商品、商品等服务\ndubbo服务\n20881端口\n\n\nuser-service ，提供用户相关服务\ndubbo服务\n20880端口\n\n\norder-service ，提供订单服务\ndubbo服务\n20882端口\n\n\nuser 模块\n用户模块（/user）\n✅注册激活（/verify）\n​\t入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nuid\t\t\t\t\t\tString\t\t\t\t\t激活idusername\t\t\t\tString\t\t\t\t\t用户名\n请求路径：/user/verify\n是否需要携带Token：否\n请求类型：get\n请求路径示例：\nhttp://localhost:8080/user/verify?uid=xxx&amp;username=xxx\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n返回参数示例：\n&#123;&quot;success&quot;:true,&quot;message&quot;:&quot;success&quot;,&quot;code&quot;:200,&quot;result&quot;:null,&quot;timestamp&quot;:1587710244802&#125;\nShopping 模块\n商品模块\n✅获得购物车列表（/carts）\n接口文档\n入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\n无\n请求路径：/shopping/carts\n是否需要携带Token：是\n请求类型：get\n请求参数示例：无\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n返回参数示例：\n&#123;  &quot;success&quot;: true,  &quot;message&quot;: &quot;success&quot;,  &quot;code&quot;: 200,  &quot;result&quot;: [    &#123;      &quot;productId&quot;: 100040607,      &quot;salePrice&quot;: 2999,      &quot;productNum&quot;: 100,      &quot;limitNum&quot;: 100,      &quot;checked&quot;: &quot;true&quot;,      &quot;productName&quot;: &quot;坚果 3&quot;,      &quot;productImg&quot;: &quot;https://resource.smartisan.com/resource/13e91511f6ba3227ca5378fd2e93c54b.png&quot;    &#125;,    &#123;      &quot;productId&quot;: 100040501,      &quot;salePrice&quot;: 2999,      &quot;productNum&quot;: 1,      &quot;limitNum&quot;: 100,      &quot;checked&quot;: &quot;false&quot;,      &quot;productName&quot;: &quot;畅呼吸智能空气净化器 · 超级除甲醛版&quot;,      &quot;productImg&quot;: &quot;https://resource.smartisan.com/resource/71432ad30288fb860a4389881069b874.png&quot;    &#125;,    &#123;      &quot;productId&quot;: 100039702,      &quot;salePrice&quot;: 1,      &quot;productNum&quot;: 1,      &quot;limitNum&quot;: 100,      &quot;checked&quot;: &quot;true&quot;,      &quot;productName&quot;: &quot;Smartisan 帆布鞋&quot;,      &quot;productImg&quot;: &quot;https://resource.smartisan.com/resource/578116bddf1d170c89e9af7ba5073fb6.jpg&quot;    &#125;  ],  &quot;timestamp&quot;: 1605518470998&#125;\n参考代码\nProvider\n@Slf4j@RestController@RequestMapping(&quot;/shopping&quot;)@Api(tags = &quot;AddressController&quot;, description = &quot;地址控制层&quot;)public class AddressController &#123;     @Reference(timeout = 3000,check = false)    IAddressService addressService;    @ApiOperation(&quot;添加地址&quot;)    @PostMapping(&quot;/addresses&quot;)    @ApiImplicitParam(name = &quot;form&quot;, value = &quot;地址信息&quot;, dataType = &quot;AddressForm&quot;, required = true)    public ResponseData addressAdd(@RequestBody AddressForm form, HttpServletRequest servletRequest) &#123;        log.debug(form.is_Default()+&quot;&quot;);        log.debug(form.toString());        AddAddressRequest request = new AddAddressRequest();        String userInfo = (String) servletRequest.getAttribute(TokenIntercepter.USER_INFO_KEY);        JSONObject object = JSON.parseObject(userInfo);        Long uid = Long.parseLong(object.get(&quot;uid&quot;).toString());        request.setUserId(uid);        request.setUserName(form.getUserName());        request.setStreetName(form.getStreetName());        request.setTel(form.getTel());        request.setIsDefault(form.is_Default() ? 1 : null);        AddAddressResponse response = addressService.createAddress(request);        if (response.getCode().equals(ShoppingRetCode.SUCCESS.getCode())) &#123;            return new ResponseUtil().setData(response.getMsg());        &#125;        return new ResponseUtil().setErrorMsg(response.getMsg());    &#125;&#125;\nConsumer\n@Service(interfaceClass = IProductService.class)//指定接口@Componentpublic class IProductServiceImpl implements IProductService &#123;    @Autowired    ItemMapper itemMapper;    @Override    public ProductDetailResponse getProductDetail(ProductDetailRequest request) &#123;        ProductDetailResponse productDetailResponse = new ProductDetailResponse();        // 参数基础检查        request.requestCheck();        Long productId = request.getId();        Item item = itemMapper.selectByPrimaryKey(productId);        ProductDetailDto productDetailDto = new ProductDetailDto();        productDetailDto.setProductId(item.getId());        productDetailDto.setSubTitle(item.getTitle());        productDetailDto.setSalePrice(item.getPrice());        productDetailResponse.setProductDetailDto(productDetailDto);        productDetailResponse.setCode(ShoppingRetCode.SUCCESS.getCode());        productDetailResponse.setMsg(ShoppingRetCode.SUCCESS.getMessage());        return productDetailResponse;    &#125;&#125;\nRedis 相关\nList&lt;Product&gt; list\nkey -----&gt; cart_intem 85 cart_intem 86 HKEYS\n\n\n把 List 转化为JSONSonstring\n\n\n使用 Hash\nkey: userId\nfield1: porductId\nvalue1: 购物车里面商品的对象 Cartproductdt\nfield2: porductId\nvalue2: 购物车里面商品的对象 Cartproductdt\npublic class RedissonTest extends RedissonDemoApplicationTests &#123;  \t//注入 redissonClient    @Autowired    RedissonClient redissonClient;    @Test    public void test01()&#123;\t\t\t\t      \t//使用 redissonClient        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(&quot;liushifu&quot;);        bucket.set(&quot;shai&quot;);    &#125;    @Test    public void test02()&#123;        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(&quot;liushifu&quot;);        String val = (String) bucket.get();        System.out.println(val);    &#125;    @Test    public void test03()&#123;        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(&quot;ligenli&quot;);        rMap.put(&quot;weight&quot;,&quot;130&quot;);    &#125;    @Test    public void test04()&#123;        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(&quot;ligenli&quot;);        // hget        String weight = (String) rMap.get(&quot;weight&quot;);        System.out.println(weight);    &#125;    @Test    public void test05()&#123;        RDeque&lt;Object&gt; rDeque = redissonClient.getDeque(&quot;mylist&quot;);//        rDeque.addFirst();//        rDeque.addLast();    &#125;&#125;\n\n\n✅删除购物车中的商品（/carts/{uid}/{pid}）\n入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nuid\t\t\t\t\t\tlong\t\t\t\t\t\t用户idpid\t\t\t\t\t\tlong\t\t\t\t\t\t商品ID\n请求路径：/shopping/carts/{uid}/{pid}\n是否需要携带Token：是\n请求类型：delete\n请求参数示例：无\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n返回参数示例：\n&#123;&quot;success&quot;:true,&quot;message&quot;:&quot;success&quot;,&quot;code&quot;:200,&quot;result&quot;:&quot;成功&quot;,&quot;timestamp&quot;:1587794411224&#125;\n订单模块\n✅取消订单（cancelOrder）\n入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nid\t\t\t\t\t\tLong\t\t\t\t\t订单id\n请求路径：/shopping/cancelOrder\n是否需要携带Token：是\n请求类型：post\n请求参数示例：\n{“id”:“1”}\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n数据库\n更新表 tb_order\n![image-20201117092949558](/Users/wumin/Library/Application Support/typora-user-images/image-20201117092949558.png)\ntb_order_item\n![image-20201117103928650](/Users/wumin/Library/Application Support/typora-user-images/image-20201117103928650.png)\n返回参数示例：\n&#123;&quot;success&quot;:true,&quot;message&quot;:&quot;success&quot;,&quot;code&quot;:200,&quot;result&quot;:&quot;成功&quot;,&quot;timestamp&quot;:1587795935665&#125;\n支付模块\n秒杀模块\n项目结构\n\n其他\n压测对比结果\n样本1\n![image-20201125201712268](/Users/wumin/Library/Application Support/typora-user-images/image-20201125201712268.png)\n样本2\n![image-20201125202401250](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202401250.png)\n![image-20201125202421028](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202421028.png)\n![image-20201125202440625](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202440625.png)\n样本3\n???\n","thumbnail":"https://images.unsplash.com/photo-1560930375-f0f48057f535?fit=crop&w=1280&h=720&q=80","color":"#111","plink":"https://gardenZzz.github.io/2020/491633/Test/"},{"title":"Project03_GpMall","date":"2020-11-06T20:22:29.000Z","date_formatted":{"ll":"Nov 6, 2020","L":"11/06/2020","MM-DD":"11-06"},"updated":"2020-12-07T15:52:30.373Z","content":"基于开源项目 gpmall 前端部分的微服务架构的高并发商城。具体实现了项目中用户模块、商品模块、订单模块、支付\n模块，增加了秒杀模块的业务。\n\n项目划分：\n\n\n\n\n\n\n\n\n\ndb_script 本项目的数据库脚本\n使用mysql\n暂时未做分表处理，不过有考虑到分表的情况\n\n\ngpmall-cashier 收银台，负责支付相关的交互逻辑\nweb项目\n8083端口\n\n\ngpmall-commons 公共的组件\njar\n公共组件，很多地方都有引用，改动的时候要注意\n\n\ngpmall-front 咕泡商城的前端项目\n前端项目\n使用vue、node、es等前端技术开发\n\n\ngpmall-parent 父控文件，用来统一管理所有jar包\n父控文件\n用来统一管理所有项目的jar包的版本\n\n\ngpmall-shopping 商品/购物车/首页渲染等交互\nweb项目\n8081端口\n\n\ngpmall-user 提供用户相关的交互，如登录、注册、个人中心等\nweb项目\n8082端口\n\n\nmarket-service 促销活动的Dubbo服务【暂时未联调完成，可以不启动】\ndubbo服务\n20884端口\n\n\npay-service 提供支付处理能力\ndubbo服务\n20883端口\n\n\nshopping-service，提供购物车、推荐商品、商品等服务\ndubbo服务\n20881端口\n\n\nuser-service ，提供用户相关服务\ndubbo服务\n20880端口\n\n\norder-service ，提供订单服务\ndubbo服务\n20882端口\n\n\nuser 模块\n用户模块（/user）\n✅注册激活（/verify）\n​\t入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nuid\t\t\t\t\t\tString\t\t\t\t\t激活idusername\t\t\t\tString\t\t\t\t\t用户名\n请求路径：/user/verify\n是否需要携带Token：否\n请求类型：get\n请求路径示例：\nhttp://localhost:8080/user/verify?uid=xxx&amp;username=xxx\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n返回参数示例：\n&#123;&quot;success&quot;:true,&quot;message&quot;:&quot;success&quot;,&quot;code&quot;:200,&quot;result&quot;:null,&quot;timestamp&quot;:1587710244802&#125;\nShopping 模块\n商品模块\n✅获得购物车列表（/carts）\n接口文档\n入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\n无\n请求路径：/shopping/carts\n是否需要携带Token：是\n请求类型：get\n请求参数示例：无\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n返回参数示例：\n&#123;  &quot;success&quot;: true,  &quot;message&quot;: &quot;success&quot;,  &quot;code&quot;: 200,  &quot;result&quot;: [    &#123;      &quot;productId&quot;: 100040607,      &quot;salePrice&quot;: 2999,      &quot;productNum&quot;: 100,      &quot;limitNum&quot;: 100,      &quot;checked&quot;: &quot;true&quot;,      &quot;productName&quot;: &quot;坚果 3&quot;,      &quot;productImg&quot;: &quot;https://resource.smartisan.com/resource/13e91511f6ba3227ca5378fd2e93c54b.png&quot;    &#125;,    &#123;      &quot;productId&quot;: 100040501,      &quot;salePrice&quot;: 2999,      &quot;productNum&quot;: 1,      &quot;limitNum&quot;: 100,      &quot;checked&quot;: &quot;false&quot;,      &quot;productName&quot;: &quot;畅呼吸智能空气净化器 · 超级除甲醛版&quot;,      &quot;productImg&quot;: &quot;https://resource.smartisan.com/resource/71432ad30288fb860a4389881069b874.png&quot;    &#125;,    &#123;      &quot;productId&quot;: 100039702,      &quot;salePrice&quot;: 1,      &quot;productNum&quot;: 1,      &quot;limitNum&quot;: 100,      &quot;checked&quot;: &quot;true&quot;,      &quot;productName&quot;: &quot;Smartisan 帆布鞋&quot;,      &quot;productImg&quot;: &quot;https://resource.smartisan.com/resource/578116bddf1d170c89e9af7ba5073fb6.jpg&quot;    &#125;  ],  &quot;timestamp&quot;: 1605518470998&#125;\n参考代码\nProvider\n@Slf4j@RestController@RequestMapping(&quot;/shopping&quot;)@Api(tags = &quot;AddressController&quot;, description = &quot;地址控制层&quot;)public class AddressController &#123;     @Reference(timeout = 3000,check = false)    IAddressService addressService;    @ApiOperation(&quot;添加地址&quot;)    @PostMapping(&quot;/addresses&quot;)    @ApiImplicitParam(name = &quot;form&quot;, value = &quot;地址信息&quot;, dataType = &quot;AddressForm&quot;, required = true)    public ResponseData addressAdd(@RequestBody AddressForm form, HttpServletRequest servletRequest) &#123;        log.debug(form.is_Default()+&quot;&quot;);        log.debug(form.toString());        AddAddressRequest request = new AddAddressRequest();        String userInfo = (String) servletRequest.getAttribute(TokenIntercepter.USER_INFO_KEY);        JSONObject object = JSON.parseObject(userInfo);        Long uid = Long.parseLong(object.get(&quot;uid&quot;).toString());        request.setUserId(uid);        request.setUserName(form.getUserName());        request.setStreetName(form.getStreetName());        request.setTel(form.getTel());        request.setIsDefault(form.is_Default() ? 1 : null);        AddAddressResponse response = addressService.createAddress(request);        if (response.getCode().equals(ShoppingRetCode.SUCCESS.getCode())) &#123;            return new ResponseUtil().setData(response.getMsg());        &#125;        return new ResponseUtil().setErrorMsg(response.getMsg());    &#125;&#125;\nConsumer\n@Service(interfaceClass = IProductService.class)//指定接口@Componentpublic class IProductServiceImpl implements IProductService &#123;    @Autowired    ItemMapper itemMapper;    @Override    public ProductDetailResponse getProductDetail(ProductDetailRequest request) &#123;        ProductDetailResponse productDetailResponse = new ProductDetailResponse();        // 参数基础检查        request.requestCheck();        Long productId = request.getId();        Item item = itemMapper.selectByPrimaryKey(productId);        ProductDetailDto productDetailDto = new ProductDetailDto();        productDetailDto.setProductId(item.getId());        productDetailDto.setSubTitle(item.getTitle());        productDetailDto.setSalePrice(item.getPrice());        productDetailResponse.setProductDetailDto(productDetailDto);        productDetailResponse.setCode(ShoppingRetCode.SUCCESS.getCode());        productDetailResponse.setMsg(ShoppingRetCode.SUCCESS.getMessage());        return productDetailResponse;    &#125;&#125;\nRedis 相关\nList&lt;Product&gt; list\nkey -----&gt; cart_intem 85 cart_intem 86 HKEYS\n\n\n把 List 转化为JSONSonstring\n\n\n使用 Hash\nkey: userId\nfield1: porductId\nvalue1: 购物车里面商品的对象 Cartproductdt\nfield2: porductId\nvalue2: 购物车里面商品的对象 Cartproductdt\npublic class RedissonTest extends RedissonDemoApplicationTests &#123;  \t//注入 redissonClient    @Autowired    RedissonClient redissonClient;    @Test    public void test01()&#123;\t\t\t\t      \t//使用 redissonClient        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(&quot;liushifu&quot;);        bucket.set(&quot;shai&quot;);    &#125;    @Test    public void test02()&#123;        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(&quot;liushifu&quot;);        String val = (String) bucket.get();        System.out.println(val);    &#125;    @Test    public void test03()&#123;        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(&quot;ligenli&quot;);        rMap.put(&quot;weight&quot;,&quot;130&quot;);    &#125;    @Test    public void test04()&#123;        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(&quot;ligenli&quot;);        // hget        String weight = (String) rMap.get(&quot;weight&quot;);        System.out.println(weight);    &#125;    @Test    public void test05()&#123;        RDeque&lt;Object&gt; rDeque = redissonClient.getDeque(&quot;mylist&quot;);//        rDeque.addFirst();//        rDeque.addLast();    &#125;&#125;\n\n\n✅删除购物车中的商品（/carts/{uid}/{pid}）\n入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nuid\t\t\t\t\t\tlong\t\t\t\t\t\t用户idpid\t\t\t\t\t\tlong\t\t\t\t\t\t商品ID\n请求路径：/shopping/carts/{uid}/{pid}\n是否需要携带Token：是\n请求类型：delete\n请求参数示例：无\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n返回参数示例：\n&#123;&quot;success&quot;:true,&quot;message&quot;:&quot;success&quot;,&quot;code&quot;:200,&quot;result&quot;:&quot;成功&quot;,&quot;timestamp&quot;:1587794411224&#125;\n订单模块\n✅取消订单（cancelOrder）\n入参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nid\t\t\t\t\t\tLong\t\t\t\t\t订单id\n请求路径：/shopping/cancelOrder\n是否需要携带Token：是\n请求类型：post\n请求参数示例：\n{“id”:“1”}\n出参\t\t\t\t\t\t类型\t\t\t\t\t\t含义\nsuccess\t\t\t\t\tboolean\t\t\t\t成功标记message\t\t\t\t\tString\t\t\t\t具体信息code\t\t\t\t\t\tInteger\t\t\t\t状态码result\t\t\t\t\tString(JSON)\t具体数据timestamp\t\t\t\tLong\t\t\t\t\t时间戳\n数据库\n更新表 tb_order\n![image-20201117092949558](/Users/wumin/Library/Application Support/typora-user-images/image-20201117092949558.png)\ntb_order_item\n![image-20201117103928650](/Users/wumin/Library/Application Support/typora-user-images/image-20201117103928650.png)\n返回参数示例：\n&#123;&quot;success&quot;:true,&quot;message&quot;:&quot;success&quot;,&quot;code&quot;:200,&quot;result&quot;:&quot;成功&quot;,&quot;timestamp&quot;:1587795935665&#125;\n支付模块\n秒杀模块\n项目结构\n\n其他\n压测对比结果\n样本1\n![image-20201125201712268](/Users/wumin/Library/Application Support/typora-user-images/image-20201125201712268.png)\n样本2\n![image-20201125202401250](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202401250.png)\n![image-20201125202421028](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202421028.png)\n![image-20201125202440625](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202440625.png)\n样本3\n???\n","plink":"https://gardenZzz.github.io/2020/222029/Project-03/"},{"title":"Project02_LiteMall","date":"2020-10-15T23:38:24.000Z","date_formatted":{"ll":"Oct 15, 2020","L":"10/15/2020","MM-DD":"10-15"},"updated":"2020-12-07T15:50:17.932Z","content":"基于开源项目 litemall 管理员前端 + 小程序用户前端部分的微信小程序商城。完整的实现了除团购模块外所有后台管\n理(管理员权限管理，日志记录…)和用户商城(用户登录，购买，优惠券…)的功能\n\norg.gardenx\n![image-20201103144820775](/Users/wumin/Library/Application Support/typora-user-images/image-20201103144820775.png)\n后台地址：http://182.92.235.201/\n管理后台（admin）\n身份认证（auth）\n处理跨域 CorsConfig\n/** * Created by little Stone * Date 2019/4/19 Time 10:44 * Function:ajax跨域请求配置 */@Configurationpublic class CorsConfig &#123;    private CorsConfiguration buildConfig() &#123;        CorsConfiguration corsConfiguration = new CorsConfiguration();        corsConfiguration.addAllowedOrigin(&quot;*&quot;); // 1 设置访问源地址        corsConfiguration.addAllowedHeader(&quot;*&quot;); // 2 设置访问源请求头        corsConfiguration.addAllowedMethod(&quot;*&quot;); // 3 设置访问源请求方法        return corsConfiguration;    &#125;    @Bean    public CorsFilter corsFilter() &#123;        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();        source.registerCorsConfiguration(&quot;/**&quot;, buildConfig()); // 4 对接口配置跨域设置        return new CorsFilter(source);    &#125;&#125;\napplication.yaml\nserver:  port: 8081spring:  datasource:    driver-class-name: com.mysql.jdbc.Driver    url: Cor    username: root    password: 123456pagehelper:  helper-dialect: mysqllogging:  level:#    指定包的日志级别    com.cskaoyan.mall25.mapper: debug\nlogin\n请求 URL: http://182.92.235.201:8083/admin/auth/login请求方法: POST&#123;&quot;username&quot;:&quot;admin123&quot;,&quot;password&quot;:&quot;admin123&quot;&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:&quot;f43ebf1c-b233-4cca-a6b5-5d44fd5026b8&quot;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\ninfo\n请求 URL: http://182.92.235.201:8083/admin/auth/info?token=f43ebf1c-b233-4cca-a6b5-5d44fd5026b8请求方法: GETtoken=653e4268-6345-4819-8608-7e6c00cf822c&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;roles&quot;:[&quot;超级管理员&quot;],&quot;name&quot;:&quot;admin123&quot;,&quot;perms&quot;:[&quot;*&quot;],&quot;avatar&quot;:&quot;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&quot;&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\nlogout\n请求 URL: http://182.92.235.201:8083/admin/auth/logout请求方法: POST空\n用户管理\n商场管理\n商品管理\n推广管理\n团购规则&amp;团购活动（groupon）\n✅团购规则\n![image-20201102110653978](/Users/wumin/Library/Application Support/typora-user-images/image-20201102110653978.png)\nlist\n请求 URL: http://182.92.235.201:8083/admin/groupon/list?page=1&amp;limit=20&amp;sort=add_time&amp;order=desc请求方法: GEThttp://182.92.235.201:8083/admin/groupon/list?page=1&amp;limit=20&amp;goodsId=1181061&amp;sort=add_time&amp;order=desc&#123;errno: 0, data: &#123;total: 13,…&#125;, errmsg: &quot;成功&quot;&#125;data: &#123;total: 13,…&#125;items: [&#123;id: 19, goodsId: 1181064, goodsName: &quot;hesiasd&quot;, picUrl: &quot;&quot;, discount: 22, discountMember: 22,…&#125;,…]total: 13errmsg: &quot;成功&quot;errno: 0//Datapublic class Data &#123;    private long total;    private Item[] items;&#125;// Item.java@Datapublic class Item &#123;    private long id;    private long goodsID;    private String goodsName;    private String picURL;    private long discount;    private long discountMember;    private String addTime;    private String updateTime;    private String expireTime;    private boolean deleted;&#125;\ncreate\n![image-20201102143215432](/Users/wumin/Library/Application Support/typora-user-images/image-20201102143215432.png)\n请求 URL: http://182.92.235.201:8083/admin/groupon/create请求方法: POST&#123;&quot;goodsId&quot;:&quot;11111&quot;,&quot;discount&quot;:&quot;1111&quot;,&quot;discountMember&quot;:&quot;2&quot;,&quot;expireTime&quot;:&quot;2020-11-19 00:00:00&quot;&#125;&#123;&quot;errno&quot;:402,&quot;errmsg&quot;:&quot;参数值不对&quot;&#125;//&#123;&quot;errno&quot;:651,&quot;errmsg&quot;:&quot;团购商品已经存在&quot;&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;id&quot;:21,&quot;goodsId&quot;:1181061,&quot;goodsName&quot;:&quot;xudong的测试商品&quot;,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/hbzd03azu1tefqs435g3.jpg&quot;,&quot;discount&quot;:1111,&quot;discountMember&quot;:2,&quot;addTime&quot;:&quot;2020-11-02 13:20:08&quot;,&quot;updateTime&quot;:&quot;2020-11-02 13:20:08&quot;,&quot;expireTime&quot;:&quot;2020-11-19 00:00:00&quot;&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;id&quot;:22,&quot;goodsId&quot;:1181061,&quot;goodsName&quot;:&quot;xudong的测试商品&quot;,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/hbzd03azu1tefqs435g3.jpg&quot;,&quot;discount&quot;:88,&quot;discountMember&quot;:2,&quot;addTime&quot;:&quot;2020-11-02 13:22:52&quot;,&quot;updateTime&quot;:&quot;2020-11-02 13:22:52&quot;,&quot;expireTime&quot;:&quot;2020-11-07 00:00:00&quot;&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private long id;    private long goodsID;    private String goodsName;    private String picURL;    private long discount;    private long discountMember;    private String addTime;    private String updateTime;    private String expireTime;&#125;\nupdate\n请求 URL: http://182.92.235.201:8083/admin/groupon/update请求方法: POST&#123;&quot;id&quot;:20,&quot;goodsId&quot;:1181061,&quot;goodsName&quot;:&quot;xudong的测试商品&quot;,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/hbzd03azu1tefqs435g3.jpg&quot;,&quot;discount&quot;:200,&quot;discountMember&quot;:&quot;1&quot;,&quot;addTime&quot;:&quot;2020-11-02 13:18:28&quot;,&quot;updateTime&quot;:&quot;2020-11-02 13:18:28&quot;,&quot;expireTime&quot;:&quot;2020-11-27 00:00:00&quot;&#125;&#123;&quot;goodsId&quot;:&quot;11111&quot;,&quot;discount&quot;:&quot;1111&quot;,&quot;discountMember&quot;:&quot;2&quot;,&quot;expireTime&quot;:&quot;2020-11-19 00:00:00&quot;&#125;&#123;&quot;errno&quot;:0,&quot;errmsg&quot;:&quot;成功&quot;&#125;&#123;&quot;errno&quot;:402,&quot;errmsg&quot;:&quot;参数值不对&quot;&#125;\ndelete\n请求 URL: http://182.92.235.201:8083/admin/groupon/delete请求方法: POST&#123;&quot;id&quot;:22,&quot;goodsId&quot;:1181061,&quot;goodsName&quot;:&quot;xudong的测试商品&quot;,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/hbzd03azu1tefqs435g3.jpg&quot;,&quot;discount&quot;:88,&quot;discountMember&quot;:2,&quot;addTime&quot;:&quot;2020-11-02 13:22:52&quot;,&quot;updateTime&quot;:&quot;2020-11-02 13:22:52&quot;,&quot;expireTime&quot;:&quot;2020-11-07 00:00:00&quot;&#125;&#123;&quot;errno&quot;:0,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n❌团购活动\n系统管理\n管理员（admin）\n✅list\n请求 URL: http://localhost:8083/admin/admin/list?page=1&amp;limit=20&amp;sort=add_time&amp;order=desc请求方法: GET请求 URL: http://182.92.235.201:8083/admin/admin/list?page=1&amp;limit=20&amp;username=1&amp;sort=add_time&amp;order=desc请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;total&quot;:51,&quot;items&quot;:[&#123;&quot;id&quot;:101,&quot;username&quot;:&quot;dsasasaasdasd&quot;,&quot;avatar&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/o4mo945qk1gb6einp5p3.jpg&quot;,&quot;roleIds&quot;:[21]&#125;,&#123;&quot;id&quot;:100,&quot;username&quot;:&quot;saddasdasads&quot;,&quot;avatar&quot;:&quot;&#x27;&quot;,&quot;roleIds&quot;:[21,3]&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\ncreate\n请求 URL: http://localhost:8083/admin/admin/create请求方法: POST&#123;&quot;username&quot;:&quot;wu&quot;,&quot;password&quot;:&quot;123456&quot;,&quot;avatar&quot;:&quot;/Users/wumin/JavaDevelopment/Project_02/img/4ae7622b-0484-4b0a-bcc8-009577d3c04c.jpeg&quot;,&quot;roleIds&quot;:[1]&#125;&#123;&quot;errno&quot;:601,&quot;errmsg&quot;:&quot;管理员名称不符合规定&quot;&#125;&#123;&quot;errno&quot;:602,&quot;errmsg&quot;:&quot;管理员密码长度不能小于6&quot;&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;id&quot;:107,&quot;username&quot;:&quot;dfkdslfj&quot;,&quot;password&quot;:&quot;$2a$10$qEfmgaDf/dkaSs5X4YEvIuxx4leqQcZi3T4yuUdCGlwmZhoRBQRW.&quot;,&quot;avatar&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/so0erkhj3d0885tahz8p.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-03 12:20:52&quot;,&quot;updateTime&quot;:&quot;2020-11-03 12:20:52&quot;,&quot;roleIds&quot;:[1]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n请求 URL: http://localhost:8083/admin/admin/update请求方法: POST&#123;&quot;id&quot;:8,&quot;username&quot;:&quot;fgfdg&quot;,&quot;password&quot;:&quot;43211142342134&quot;,&quot;lastLoginIp&quot;:null,&quot;lastLoginTime&quot;:null,&quot;avatar&quot;:&quot;/Users/wumin/JavaDevelopment/Project_02/img/87c6f21f-0325-45f2-826c-c8bd3b8438ec.png&quot;,&quot;addTime&quot;:null,&quot;updateTime&quot;:null,&quot;deleted&quot;:null,&quot;roleIds&quot;:[2,1]&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;id&quot;:103,&quot;username&quot;:&quot;wdasdsafs&quot;,&quot;password&quot;:&quot;$2a$10$ozEOnF63fCHLARu.4lFSMerqq3jwMGvPe21k1qwpacqkpI.Hn9GSi&quot;,&quot;avatar&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/cgd1ycx948h1d7ci04lx.png&quot;,&quot;updateTime&quot;:&quot;2020-11-03 12:55:56&quot;,&quot;roleIds&quot;:[3,2]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n请求 URL: http://localhost:8083/admin/admin/delete请求方法: POST&#123;&quot;errno&quot;:0,&quot;errmsg&quot;:&quot;成功&quot;&#125;&#123;&quot;id&quot;:8,&quot;username&quot;:&quot;fgfdg00&quot;,&quot;password&quot;:&quot;43211142342134&quot;,&quot;lastLoginIp&quot;:null,&quot;lastLoginTime&quot;:null,&quot;avatar&quot;:&quot;/Users/wumin/JavaDevelopment/Project_02/img/87c6f21f-0325-45f2-826c-c8bd3b8438ec.png&quot;,&quot;addTime&quot;:null,&quot;updateTime&quot;:null,&quot;deleted&quot;:null,&quot;roleIds&quot;:[2]&#125;\n操作日志（log）\nlist\n请求 URL: http://182.92.235.201:8083/admin/log/list?page=1&amp;limit=20&amp;name=admin&amp;sort=add_time&amp;order=desc请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;total&quot;:3435,&quot;items&quot;:[&#123;&quot;id&quot;:3417,&quot;admin&quot;:&quot;admin123&quot;,&quot;ip&quot;:&quot;221.232.57.159&quot;,&quot;type&quot;:1,&quot;action&quot;:&quot;添加管理员&quot;,&quot;status&quot;:true,&quot;result&quot;:&quot;dfkdslfj&quot;,&quot;comment&quot;:&quot;&quot;,&quot;addTime&quot;:&quot;2020-11-03 12:20:53&quot;,&quot;updateTime&quot;:&quot;2020-11-03 12:20:53&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:3416,&quot;admin&quot;:&quot;admin123&quot;,&quot;ip&quot;:&quot;221.232.57.159&quot;,&quot;type&quot;:1,&quot;action&quot;:&quot;登录&quot;,&quot;status&quot;:true,&quot;result&quot;:&quot;&quot;,&quot;comment&quot;:&quot;&quot;,&quot;addTime&quot;:&quot;2020-11-03 12:20:29&quot;,&quot;updateTime&quot;:&quot;2020-11-03 12:20:29&quot;,&quot;deleted&quot;:false&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private long total;    private List&lt;Item&gt; items;&#125;// Item.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Item &#123;    private long id;    private String admin;    private String ip;    private long type;    private String action;    private boolean status;    private String result;    private String comment;    private String addTime;    private String updateTime;    private boolean deleted;&#125;\n角色管理（role）\noptions\n请求 URL: http://182.92.235.201:8083/admin/role/options请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:[&#123;&quot;value&quot;:1,&quot;label&quot;:&quot;超级管理员&quot;&#125;,&#123;&quot;value&quot;:2,&quot;label&quot;:&quot;商场管理员&quot;&#125;,&#123;&quot;value&quot;:3,&quot;label&quot;:&quot;推广管理员&quot;&#125;,&#123;&quot;value&quot;:20,&quot;label&quot;:&quot;普通管理员&quot;&#125;,&#123;&quot;value&quot;:21,&quot;label&quot;:&quot;aaa管理&quot;&#125;,&#123;&quot;value&quot;:31,&quot;label&quot;:&quot;后台管理员&quot;&#125;,&#123;&quot;value&quot;:39,&quot;label&quot;:&quot;底层管理员11&quot;&#125;,&#123;&quot;value&quot;:47,&quot;label&quot;:&quot;555&quot;&#125;,&#123;&quot;value&quot;:48,&quot;label&quot;:&quot;rewrwerw&quot;&#125;,&#123;&quot;value&quot;:55,&quot;label&quot;:&quot;配置管理员&quot;&#125;,&#123;&quot;value&quot;:60,&quot;label&quot;:&quot;test&quot;&#125;,&#123;&quot;value&quot;:61,&quot;label&quot;:&quot;Shiroha&quot;&#125;,&#123;&quot;value&quot;:62,&quot;label&quot;:&quot;test111&quot;&#125;],&quot;errmsg&quot;:&quot;成功&quot;&#125;public class Datum &#123;    private long value;    private String label;&#125;\nlist\n请求 URL: http://localhost:8083/admin/role/list?page=1&amp;limit=20&amp;name=123123&amp;sort=add_time&amp;order=desc请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;total&quot;:3,&quot;items&quot;:[&#123;&quot;id&quot;:77,&quot;name&quot;:&quot;哈哈哈哈123&quot;,&quot;desc&quot;:&quot;哈哈哈&quot;,&quot;enabled&quot;:true,&quot;addTime&quot;:&quot;2020-11-03 20:05:04&quot;,&quot;updateTime&quot;:&quot;2020-11-03 20:05:04&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:74,&quot;name&quot;:&quot;12345678&quot;,&quot;desc&quot;:&quot;123456789&quot;,&quot;enabled&quot;:true,&quot;addTime&quot;:&quot;2020-11-03 17:43:10&quot;,&quot;updateTime&quot;:&quot;2020-11-03 17:43:10&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:73,&quot;name&quot;:&quot;admin12344565&quot;,&quot;desc&quot;:&quot;12321423412345&quot;,&quot;enabled&quot;:true,&quot;addTime&quot;:&quot;2020-11-03 17:30:46&quot;,&quot;updateTime&quot;:&quot;2020-11-03 17:30:46&quot;,&quot;deleted&quot;:false&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private long total;    private List&lt;Item&gt; items;&#125;@Datapublic class Item &#123;    private long id;    private String name;    private String desc;    private boolean enabled;    private String addTime;    private String updateTime;    private boolean deleted;&#125;\n✅ 对象储存（storage）\ncreate\n请求 URL: http://localhost:8083/admin/storage/create请求方法: POST&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;id&quot;:722,&quot;key&quot;:&quot;j125kkkiuvuj8waiocm8.jpg&quot;,&quot;name&quot;:&quot;iphone-se-white-select-2020.jpg&quot;,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;size&quot;:490325,&quot;url&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/j125kkkiuvuj8waiocm8.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-02 22:14:49&quot;,&quot;updateTime&quot;:&quot;2020-11-02 22:14:49&quot;&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;    private long id;    private String key;    private String name;    private String type;    private long size;    private String url;    private String addTime;    private String updateTime;\nlist\n请求 URL: http://localhost:8083/admin/storage/list?page=1&amp;limit=20&amp;key=629c8ef1-c378-4522-81a9-eebf722305f7&amp;name=iphone-11&amp;sort=add_time&amp;order=desc请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;total&quot;:1,&quot;items&quot;:[&#123;&quot;id&quot;:757,&quot;key&quot;:&quot;dzperj8f2hnbl73y7m3w.jpg&quot;,&quot;name&quot;:&quot;QQ图片20201015173712.jpg&quot;,&quot;type&quot;:&quot;image/jpeg&quot;,&quot;size&quot;:57685,&quot;url&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/dzperj8f2hnbl73y7m3w.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-03 09:20:37&quot;,&quot;updateTime&quot;:&quot;2020-11-03 10:55:16&quot;,&quot;deleted&quot;:false&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\nupdate\n请求 URL: http://localhost:8083/admin/storage/update请求方法: POST&#123;&quot;id&quot;:3,&quot;key&quot;:&quot;629c8ef1-c378-4522-81a9-eebf722305f7&quot;,&quot;name&quot;:&quot;iphone-11-pro-gold-select-2019.png&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;size&quot;:792817,&quot;url&quot;:&quot;/Users/wumin/JavaDevelopment/Project_02/img/629c8ef1-c378-4522-81a9-eebf722305f7.png&quot;,&quot;addTime&quot;:null,&quot;updateTime&quot;:null,&quot;deleted&quot;:false&#125;\ndelete\n请求 URL: http://182.92.235.201:8083/admin/storage/delete请求方法: POST&#123;&quot;id&quot;:3,&quot;key&quot;:&quot;629c8ef1-c378-4522-81a9-eebf722305f7&quot;,&quot;name&quot;:&quot;iphone-11.png&quot;,&quot;type&quot;:&quot;image/png&quot;,&quot;size&quot;:792817,&quot;url&quot;:&quot;/Users/wumin/JavaDevelopment/Project_02/img/629c8ef1-c378-4522-81a9-eebf722305f7.png&quot;,&quot;addTime&quot;:&quot;2020-11-03&quot;,&quot;updateTime&quot;:&quot;2020-11-03&quot;,&quot;deleted&quot;:false&#125;&#123;&quot;errno&quot;:0,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n其他服务\n✅统计服务（stat）\nuser\n请求 URL: http://182.92.235.201:8083/admin/stat/user请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;columns&quot;:[&quot;day&quot;,&quot;users&quot;],&quot;rows&quot;:[&#123;&quot;users&quot;:3&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;columns&quot;:[&quot;day&quot;,&quot;users&quot;],&quot;rows&quot;:[&#123;&quot;day&quot;:&quot;2019-04-20&quot;,&quot;users&quot;:1&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private List&lt;String&gt; columns;    private List&lt;Row&gt; rows;&#125;// Row.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Row &#123;    private String day;    private long users;&#125;\norder\n![image-20201101224041786](/Users/wumin/Library/Application Support/typora-user-images/image-20201101224041786.png)\n请求 URL: http://182.92.235.201:8083/admin/stat/order请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;columns&quot;:[&quot;day&quot;,&quot;orders&quot;,&quot;customers&quot;,&quot;amount&quot;,&quot;pcr&quot;],&quot;rows&quot;:[&#123;&quot;amount&quot;:5144.00,&quot;orders&quot;:4,&quot;customers&quot;:3,&quot;day&quot;:&quot;2020-04-27&quot;,&quot;pcr&quot;:1714.67&#125;,&#123;&quot;amount&quot;:1710.80,&quot;orders&quot;:5,&quot;customers&quot;:1,&quot;day&quot;:&quot;2020-10-01&quot;,&quot;pcr&quot;:1710.80&#125;,&#123;&quot;amount&quot;:80.00,&quot;orders&quot;:1,&quot;customers&quot;:1,&quot;day&quot;:&quot;2020-10-02&quot;,&quot;pcr&quot;:80.00&#125;,&#123;&quot;amount&quot;:137031.00,&quot;orders&quot;:48,&quot;customers&quot;:3,&quot;day&quot;:&quot;2020-10-06&quot;,&quot;pcr&quot;:45677.00&#125;,&#123;&quot;amount&quot;:162481.00,&quot;orders&quot;:21,&quot;customers&quot;:3,&quot;day&quot;:&quot;2020-10-07&quot;,&quot;pcr&quot;:54160.33&#125;,&#123;&quot;amount&quot;:139294.00,&quot;orders&quot;:41,&quot;customers&quot;:2,&quot;day&quot;:&quot;2020-10-08&quot;,&quot;pcr&quot;:69647.00&#125;,&#123;&quot;amount&quot;:35657.00,&quot;orders&quot;:19,&quot;customers&quot;:3,&quot;day&quot;:&quot;2020-10-09&quot;,&quot;pcr&quot;:11885.67&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private List&lt;String&gt; columns;    private List&lt;Row&gt; rows;&#125;// Row.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Row &#123;    private double amount;    private long orders;    private long customers;    private String day;    private double pcr;&#125;\ngoods\n![image-20201102092233415](/Users/wumin/Library/Application Support/typora-user-images/image-20201102092233415.png)\n请求 URL: http://182.92.235.201:8083/admin/stat/goods请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;columns&quot;:[&quot;day&quot;,&quot;orders&quot;,&quot;products&quot;,&quot;amount&quot;],&quot;rows&quot;:[&#123;&quot;amount&quot;:10319.00,&quot;orders&quot;:20,&quot;day&quot;:&quot;2020-04-27&quot;,&quot;products&quot;:20&#125;,&#123;&quot;amount&quot;:1702.80,&quot;orders&quot;:5,&quot;day&quot;:&quot;2020-10-01&quot;,&quot;products&quot;:13&#125;,&#123;&quot;amount&quot;:124.00,&quot;orders&quot;:3,&quot;day&quot;:&quot;2020-10-02&quot;,&quot;products&quot;:4&#125;,&#123;&quot;amount&quot;:5383.00,&quot;orders&quot;:2,&quot;day&quot;:&quot;2020-10-05&quot;,&quot;products&quot;:13&#125;,&#123;&quot;amount&quot;:147269.00,&quot;orders&quot;:56,&quot;day&quot;:&quot;2020-10-06&quot;,&quot;products&quot;:118&#125;,&#123;&quot;amount&quot;:216367.00,&quot;orders&quot;:39,&quot;day&quot;:&quot;2020-10-07&quot;,&quot;products&quot;:114&#125;,&#123;&quot;amount&quot;:294486.00,&quot;orders&quot;:57,&quot;day&quot;:&quot;2020-10-08&quot;,&quot;products&quot;:103&#125;,&#123;&quot;amount&quot;:58649.00,&quot;orders&quot;:34,&quot;day&quot;:&quot;2020-10-09&quot;,&quot;products&quot;:61&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private List&lt;String&gt; columns;    private List&lt;Row&gt; rows;&#125;// Row.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Row &#123;    private double amount;    private long orders;    private String day;    private long products;&#125;\n个人服务（profile）\npassword\n请求 URL: http://182.92.235.201:8083/admin/profile/password请求方法: POST&#123;&quot;errno&quot;:605,&quot;errmsg&quot;:&quot;账号密码不对&quot;&#125;\n✅ 首页（dashboard）\ndashboard\n请求 URL: http://182.92.235.201:8083/admin/dashboard请求方法: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;goodsTotal&quot;:265,&quot;userTotal&quot;:3,&quot;productTotal&quot;:271,&quot;orderTotal&quot;:188&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n安全\n权限管理\n定时任务\n异常处理\n@RestControllerAdvicepublic class CustomControllerAdvice &#123;    @ExceptionHandler(PermissionException.class)    public BaseRespVo permission()&#123;        //return BaseRespVo.fail(506);        return BaseRespVo.noPermission();    &#125;&#125;\n参数校验\nHibernate-validation\nGet\n\nMysql 根据月/周/日分组时间\n\nDATE_FORMAT(add_time ,‘%Y%m%d’) 日\nDATE_FORMAT(add_time,‘%Y%u’) 周\nDATE_FORMAT(add_time,‘%Y%m’) 月\n\n\nmysql除法运算保留小数\n\n\n\nDECIMAL(P，D) P是表示有效数字数的精度 D是表示小数点后的位数\n\nselect convert(t/100,decimal(15,2)) as money from test\n\n\nTRUNCATE(t/100,2) 返回数字X，截断到D小数位。\n\n\n\n\nmysql decimal类型\n\ndecimal:数字型，128bit，不存在精度损失，常用于银行帐目计算。（28个有效位）\n\n\n\n项目迭代\n\n商品统计表格数据显示 货品总额列的刻度太大 导致订单量和下单货品数量无法体现\n\n![image-20201102101255369](/Users/wumin/Library/Application Support/typora-user-images/image-20201102101255369.png)\n\n\n\n???\nselectByExampleWithBLOBs\n\nBLOB 二进制文件？\n\n关于 分页 PageHelper\n\n\n![image-20201102111457572](/Users/wumin/Library/Application Support/typora-user-images/image-20201102111457572.png)\n\n\npackage com.cskaoyan.mall25.service;\n\nimport com.cskaoyan.mall25.bean.BaseData;\nimport com.cskaoyan.mall25.bean.User;\nimport com.cskaoyan.mall25.bean.UserExample;\nimport com.cskaoyan.mall25.mapper.UserMapper;\nimport com.github.pagehelper.PageInfo;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport com.github.pagehelper.PageHelper;\n\nimport java.util.List;\n\n@Service\npublic class UserServiceImpl implements UserService&#123;\n\n    @Autowired\n    UserMapper userMapper;\n\n    /**\n     * @param page  分页的参数 → 当天的页码\n     * @param limit 分页的参数 → 当前页码数据最大值\n     * @param sort  排序的参数\n     * @param order 排序的参数\n     * @return\n     */\n    @Override\n    public BaseData queryUserList(Integer page, Integer limit, String sort, String order) &#123;\n\n        PageHelper.startPage(page, limit);//预编译的时候增加分页的sql语句\n\n        UserExample userExample = new UserExample();\n        //设置order by 后面的内容\n        userExample.setOrderByClause(sort + &quot; &quot; + order);//add_time desc\n        List&lt;User&gt; users = userMapper.selectByExample(userExample);// 35行\n\n        //可以在查询完成后获得pageInfo → 根据查询结果获得\n        PageInfo&lt;User&gt; userPageInfo = new PageInfo&lt;&gt;(users);\n        long total = userPageInfo.getTotal(); //根据35行sql的查询条件执行了一个select count(*)\n        \n        return BaseData.data(users,total);\n    &#125;\n&#125;\n  #### File 接收文件类型的参数 #文件上传文件上传的功能##### 引入依赖commons-io\\commons-fileupload![img](file:&#x2F;&#x2F;&#x2F;&#x2F;Users&#x2F;wumin&#x2F;Library&#x2F;Group%20Containers&#x2F;UBF8T346G9.Office&#x2F;TemporaryItems&#x2F;msohtmlclip&#x2F;clip_image001.png)##### 注册组件MultipartResolverMultipartFile![img](file:&#x2F;&#x2F;&#x2F;&#x2F;Users&#x2F;wumin&#x2F;Library&#x2F;Group%20Containers&#x2F;UBF8T346G9.Office&#x2F;TemporaryItems&#x2F;msohtmlclip&#x2F;clip_image002.png)##### 构造一个文件上传的表单请求![img](file:&#x2F;&#x2F;&#x2F;&#x2F;Users&#x2F;wumin&#x2F;Library&#x2F;Group%20Containers&#x2F;UBF8T346G9.Office&#x2F;TemporaryItems&#x2F;msohtmlclip&#x2F;clip_image003.png)##### handler方法![img](file:&#x2F;&#x2F;&#x2F;&#x2F;Users&#x2F;wumin&#x2F;Library&#x2F;Group%20Containers&#x2F;UBF8T346G9.Office&#x2F;TemporaryItems&#x2F;msohtmlclip&#x2F;clip_image004.png)### 项目进度1. ✅git 整合 60min2. shiro3. log4. 异常处理5. 参数校验6. 静态资源Git 整合冲突orderuser✅Auth### 异常MethodArgumentTypeMismatchExceptionBindException2020-11-03 21:13:27.986  WARN 5984 --- [nio-8083-exec-9] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type &#39;java.lang.String&#39; to required type &#39;java.lang.Integer&#39;; nested exception is java.lang.NumberFormatException: For input string: &quot;fdsaa&quot;]## WX小程序 API（wx）### 安全服务### 首页服务### 类目服务（catalog）###### ✅current&#96;&#96;&#96;jsonRequest URL: http:&#x2F;&#x2F;localhost:8083&#x2F;wx&#x2F;catalog&#x2F;current?id&#x3D;1005001Request Method: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;currentCategory&quot;:&#123;&quot;id&quot;:1012000,&quot;name&quot;:&quot;杂货&quot;,&quot;keywords&quot;:&quot;杂货&quot;,&quot;desc&quot;:&quot;解忧，每个烦恼&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;c2a3d6349e72c35931fe3b5bcd0966be.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;547853361d29a37282f377b9a755dd37.png&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:8,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2020-11-02 17:33:20&quot;,&quot;deleted&quot;:false&#125;,&quot;currentSubCategory&quot;:[&#123;&quot;id&quot;:1008017,&quot;name&quot;:&quot;收纳&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;选自古驰竹柄原料供应商&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;fdc048e1bf4f04d1c20b32eda5d1dc6e.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;2a62f6c53f4ff089fa6a210c7a0c2e63.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:2,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1011002,&quot;name&quot;:&quot;海外&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;来自海外制造商的好物&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;da884ff3b9e9d5276986c99e85722461.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;fd1de05d274222f1e56d057d2f2c20c6.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:5,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1012002,&quot;name&quot;:&quot;雨具&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;WPC制作商出品&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;4e929a21baebdb1200361d8097e35e45.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;589da0f02917b8393197a43175764381.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:4,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1012003,&quot;name&quot;:&quot;文具&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;找回书写的力量&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;e1743239e41ca9af76875aedc73be7f0.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;e074795f61a83292d0f20eb7d124e2ac.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:1,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1020000,&quot;name&quot;:&quot;出行用品&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;出行小物，贴心相伴&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;b29a11afa76b9f4a57131555f1a54c77.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;81e18c6970a7809ee0d86f0545428aa4.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:3,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1021000,&quot;name&quot;:&quot;节日礼盒&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;限量礼盒限时发售&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;e7b37b1ed5c18d63dc3e6c3f1aa85d8a.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;bbb6f0ab4f6321121250c12583b0ff9a.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:8,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036001,&quot;name&quot;:&quot;眼镜&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;实用加时尚，造型百搭单品&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;97f5f75ea1209dfbb85e91932d26c3ed.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;c25fb420ccb6f692a2d16f1740b60d21.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:9,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036002,&quot;name&quot;:&quot;汽车用品&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;给你的爱车添装备&quot;,&quot;pid&quot;:1012000,&quot;iconUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;382cda1ef9cca77d99bcef05070d7db0.png&quot;,&quot;picUrl&quot;:&quot;http:&#x2F;&#x2F;yanxuan.nosdn.127.net&#x2F;552e943e585a999169fdbc57b59524d6.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:10,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;package io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Data &#123;    private CurrentCategory currentCategory;    private List&lt;CurrentCategory&gt; currentSubCategory;&#125;&#x2F;&#x2F; CurrentCategory.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CurrentCategory &#123;    private long id;    private String name;    private String keywords;    private String desc;    private long pid;    private String iconURL;    private String picURL;    private String level;    private long sortOrder;    private String addTime;    private String updateTime;    private boolean deleted;&#125;\n\n\n\n✅index\nRequest URL: http://182.92.235.201:8083/wx/catalog/indexRequest Method: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;currentCategory&quot;:&#123;&quot;id&quot;:1011000,&quot;name&quot;:&quot;婴童&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;爱，从心开始&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/1ba9967b8de1ac50fad21774a4494f5d.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/9cc0b3e0d5a4f4a22134c170f10b70f2.png&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:7,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2020-11-03 01:17:25&quot;,&quot;deleted&quot;:false&#125;,&quot;categoryList&quot;:[&#123;&quot;id&quot;:1011000,&quot;name&quot;:&quot;婴童&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;爱，从心开始&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/1ba9967b8de1ac50fad21774a4494f5d.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/9cc0b3e0d5a4f4a22134c170f10b70f2.png&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:7,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2020-11-03 01:17:25&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1011001,&quot;name&quot;:&quot;妈咪&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;犬印、Harvest Hills制造商&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/720aebaa529df9391b95a078dfb2fd5c.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/844e2f4dce94f71283840c141d4ca71b.png&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:2,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2020-11-03 00:21:06&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1012000,&quot;name&quot;:&quot;杂货&quot;,&quot;keywords&quot;:&quot;杂货&quot;,&quot;desc&quot;:&quot;解忧，每个烦恼&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/c2a3d6349e72c35931fe3b5bcd0966be.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/547853361d29a37282f377b9a755dd37.png&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:8,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2020-11-02 17:33:20&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1020003,&quot;name&quot;:&quot;服装&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;萌宝穿搭，柔软舒适触感&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/4e50f3c4e4d0a64cd0ad14cfc0b6bd17.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/004f5f96df4aeb0645abbd70c0637239.png&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:1,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2020-11-04 11:06:29&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036060,&quot;name&quot;:&quot;小刘鸭&quot;,&quot;keywords&quot;:&quot;萨达阿萨德&quot;,&quot;desc&quot;:&quot;阿斯顿撒多&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/y6mmhl9oishei0wjabr6.png&quot;,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/lv86x40cxy6rnmmzarv6.jpg&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-02 15:15:45&quot;,&quot;updateTime&quot;:&quot;2020-11-02 17:39:27&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036097,&quot;name&quot;:&quot;假假按揭啊&quot;,&quot;keywords&quot;:&quot;接代付款&quot;,&quot;desc&quot;:&quot;鼎折覆餗&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/ch0x0al8vgh7gtw0r8t1.png&quot;,&quot;picUrl&quot;:&quot;&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-03 23:08:37&quot;,&quot;updateTime&quot;:&quot;2020-11-03 23:08:37&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036098,&quot;name&quot;:&quot;发多少&quot;,&quot;keywords&quot;:&quot;的是非法的&quot;,&quot;desc&quot;:&quot;食发鬼&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/ry1kgwhfn2scbaigz5yb.png&quot;,&quot;picUrl&quot;:&quot;&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-03 23:11:03&quot;,&quot;updateTime&quot;:&quot;2020-11-03 23:11:03&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036099,&quot;name&quot;:&quot;如果哥哥&quot;,&quot;keywords&quot;:&quot;的范德萨发&quot;,&quot;desc&quot;:&quot;吴凤飞飞&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/va6fhvje551e0k8jy1kg.png&quot;,&quot;picUrl&quot;:&quot;&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-03 23:11:53&quot;,&quot;updateTime&quot;:&quot;2020-11-03 23:11:53&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036100,&quot;name&quot;:&quot;测试&quot;,&quot;keywords&quot;:&quot;无方法覆盖&quot;,&quot;desc&quot;:&quot;我发的发生的地方&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/702b8n7k8fxm7rvdvui3.png&quot;,&quot;picUrl&quot;:&quot;&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-04 09:27:56&quot;,&quot;updateTime&quot;:&quot;2020-11-04 09:27:56&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036101,&quot;name&quot;:&quot;终极测试&quot;,&quot;keywords&quot;:&quot;终极测试&quot;,&quot;desc&quot;:&quot;终极测试&quot;,&quot;pid&quot;:0,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/g4fsr6nb7d3p21sf86ff.png&quot;,&quot;picUrl&quot;:&quot;&quot;,&quot;level&quot;:&quot;L1&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-04 09:28:33&quot;,&quot;updateTime&quot;:&quot;2020-11-04 09:28:33&quot;,&quot;deleted&quot;:false&#125;],&quot;currentSubCategory&quot;:[&#123;&quot;id&quot;:1020004,&quot;name&quot;:&quot;婴童洗护&quot;,&quot;keywords&quot;:&quot;为&quot;,&quot;desc&quot;:&quot;天然，呵护宝宝肌肤&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/c55338691ebd46bee9ebf225f80363ce.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/f2e301b189befff1d99adf917ba8ce20.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:5,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2020-11-03 16:58:37&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1020005,&quot;name&quot;:&quot;寝居&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;无荧光剂，婴幼儿A类标准&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/0f3c5ad63139096fd0760219e12149af.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/476995896abea91d3f2e9ec20d56bd8d.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:3,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1020006,&quot;name&quot;:&quot;玩具&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;萌宝童趣必备&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/7aac7c5819f71345a52a4b9df23d6239.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/34b3267efcddad09cd652f181d87aab0.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:4,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1020007,&quot;name&quot;:&quot;喂养&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;宝宝吃得香，妈妈才放心&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/5db40a5bf84c177515610471d4d08687.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/6b6f1672fe041594245fe56a5dd80871.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:6,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1034001,&quot;name&quot;:&quot;童车童椅&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;安全舒适，给宝宝一个快乐童年&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;http://yanxuan.nosdn.127.net/06bbfb293b6194b27ebdb3350203a1f7.png&quot;,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/4d16871eb80dac59d1796c7d806a5cea.png&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:7,&quot;addTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;updateTime&quot;:&quot;2018-02-01 00:00:00&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036053,&quot;name&quot;:&quot;手机&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;s阿萨&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;&quot;,&quot;picUrl&quot;:&quot;&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-02 11:31:27&quot;,&quot;updateTime&quot;:&quot;2020-11-02 14:41:05&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036054,&quot;name&quot;:&quot;小刘鸭&quot;,&quot;keywords&quot;:&quot;表情包&quot;,&quot;desc&quot;:&quot;捣蛋鬼&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/btdnrydpj2m0ahzgv1i6.png&quot;,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/qd8sw0ia0oqp83yhqna8.jpg&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-02 11:49:03&quot;,&quot;updateTime&quot;:&quot;2020-11-02 14:30:28&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:1036088,&quot;name&quot;:&quot;asda&quot;,&quot;keywords&quot;:&quot;&quot;,&quot;desc&quot;:&quot;czczxc&quot;,&quot;pid&quot;:1011000,&quot;iconUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/9z15pk8l8iix5j2pb7sg.jpg&quot;,&quot;picUrl&quot;:&quot;&quot;,&quot;level&quot;:&quot;L2&quot;,&quot;sortOrder&quot;:50,&quot;addTime&quot;:&quot;2020-11-03 09:17:26&quot;,&quot;updateTime&quot;:&quot;2020-11-03 09:17:26&quot;,&quot;deleted&quot;:false&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private CurrentCategory currentCategory;    private List&lt;CurrentCategory&gt; categoryList;    private List&lt;CurrentCategory&gt; currentSubCategory;&#125;// CurrentCategory.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CurrentCategory &#123;    private long id;    private String name;    private String keywords;    private String desc;    private long pid;    private String iconURL;    private String picURL;    private Level level;    private long sortOrder;    private String addTime;    private String updateTime;    private boolean deleted;&#125;\n用到的 Service 层的方法     查询所有level = ？目录public List&lt;LevelOneVO&gt; selectLevel(String level)    \n商品服务\n购物车服务（cart）\n✅goodscount\nRequest URL: http://localhost:8083/wx/cart/goodscountRequest Method: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:5,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n✅add\nRequest URL: http://182.92.235.201:8083/wx/cart/addRequest Method: POST&#123;&quot;goodsId&quot;:1046002,&quot;number&quot;:3,&quot;productId&quot;:60&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:3,&quot;errmsg&quot;:&quot;成功&quot;&#125;data： goodscount\n✅index\nRequest URL: http://182.92.235.201:8083/wx/cart/indexRequest Method: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;cartTotal&quot;:&#123;&quot;goodsCount&quot;:2,&quot;checkedGoodsCount&quot;:1,&quot;goodsAmount&quot;:179.00,&quot;checkedGoodsAmount&quot;:100.00&#125;,&quot;cartList&quot;:[&#123;&quot;id&quot;:567,&quot;userId&quot;:1,&quot;goodsId&quot;:1181123,&quot;goodsSn&quot;:&quot;123&quot;,&quot;goodsName&quot;:&quot;天天吞吞吐吐&quot;,&quot;productId&quot;:629,&quot;price&quot;:100.00,&quot;number&quot;:1,&quot;specifications&quot;:[&quot;标准&quot;,&quot;123456&quot;],&quot;checked&quot;:true,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/7tjbyqmg6yooer9a4hpq.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-04 22:45:42&quot;,&quot;updateTime&quot;:&quot;2020-11-05 11:02:45&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:605,&quot;userId&quot;:1,&quot;goodsId&quot;:1039051,&quot;goodsSn&quot;:&quot;1039051&quot;,&quot;goodsName&quot;:&quot;多功能午睡枕&quot;,&quot;productId&quot;:54,&quot;price&quot;:79.00,&quot;number&quot;:1,&quot;specifications&quot;:[&quot;标准&quot;],&quot;checked&quot;:false,&quot;picUrl&quot;:&quot;http://yanxuan.nosdn.127.net/c8ca0600fa7ba11ca8be6a3173dd38c9.png&quot;,&quot;addTime&quot;:&quot;2020-11-05 10:51:57&quot;,&quot;updateTime&quot;:&quot;2020-11-05 10:55:19&quot;,&quot;deleted&quot;:false&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private CartTotal cartTotal;    private List&lt;CartList&gt; cartList;&#125;// CartList.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CartList &#123;    private long id;    private long userID;    private long goodsID;    private String goodsSn;    private String goodsName;    private long productID;    private long price;    private long number;    private List&lt;String&gt; specifications;    private boolean checked;    private String picURL;    private String addTime;    private String updateTime;    private boolean deleted;&#125;// CartTotal.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CartTotal &#123;    private long goodsCount; //商品数    private long checkedGoodsCount; //选中的商品数    private long goodsAmount;//总额    private long checkedGoodsAmount;//选中的总额&#125;\n✅update\nRequest URL: http://182.92.235.201:8083/wx/cart/updateRequest Method: POST&#123;&quot;productId&quot;:60,&quot;goodsId&quot;:1046002,&quot;number&quot;:3,&quot;id&quot;:654&#125;&#123;&quot;errno&quot;:0,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n✅checked\nRequest URL: http://localhost:8083/wx/cart/checkedRequest Method: POST&#123;&quot;productIds&quot;:[204],&quot;isChecked&quot;:1&#125;\n✅fastadd\nRequest URL: http://182.92.235.201:8083/wx/cart/fastaddRequest Method: POST&#123;&quot;goodsId&quot;:1046002,&quot;number&quot;:1,&quot;productId&quot;:60&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:837,&quot;errmsg&quot;:&quot;成功&quot;&#125;data 是 cartId\ncheckout\n&#x2F;** * 购物车下单 * * @param userId    用户ID * @param cartId    购物车商品ID： *                  如果购物车商品ID是空，则下单当前用户所有选中的购物车商品； *                  如果购物车商品ID非空，则只下单当前购物车商品。 * @param addressId 收货地址ID： *                  如果收货地址ID是空，则查询当前用户的默认地址。 * @param couponId  优惠券ID： *                  如果优惠券ID是空，则自动选择合适的优惠券。 * @return 购物车操作结果 \nRequest URL: http://182.92.235.201:8083/wx/cart/checkout?cartId=889&amp;addressId=46&amp;couponId=0&amp;grouponRulesId=0Request Method: GETRequest URL: http://182.92.235.201:8083/wx/cart/checkout?cartId=0&amp;addressId=46&amp;couponId=0&amp;grouponRulesId=0Request Method: GET&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;grouponPrice&quot;:0,&quot;grouponRulesId&quot;:0,&quot;checkedAddress&quot;:&#123;&quot;id&quot;:46,&quot;name&quot;:&quot;vcghvgh&quot;,&quot;userId&quot;:3,&quot;provinceId&quot;:1,&quot;cityId&quot;:32,&quot;areaId&quot;:379,&quot;address&quot;:&quot;s&quot;,&quot;mobile&quot;:&quot;15834697354&quot;,&quot;isDefault&quot;:true,&quot;addTime&quot;:&quot;2020-11-04 17:19:28&quot;,&quot;updateTime&quot;:&quot;2020-11-04 17:19:28&quot;,&quot;deleted&quot;:false&#125;,&quot;actualPrice&quot;:123436.00,&quot;orderTotalPrice&quot;:123436.00,&quot;couponPrice&quot;:20.00,&quot;availableCouponLength&quot;:5,&quot;couponId&quot;:118,&quot;freightPrice&quot;:0,&quot;checkedGoodsList&quot;:[&#123;&quot;id&quot;:890,&quot;userId&quot;:1,&quot;goodsId&quot;:1181141,&quot;goodsSn&quot;:&quot;测试商品&quot;,&quot;goodsName&quot;:&quot;测试商品1&quot;,&quot;productId&quot;:716,&quot;price&quot;:123456.00,&quot;number&quot;:1,&quot;specifications&quot;:[&quot;规格值1&quot;,&quot;规格值2-1&quot;,&quot;规格值3-1&quot;,&quot;规格值4-1&quot;],&quot;checked&quot;:true,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/723bvkecf3rqaj4lbt1r.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-06 15:24:00&quot;,&quot;updateTime&quot;:&quot;2020-11-06 15:24:00&quot;,&quot;deleted&quot;:false&#125;],&quot;goodsTotalPrice&quot;:123456.00,&quot;addressId&quot;:46&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;@Datapublic class Data &#123;    private Integer grouponPrice;    private Integer grouponRulesId;    private Address checkedAddress;//选中的地址    private Integer actualPrice;//实际价格    private Integer orderTotalPrice;//实际价格    private Integer couponPrice;//优惠券价格    private Integer availableCouponLength;//可用优惠券数量    private Integer couponId;//优惠券 Id    private Integer freightPrice;// 运费价格    private List&lt;Goods&gt; checkedGoodsList;//选中的商品    private Integer goodsTotalPrice;//总价    private Integer addressId;// 选中的地址Id&#125;// CheckedAddress.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CheckedAddress &#123;    private long id;    private String name;    private long userID;    private long provinceID;    private long cityID;    private long areaID;    private String address;    private String mobile;    private boolean isDefault;    private String addTime;    private String updateTime;    private boolean deleted;&#125;// CheckedGoodsList.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CheckedGoodsList &#123;    private long id;    private long userID;    private long goodsID;    private String goodsSn;    private String goodsName;    private long productID;    private long price;    private long number;    private List&lt;String&gt; specifications;    private boolean checked;    private String picURL;    private String addTime;    private String updateTime;    private boolean deleted;&#125;\n✅delete\nRequest URL: http://localhost:8083/wx/cart/deleteRequest Method: POST&#123;&quot;productIds&quot;:[624,60]&#125;&#123;&quot;errno&quot;:0,&quot;data&quot;:&#123;&quot;cartTotal&quot;:&#123;&quot;goodsCount&quot;:4,&quot;checkedGoodsCount&quot;:0,&quot;goodsAmount&quot;:10785.00,&quot;checkedGoodsAmount&quot;:0&#125;,&quot;cartList&quot;:[&#123;&quot;id&quot;:696,&quot;userId&quot;:1,&quot;goodsId&quot;:1181131,&quot;goodsSn&quot;:&quot;123&quot;,&quot;goodsName&quot;:&quot;电视机&quot;,&quot;productId&quot;:635,&quot;price&quot;:3888.00,&quot;number&quot;:2,&quot;specifications&quot;:[&quot;标准&quot;],&quot;checked&quot;:false,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/ospwt8i7hv1xsxpmiv8i.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-05 17:40:54&quot;,&quot;updateTime&quot;:&quot;2020-11-05 17:54:13&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:697,&quot;userId&quot;:1,&quot;goodsId&quot;:1181132,&quot;goodsSn&quot;:&quot;1123&quot;,&quot;goodsName&quot;:&quot;大屏电视&quot;,&quot;productId&quot;:665,&quot;price&quot;:2998.00,&quot;number&quot;:1,&quot;specifications&quot;:[&quot;3kg&quot;],&quot;checked&quot;:false,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/j8958jwztf6mw3qyw6hr.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-05 17:41:02&quot;,&quot;updateTime&quot;:&quot;2020-11-05 17:43:35&quot;,&quot;deleted&quot;:false&#125;,&#123;&quot;id&quot;:698,&quot;userId&quot;:1,&quot;goodsId&quot;:1181137,&quot;goodsSn&quot;:&quot;111111&quot;,&quot;goodsName&quot;:&quot;武器大师贾克斯&quot;,&quot;productId&quot;:678,&quot;price&quot;:11.00,&quot;number&quot;:1,&quot;specifications&quot;:[&quot;1&quot;,&quot;黑&quot;],&quot;checked&quot;:false,&quot;picUrl&quot;:&quot;http://182.92.235.201:8083/wx/storage/fetch/aq3dimt4xwkmv2snteh6.jpg&quot;,&quot;addTime&quot;:&quot;2020-11-05 17:41:14&quot;,&quot;updateTime&quot;:&quot;2020-11-05 17:43:35&quot;,&quot;deleted&quot;:false&#125;]&#125;,&quot;errmsg&quot;:&quot;成功&quot;&#125;\n订单服务\n会员服务\n收货地址服务\n品牌商服务（brand）\n✅list\nRequest URL: http://localhost:8083/wx/brand/list?page=1&amp;size=10Request Method: GETRequest URL: http://182.92.235.201:8083/wx/goods/list?brandId=1001000&amp;page=1&amp;size=100Request Method: GET@Datapublic class Data &#123;    private long totalPages;    private List&lt;BrandList&gt; brandList;&#125;// BrandList.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class BrandList &#123;    private long id;    private String name;    private String desc;    private String picURL;    private long floorPrice;&#125;\n✅detail\nRequest URL: http://182.92.235.201:8083/wx/brand/detail?id=1001000Request Method: GET&#123;    &quot;errno&quot;: 0,    &quot;data&quot;: &#123;        &quot;brand&quot;: &#123;            &quot;id&quot;: 1001000,            &quot;name&quot;: &quot;MUJI制造商&quot;,            &quot;desc&quot;: &quot;严选精选了MUJI制造商和生产原料，\\n用几乎零利润的价格，剔除品牌溢价，\\n让用户享受原品牌的品质生活。&quot;,            &quot;picUrl&quot;: &quot;http://yanxuan.nosdn.127.net/1541445967645114dd75f6b0edc4762d.png&quot;,            &quot;sortOrder&quot;: 2,            &quot;floorPrice&quot;: 12.9,            &quot;addTime&quot;: &quot;2018-02-01 00:00:00&quot;,            &quot;updateTime&quot;: &quot;2018-02-01 00:00:00&quot;,            &quot;deleted&quot;: false        &#125;    &#125;,    &quot;errmsg&quot;: &quot;成功&quot;&#125;@Datapublic class Data &#123;    private Brand brand;&#125;// Brand.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Brand &#123;    private long id;    private String name;    private String desc;    private String picURL;    private long sortOrder;    private double floorPrice;    private String addTime;    private String updateTime;    private boolean deleted;&#125;\n收藏服务\n评论服务\n优惠券服务\n反馈服务\n足迹服务\n团购服务\n帮助服务\n搜索服务\n专题服务\n对象存储服务\n其他服务\nGet\n如果为null 不返回 json\n @JsonInclude(JsonInclude.Include.NON_NULL)\n?\n","plink":"https://gardenZzz.github.io/2020/382324/Project-02/"},{"title":"Project01_MoreMall","date":"2020-10-07T23:38:17.000Z","date_formatted":{"ll":"Oct 7, 2020","L":"10/07/2020","MM-DD":"10-07"},"updated":"2020-12-07T15:50:27.079Z","content":"基于开源前端项目 vue-MoreMall MVC 模式架构的在线商城。完整实现了后台管理和在线商城的所有功能\n\n前台系统：http://115.29.141.32:8085/#/mall/show/index\n后台管理系统：http://115.29.141.32:8085/admin.html#/login\nadmin.js 对应的就是后台管理系统所有的请求，页面所需要的任何数据，就会发起一个请求。\nclient.js 对应的是前台用户系统的所有请求，页面所需要的任何数据，都会发起一个请求。\naxios-admin.js axios-client.js 便于管理， Admin.js 中 axios 发起 http 请求时域名端口号配置在 axios-admin.js 文件\n后台管理模块（admin）\n✅ 登录&amp;退出&amp;显示所有管理员信息\n需求分析\nlogoutAdmin\nPOST /api/admin/logoutAdmin HTTP/1.1&#123;&quot;token&quot;:&quot;admin&quot;&#125;&#123;&quot;code&quot;:0&#125;\n参考代码\n代码结构\n\npom.xml\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;    &lt;groupId&gt;com.cskaoyan.25ee&lt;/groupId&gt;    &lt;artifactId&gt;mall&lt;/artifactId&gt;    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;    &lt;packaging&gt;war&lt;/packaging&gt;    &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;            &lt;version&gt;3.1.0&lt;/version&gt;            &lt;scope&gt;provided&lt;/scope&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;            &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;            &lt;version&gt;1.9.3&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;            &lt;version&gt;1.3.3&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;mysql&lt;/groupId&gt;            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;            &lt;version&gt;5.1.47&lt;/version&gt;            &lt;scope&gt;runtime&lt;/scope&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;            &lt;artifactId&gt;druid&lt;/artifactId&gt;            &lt;version&gt;1.1.10&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;commons-dbutils&lt;/groupId&gt;            &lt;artifactId&gt;commons-dbutils&lt;/artifactId&gt;            &lt;version&gt;1.6&lt;/version&gt;        &lt;/dependency&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;            &lt;artifactId&gt;gson&lt;/artifactId&gt;            &lt;version&gt;2.8.5&lt;/version&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;&lt;/project&gt;\ndruid.properties\n#驱动加载driverClassName=com.mysql.jdbc.Driver#注册驱动url=jdbc:mysql://127.0.0.1:3306/25_mall?characterEncoding=utf-8#连接数据库的用户名username=root#连接数据库的密码password=123456#属性类型的字符串，通过别名的方式配置扩展插件， 监控统计用的stat 日志用log4j 防御sql注入:wallfilters=stat#初始化时池中建立的物理连接个数。initialSize=2#最大的可活跃的连接池数量maxActive=300#获取连接时最大等待时间，单位毫秒，超过连接就会失效。配置了maxWait之后，缺省启用公平锁，并发效率会有所下降， 如果需要可以通过配置useUnfairLock属性为true使用非公平锁。maxWait=60000#连接回收器的运行周期时间，时间到了清理池中空闲的连接，testWhileIdle根据这个判断timeBetweenEvictionRunsMillis=60000minEvictableIdleTimeMillis=300000#用来检测连接是否有效的sql，要求是一个查询语句。validationQuery=SELECT 1#建议配置为true，不影响性能，并且保证安全性。 申请连接的时候检测，如果空闲时间大于timeBetweenEvictionRunsMillis， 执行validationQuery检测连接是否有效。testWhileIdle=true#申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。设置为falsetestOnBorrow=false#归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能,设置为flasetestOnReturn=false#是否缓存preparedStatement，也就是PSCache。poolPreparedStatements=false#池中能够缓冲的preparedStatements语句数量maxPoolPreparedStatementPerConnectionSize=200\nfilter\nApplication Filter\npublic void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException &#123;  //        HttpServletRequest request = (HttpServletRequest) servletRequest;        HttpServletResponse response = (HttpServletResponse) servletResponse;  //设置编码格式，解决中文乱码        request.setCharacterEncoding(&quot;utf-8&quot;);        response.setContentType(&quot;text/html;charset=utf-8&quot;);  //跨域相关        response.setHeader(&quot;Access-Control-Allow-Origin&quot;,&quot;*&quot;);        response.setHeader(&quot;Access-Control-Allow-Methods&quot;,&quot;POST,GET,OPTIONS,PUT,DELETE&quot;);        response.setHeader(&quot;Access-Control-Allow-Headers&quot;,&quot;x-requested-with,Authorization,Content-Type&quot;);        response.setHeader(&quot;Access-Control-Allow-Credentials&quot;,&quot;true&quot;);        filterChain.doFilter(request, response);    &#125;\ncontroller\n与客服端（浏览器）进行通信，返回数据给前端\nAdminServlet\n//@WebServlet(&quot;/api/admin/admin/*&quot;)//String requestURI = req.getRequestURI();String action = requestURI.replace(&quot;/api/admin/admin/&quot;, &quot;&quot;);/*** Admins* &#123;&quot;code&quot;:0,&quot;data&quot;:[&#123;&quot;id&quot;:1,&quot;email&quot;:&quot;admin&quot;,&quot;nickname&quot;:&quot;admin&quot;,&quot;pwd&quot;:&quot;admin&quot;&#125;]&#125;* @param req* @param resp*/private void allAdmins(HttpServletRequest req, HttpServletResponse resp) throws IOException &#123;  //调用 Service.allAdmins()  adminService.allAdmins()  //以json的形式给前端返回数据  Result(0, null, adminList);  gson.toJson(result)&#125;/*** 登录* 抓包，看公网服务器上面的请求报文和响应报文格式* 然后本地加以复现（请求报文看本地的也ok）* &#123;&quot;email&quot;:&quot;admin&quot;,&quot;pwd&quot;:&quot;admin&quot;&#125;-----请求体* 前端提交的请求报文请求体参数是json字符串，还能使用request.getParameter API吗？* 不能，该API只能够去获取到key1=value1&amp;key2=value2的形式* 。。。。。。中间就是需要我们去实现的* 返回一个响应报文----抓公网服务器上面的报文* &#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;密码不正确!&quot;&#125;----用户名密码不正确* &#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;token&quot;:&quot;admin&quot;,&quot;name&quot;:&quot;admin&quot;&#125;&#125;---登录成功* @param req* @param resp*/private void login(HttpServletRequest req, HttpServletResponse resp) throws IOException &#123;  //1.获取请求体的字符串，封装📦到bean（AdminLoginBO loginBO）    //2.loginBO 判空  loginBO.isEmpty()    &quot;登录信息不能为空&quot;    //3.向service传入bean，获取登录结果  int code = adminService.login(loginBO);    //4. 根据结果（200/404/500），向前端返回数据  &#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;token&quot;:&quot;admin&quot;,&quot;name&quot;:&quot;admin&quot;&#125;&#125;---登录成功    &quot;用户名或者密码错误&quot;    &quot;当前系统繁忙&quot;&#125;//\nservice\n处理服务端逻辑\nAdminService\n//定义 login、allAdmins 方法public interface AdminService &#123;    int login(AdminLoginBO loginBO);    List&lt;Admin&gt; allAdmins();&#125;\nAdminServiceImpl\n//实现 login、allAdmins 方法\ndao\n发送SQL语句，与数据库通信（CURD）\nAdminDao\npublic interface AdminDao &#123;    int login(AdminLoginBO loginBO);    List&lt;Admin&gt; allAdmins();&#125;\nAdminDaoImpl\n//login// todo ??? SQL DBUtils//todo ??? queryRunner.query() 获取的是什么对象？Long?query = runner.query(&quot;select count(*) from admin where email = ? and pwd = ?&quot;, new ScalarHandler&lt;&gt;(), loginBO.getEmail(), loginBO.getPwd());return 200/404/500  //allAdminsadminList = runner.query(&quot;select * from admin&quot;, new BeanListHandler&lt;Admin&gt;(Admin.class));return adminList;\nbean\n从json字符串封装📦的对象\nbo_AdminLoginBO\nAdminLoginBO\n//\nAdmin\n//\nResult\n//\nutils\nDruidUtils\n//SQL 线程池public class DruidUtils &#123;    private static DataSource dataSource;    static &#123;        InputStream inputStream = DruidUtils.class.getClassLoader().getResourceAsStream(&quot;druid.properties&quot;);        Properties properties = new Properties();        try &#123;            properties.load(inputStream);            dataSource = DruidDataSourceFactory.createDataSource(properties);        &#125; catch (Exception e) &#123;            e.printStackTrace();        &#125;    &#125;    public static Connection getConnection() throws SQLException &#123;        return dataSource.getConnection();    &#125;    public static DataSource getDataSource()&#123;        return dataSource;    &#125;&#125;\nHttpUtils\npublic class HttpUtils &#123;    /**     * 请求体的内容---&gt;字符串     * @param req     * @return     * @throws IOException     */    public static String parseRequest(HttpServletRequest req) throws IOException &#123;      //todo ??? JAVA IO        ServletInputStream inputStream = req.getInputStream();        ByteArrayOutputStream bos = new ByteArrayOutputStream();              int length = 0;        byte[]  bytes = new byte[1024];        while ((length = inputStream.read(bytes)) != -1)&#123;            bos.write(bytes, 0, length);        &#125;         return bos.toString(&quot;utf-8&quot;);    &#125;&#125;\n代码实现\n✅管理员账号CRUD\n需求分析\nCreate\n\nPOST /api/admin/addAdminss HTTP/1.1&#123;&quot;nickname&quot;:&quot;wsdsz&quot;,&quot;email&quot;:&quot;11223344@qq.com&quot;,&quot;pwd&quot;:&quot;Asd.0Asd.0!&quot;&#125;// 成功&#123;&quot;code&quot;:0&#125;// 失败&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;管理员信息不能为空&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;账号已存在&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;昵称已存在&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;当前系统繁忙&quot;&#125;//正则 (写在了前端)必须 qq 邮箱 qq 号 5-12 位!昵称只能包括数字字母的组合，长度为 4-15 位!密码最少 8 位最多 16 位，至少 1 个大写字母，1 个小写字母，1 个数字和 1 个特殊字符!//SQL       String sql1 = &quot;select count(*) from admin where email = ? &quot;;       String sql2 = &quot;select count(*) from admin where nickname = ? &quot;;       String sql3 = &quot;insert into admin value(null, ?, ?, ?)&quot;;       \nRetrieve\ngetAdminsInfo\nGET /api/admin/getAdminsInfo?id=80 HTTP/1.1&#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;id&quot;:80,&quot;email&quot;:&quot;18892292@qq.com&quot;,&quot;nickname&quot;:&quot;lly0000&quot;,&quot;pwd&quot;:&quot;Aa%345678&quot;&#125;&#125;\ngetSearchAdmins\nPOST /api/admin/getSearchAdmins HTTP/1.1&#123;&quot;nickname&quot;:&quot;admin&quot;,&quot;email&quot;:&quot;admin&quot;&#125;&#123;&quot;code&quot;:0,&quot;data&quot;:[&#123;&quot;id&quot;:156,&quot;email&quot;:&quot;2501882474@qq.com&quot;,&quot;nickname&quot;:&quot;test&quot;,&quot;pwd&quot;:&quot;Test@1234&quot;&#125;,&#123;&quot;id&quot;:166,&quot;email&quot;:&quot;574630686@qq.com&quot;,&quot;nickname&quot;:&quot;test123&quot;,&quot;pwd&quot;:&quot;123456&quot;&#125;]&#125;\nUpdate\nupdateAdminss\nPOST /api/admin/updateAdminss HTTP/1.1&#123;&quot;id&quot;:80,&quot;nickname&quot;:&quot;lly0000&quot;,&quot;email&quot;:&quot;0018892292@qq.com&quot;,&quot;pwd&quot;:&quot;Aa%345678&quot;&#125;// 成功&#123;&quot;code&quot;:0&#125;//失败&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;管理员信息不能为空&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;账号已存在&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;昵称已存在&quot;&#125;&#123;&quot;code&quot;:500,&quot;message&quot;:&quot;当前系统繁忙&quot;&#125;\n------[UPDATE] 2020.09.29 22:45------\nchangePwd\nPOST /api/admin/changePwd HTTP/1.1&#123;&quot;adminToken&quot;:&quot;wsdsz&quot;,&quot;oldPwd&quot;:&quot;Aa`!1234&quot;,&quot;newPwd&quot;:&quot;Aa`!12345&quot;,&quot;confirmPwd&quot;:&quot;Aa`!12345&quot;&#125;&#123;&quot;code&quot;:0&#125;//失败&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;旧密码错误!&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;请确认两次输入的新密码是否一致!&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;当前系统繁忙!&quot;&#125;\nDelete\nGET /api/admin/deleteAdmins?id=80 HTTP/1.1&#123;&quot;code&quot;:0&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;admin账号不允许删除&quot;&#125;&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;删除失败，请联系管理员&quot;&#125;\n代码实现\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n✅ 用户管理CRUD\n需求分析\nDateBase\n![image-20201005093715092](/Users/wumin/Library/Application Support/typora-user-images/image-20201005093715092.png)\n![image-20201005092851067](/Users/wumin/Library/Application Support/typora-user-images/image-20201005092851067.png)\n\n&#123;&quot;email&quot;:&quot;135799753111@qq.com&quot;,&quot;nickname&quot;:&quot;pikapika&quot;,&quot;pwd&quot;:&quot;Aa`!1234&quot;,&quot;recipient&quot;:&quot;皮卡丘&quot;,&quot;address&quot;:&quot;仙女座星系M18星皮卡丘部落&quot;,&quot;phone&quot;:&quot;130110110&quot;&#125;\nCreate\n\nRetrieve\nallUser\n\tGET /api/admin/allUser HTTP/1.1\thttp://localhost:8084/api/admin/user/allUser\t\t//传密码 但不显示 ???\t//实现 不传密码 也 OK\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: [&#123;\t\t&quot;id&quot;: 1,\t\t&quot;email&quot;: &quot;admin&quot;,\t\t&quot;nickname&quot;: &quot;admin&quot;,\t\t&quot;pwd&quot;: &quot;admin&quot;,\t\t&quot;recipient&quot;: &quot;admin&quot;,\t\t&quot;address&quot;: &quot;admin&quot;,\t\t&quot;phone&quot;: &quot;11111111111&quot;\t&#125;, &#123;\t\t&quot;id&quot;: 46,\t\t&quot;email&quot;: &quot;1357997531@qq.com&quot;,\t\t&quot;nickname&quot;: &quot;Pikachu&quot;,\t\t&quot;pwd&quot;: &quot;Qq@135799&quot;,\t\t&quot;recipient&quot;: &quot;皮卡丘&quot;,\t\t&quot;address&quot;: &quot;仙女座星系M18星皮卡丘部落&quot;,\t\t&quot;phone&quot;: &quot;130110110&quot;\t&#125;]&#125;\nsearchUser\n\tGET /api/admin/searchUser?word=admin HTTP/1.1\t\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: [&#123;\t\t&quot;id&quot;: 1,\t\t&quot;email&quot;: &quot;admin&quot;,\t\t&quot;nickname&quot;: &quot;admin&quot;,\t\t&quot;pwd&quot;: &quot;admin&quot;,\t\t&quot;recipient&quot;: &quot;admin&quot;,\t\t&quot;address&quot;: &quot;admin&quot;,\t\t&quot;phone&quot;: &quot;11111111111&quot;\t&#125;]&#125;\nUpdate\n\nDelete\ndeleteUser\nGET /api/admin/deleteUser?id=58 HTTP/1.1&#123;&quot;code&quot;:0&#125;//失败&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;你不能删除admin账号!&quot;&#125;&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;删除失败，请联系管理员&quot;&#125;\n代码实现\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n商品管理\n需求分析\n代码结构\n\nDateBase\ngoods_type\n![image-20201004170755694](/Users/wumin/Library/Application Support/typora-user-images/image-20201004170755694.png)\ngoods\n![image-20201004151138995](/Users/wumin/Library/Application Support/typora-user-images/image-20201004151138995.png)\ngoods_spec\n![image-20201004171751140](/Users/wumin/Library/Application Support/typora-user-images/image-20201004171751140.png)\nCreate\nimgUpload\nPOST /api/admin/imgUpload HTTP/1.1file\timage/jpeg\ttest.jpg\t19.71 KB (20,187 bytes)&#123;&quot;code&quot;:0,&quot;data&quot;:&quot;/static/image/1601803470450test.jpg&quot;&#125;\naddGoods\n\tPOST /api/admin/addGoods HTTP/1.1&#123;\t&quot;name&quot;: &quot;衣服&quot;,\t&quot;typeId&quot;: &quot;1&quot;,\t&quot;img&quot;: &quot;/static/image/1601803470450test.jpg&quot;,\t&quot;desc&quot;: &quot;好看的衣服&quot;,\t&quot;specList&quot;: [&#123;\t\t&quot;specName&quot;: &quot;s&quot;,\t\t&quot;stockNum&quot;: &quot;100&quot;,\t\t&quot;unitPrice&quot;: &quot;100&quot;\t&#125;, &#123;\t\t&quot;specName&quot;: &quot;m&quot;,\t\t&quot;stockNum&quot;: &quot;1000&quot;,\t\t&quot;unitPrice&quot;: &quot;99&quot;\t&#125;]&#125;&#123;&quot;code&quot;:0&#125;\t//失败\t&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;添加失败，请检联系管理员!&quot;&#125;String sql = &quot;&quot;; \naddType\nPOST /api/admin/addType HTTP/1.1http://localhost:8084/api/admin/goods/addType&#123;&quot;name&quot;:&quot;iPhone&quot;&#125;&#123;&quot;code&quot;:0&#125;\naddSpec\nPOST /api/admin/addSpec HTTP/1.1//? 为什么只有修改商品的时候有 添加商品 的时候没有发起 addSpec 和 deleteSpec请求？？&#123;&quot;goodsId&quot;:&quot;480&quot;,&quot;specName&quot;:&quot;白色&quot;,&quot;stockNum&quot;:&quot;1000&quot;,&quot;unitPrice&quot;:&quot;1000&quot;&#125;\t//&#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;goodsId&quot;:&quot;480&quot;,&quot;specName&quot;:&quot;白色&quot;,&quot;stockNum&quot;:&quot;1000&quot;,&quot;unitPrice&quot;:&quot;1000&quot;&#125;&#125;\nreply\n请求 URL: http://localhost:8084/api/admin/goods/reply请求方法: POST&#123;&quot;id&quot;:387,&quot;content&quot;:&quot;你好傻&quot;&#125;&#123;&quot;code&quot;:0&#125;\nRetrieve\ngetType\n\tGET /api/admin/getType HTTP/1.1\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: [&#123;\t\t&quot;id&quot;: 1,\t\t&quot;name&quot;: &quot;女装&quot;\t&#125;, &#123;\t\t&quot;id&quot;: 190,\t\t&quot;name&quot;: &quot;男装&quot;\t&#125;]&#125;\ngetGoodsByType\n\tGET /api/admin/getGoodsByType?typeId=1 HTTP/1.1\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: [&#123;\t\t&quot;id&quot;: 477,\t\t&quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/157123045512415669928366681566992814(1).jpg&quot;,\t\t&quot;name&quot;: &quot;外套&quot;,\t\t&quot;price&quot;: 110.0,\t\t&quot;typeId&quot;: 1,\t\t&quot;stockNum&quot;: 3998\t&#125;, &#123;\t\t&quot;id&quot;: 478, \t\t&quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/157123055832115669931721908195203.jpg&quot;,\t\t&quot;name&quot;: &quot;新品外套&quot;,\t\t&quot;price&quot;: 200.0,\t\t&quot;typeId&quot;: 1,\t\t&quot;stockNum&quot;: 3000\t&#125;]&#125;\ngetGoodsInfo\n\tGET /api/admin/getGoodsInfo?id=598 HTTP/1.1\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: &#123;\t\t&quot;specs&quot;: [&#123;\t\t\t&quot;id&quot;: 1487,\t\t\t&quot;specName&quot;: &quot;S&quot;,\t\t\t&quot;stockNum&quot;: 1000,\t\t\t&quot;unitPrice&quot;: 98.0\t\t&#125;, &#123;\t\t\t&quot;id&quot;: 1511,\t\t\t&quot;specName&quot;: &quot;fggd&quot;,\t\t\t&quot;stockNum&quot;: 100,\t\t\t&quot;unitPrice&quot;: 25.0\t\t&#125;],\t\t&quot;goods&quot;: &#123;\t\t\t&quot;id&quot;: 598,\t\t\t&quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1601780934267连衣裙.JPG&quot;,\t\t\t&quot;name&quot;: &quot;连衣裙&quot;,\t\t\t&quot;desc&quot;: &quot;SDD&quot;,\t\t\t&quot;typeId&quot;: 1,\t\t\t&quot;unitPrice&quot;: 0.0 //不返回 ???\t\t&#125;\t&#125;&#125;\nrepliedMsg &amp;&amp; noReplyMsg\nhttp://localhost:8084/api/admin/goods/repliedMsgget&quot;replyContent&quot;:&quot;ok&quot;\nhttp://localhost:8084/api/admin/goods/noReplyMsgget&#123;    &quot;code&quot;: 0,    &quot;data&quot;: [        &#123;            &quot;id&quot;: 386,            &quot;userId&quot;: 95,            &quot;goodsId&quot;: 483,            &quot;content&quot;: &quot;手机好好看&quot;,            &quot;state&quot;: 1,            &quot;createtime&quot;: &quot;2020-10-07 20:28:21&quot;,            &quot;goods&quot;: &#123;                &quot;name&quot;: &quot;华为p30&quot;            &#125;,            &quot;user&quot;: &#123;                &quot;name&quot;: &quot;cookie&quot;            &#125;        &#125;,        &#123;            &quot;id&quot;: 387,            &quot;userId&quot;: 1,            &quot;goodsId&quot;: 482,            &quot;content&quot;: &quot;sdada&quot;,            &quot;state&quot;: 1,            &quot;createtime&quot;: &quot;2020-10-07 20:31:37&quot;,            &quot;goods&quot;: &#123;                &quot;name&quot;: &quot;摄像机&quot;            &#125;,            &quot;user&quot;: &#123;                &quot;name&quot;: &quot;admin&quot;            &#125;        &#125;]&#125;\nUpdate\nupdateGoods\n\tPOST /api/admin/updateGoods HTTP/1.1\t// addGoods 返回的参数 + 两个id&#123;\t&quot;id&quot;: &quot;598&quot;,\t&quot;name&quot;: &quot;连衣裙&quot;,\t&quot;typeId&quot;: 1,\t&quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1601780934267连衣裙.JPG&quot;,\t&quot;desc&quot;: &quot;SDD&quot;,\t&quot;specList&quot;: [&#123;\t\t&quot;id&quot;: 1487,\t\t&quot;specName&quot;: &quot;S&quot;,\t\t&quot;stockNum&quot;: 1000,\t\t&quot;unitPrice&quot;: 98\t&#125;, &#123;\t\t&quot;id&quot;: 1511,\t\t&quot;specName&quot;: &quot;M&quot;,\t\t&quot;stockNum&quot;: 100,\t\t&quot;unitPrice&quot;: 25\t&#125;]&#125;\t&#123;&quot;code&quot;:0&#125;\t&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;商品参数不允许为空，请检查后提交!&quot;&#125;\t\t&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;修改失败，请检联系管理员!&quot;&#125;\nDelete\ndeleteGoods\nGET /api/admin/deleteGoods?id=598 HTTP/1.1&#123;&quot;code&quot;:0&#125;\ndeleteType\nGET /api/admin/deleteType?typeId=282 HTTP/1.1//删除逻辑1. 删除Type2. 修改表 goods （typeId = 1 wherh typeId=282）1 是默认分类，商品到默认类目后可重新选择类目//返回&#123;&quot;code&quot;:0&#125;//done 前端&#x27;此操作将记录ip(所以一定要删除的是自己添加的分类,不要删除别人创建的分类)&#x27;---&gt;&#x27;请确认要删除的类目：&#x27;+this.tagNow.name&#x27;是否要删除(分类相关商品,评论,订单将同步删除)分类:&#x27;+this.tagNow.name)---&gt;&#x27;删除后该类目下的所有商品将移动至默认类目，可在默认类目为商品重新分配类目，点击确认将执行删除操作！！！&#x27;//前端代码备份 Goods.Vue  methods:&#123;   deleteType()&#123;       alert(&#x27;此操作将记录ip(所以一定要删除的是自己添加的分类,不要删除别人创建的分类)&#x27;)       if (confirm(&#x27;是否要删除(分类相关商品,评论,订单将同步删除)分类:&#x27;+this.tagNow.name))&#123;           alert(&#x27;即将执行删除操作&#x27;)           const res = deleteType(this.tagNow.id);           res.then((res)=&gt;&#123;                   alert(&#x27;删除成功！请刷新&#x27;);               &#125;)               .catch((e)=&gt;&#123;                   alert(e);               &#125;)       &#125;else &#123;           alert(&#x27;已取消删除&#x27;)       &#125;   &#125;\ndeleteSpec\nPOST /api/admin/deleteSpec HTTP/1.1//??? get 传 id 不可以吗？？？&#123;&quot;goodsId&quot;:&quot;480&quot;,&quot;specName&quot;:&quot;橘色&quot;&#125;&#123;&quot;code&quot;:0&#125;\n参考代码\nFileUploadUtils\nmaven Apache Commons FileUpload » 1.3.3\n&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;&lt;dependency&gt;    &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;    &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;    &lt;version&gt;1.3.3&lt;/version&gt;&lt;/dependency&gt;\npublic class FileUploadUtils &#123;    public static Map&lt;String, Object&gt; parseRequest(HttpServletRequest request) &#123;        DiskFileItemFactory factory = new DiskFileItemFactory();        ServletContext servletContext = request.getServletContext();        File repository = (File) servletContext.getAttribute(&quot;javax.servlet.context.tempdir&quot;);        factory.setRepository(repository);        Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();        // Create a new file upload handler        ServletFileUpload upload = new ServletFileUpload(factory);        // 1024 bytes        // upload.setFileSizeMax(1024 * 1024 * 5);        //用于解决上传的文件名中文乱码        upload.setHeaderEncoding(&quot;utf-8&quot;);        // Parse the request        try &#123;            //前端页面内的每一个input框，都会被解析成一个FileItem            List&lt;FileItem&gt; items = upload.parseRequest(request);            Iterator&lt;FileItem&gt; itemIterator = items.iterator();            while (itemIterator.hasNext()) &#123;                FileItem fileItem = itemIterator.next();                if (fileItem.isFormField()) &#123;                    //是否是常规form表单数据                    processFormField(fileItem, params);                &#125; else &#123;                    processUploadedFile(fileItem,request, params);                &#125;            &#125;        &#125; catch (FileUploadException e) &#123;         e.printStackTrace();        &#125;        return params;    &#125;    private static void processUploadedFile(FileItem fileItem, HttpServletRequest request, Map&lt;String, Object&gt; params) &#123;        //fieldName就是input的name属性        String fieldName = fileItem.getFieldName();        String fileName = fileItem.getName();        String uuid = UUID.randomUUID().toString();        fileName = uuid + &quot;-&quot; + fileName;        int hashCode = fileName.hashCode();        String hexString = Integer.toHexString(hashCode);        String basePath = &quot;image&quot;;        for (char c : hexString.toCharArray()) &#123;            basePath = basePath + &quot;/&quot; + c;        &#125;        String contentType = fileItem.getContentType();        boolean isInMemory = fileItem.isInMemory();        long sizeInBytes = fileItem.getSize();        System.out.println(fieldName + &quot;==&quot; + fileName + &quot;==&quot; + contentType + &quot;==&quot; + isInMemory + &quot;==&quot; + sizeInBytes);        //比如保存到部署根目录image目录下        String relativePath = basePath + &quot;/&quot; + fileName;        String realPath = request.getServletContext().getRealPath(relativePath);        File file = new File(realPath);        if(!file.getParentFile().exists())&#123;            file.getParentFile().mkdirs();        &#125;        try &#123;            fileItem.write(file);            params.put(fieldName, relativePath);//            user.setImage(relativePath);        &#125; catch (Exception e) &#123;            e.printStackTrace();        &#125;    &#125;    private static void processFormField(FileItem fileItem, Map&lt;String, Object&gt; params) &#123;        String name = fileItem.getFieldName();        String value = null;        try &#123;            //解决form表单里面的value值中文乱码            value = fileItem.getString(&quot;utf-8&quot;);            //虽然很冗余，但是可用            //这个地方有一个bug，那就是如果传的是checkbox，后面的值会把前面的覆盖            params.put(name, value);        &#125; catch (UnsupportedEncodingException e) &#123;            e.printStackTrace();        &#125;        System.out.println(name + &quot;: &quot; +value);    &#125;&#125;\napplication.properties\ndomain=http://localhost:8084/\nApplicationListener\n//把 domain 存到 ServletContext@WebListenerpublic class ApplicationListener implements ServletContextListener &#123;    @Override    public void contextInitialized(ServletContextEvent servletContextEvent) &#123;        InputStream inputStream = ApplicationListener.class.getClassLoader().getResourceAsStream(&quot;application.properties&quot;);        Properties properties = new Properties();        try &#123;            properties.load(inputStream);            String domain = properties.getProperty(&quot;domain&quot;);            servletContextEvent.getServletContext().setAttribute(&quot;domain&quot;, domain);        &#125; catch (IOException e) &#123;            e.printStackTrace();        &#125;    &#125;    @Override    public void contextDestroyed(ServletContextEvent servletContextEvent) &#123;    &#125;&#125;\nimgUpload\nprivate void imgUpload(HttpServletRequest request, HttpServletResponse response) throws IOException &#123;        //commons-fileupload        Map&lt;String, Object&gt; map = FileUploadUtils.parseRequest(request);        String file = (String) map.get(&quot;file&quot;);        //file其实就是路径，但是这个路径不能直接传给8085，为什么？  /image/xxxxxxx        //因为当前图片是保存在8084系统里面的，所以如果直接返回一个相对路径，那么最终拼接出来的主机名肯定是8085        String domain = (String) getServletContext().getAttribute(&quot;domain&quot;);//ApplicationListener 存进去的        file =  domain + file;        response.getWriter().println(gson.toJson(Result.ok(file)));    &#125;\nGoodsServlet_addGoods\ntry &#123;           addGoodsBO = gson.fromJson(requestBody, AddGoodsBO.class);       &#125;catch (Exception e)&#123;           response.getWriter().println(gson.toJson(Result.error(&quot;参数必须为数字&quot;))); // ??? 什么时候抛出异常           return;&#125;\nGoodsServiceImpl_addGoods\nList&lt;AddSpecVO&gt; specList = addGoodsBO.getSpecList();int goodsId = goodsDao.selectLastInsertId();//        2.保存spec表goodsDao.addSpecs(specList, goodsId);\nGoodsDaoImpl_selectLastInsertId\n// BigInteger ScalarHandler的返回值？ 怎么处理？query = runner.query(&quot;select last_insert_id()&quot;, new ScalarHandler&lt;&gt;());query.intValue();\nJDBC 事务\nConnection.setAutoCommit(false); 开启事务DTLConnection.rollback(); 回滚事务Connection.commit(); 提交事务\n代码实现\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n✅订单管理\n需求分析\nDateBase\n![image-20201006153332218](/Users/wumin/Library/Application Support/typora-user-images/image-20201006153332218.png)\n\nCreate\n\nRetrieve\nordersByPage\n\tPOST /api/admin/ordersByPage HTTP/1.1\t\t&#123;\t&quot;state&quot;: -1,\t&quot;currentPage&quot;: 1,\t&quot;pagesize&quot;: 5,\t&quot;moneyLimit1&quot;: &quot;1&quot;,\t&quot;moneyLimit2&quot;: &quot;200&quot;,\t&quot;goods&quot;: &quot;1&quot;,\t&quot;address&quot;: &quot;1&quot;,\t&quot;name&quot;: &quot;1&quot;,\t&quot;id&quot;: &quot;1&quot;\t&#125;\t\t// 返回\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: &#123;\t\t&quot;total&quot;: 2,\t\t&quot;orders&quot;: [&#123;\t\t\t&quot;id&quot;: 1826,\t\t\t&quot;userId&quot;: 64,\t\t\t&quot;goodsDetailId&quot;: 1285,\t\t\t&quot;goods&quot;: &quot;高档衣柜&quot;,\t\t\t&quot;spec&quot;: &quot;五组柜&quot;,\t\t\t&quot;goodsNum&quot;: 1,\t\t\t&quot;amount&quot;: 3000.0,\t\t\t&quot;stateId&quot;: 0,\t\t\t&quot;state&quot;: &quot;未付款&quot;,\t\t\t&quot;user&quot;: &#123;\t\t\t\t&quot;nickname&quot;: &quot;Pikachu&quot;,\t\t\t\t&quot;name&quot;: &quot;皮卡丘&quot;,\t\t\t\t&quot;address&quot;: &quot;仙女座星系M18星皮卡丘部落&quot;,\t\t\t\t&quot;phone&quot;: &quot;130110110&quot;\t\t\t&#125;\t\t&#125;, &#123;\t\t\t&quot;id&quot;: 1825,\t\t\t&quot;userId&quot;: 64,\t\t\t&quot;goodsDetailId&quot;: 1717,\t\t\t&quot;goods&quot;: &quot;hahaha&quot;,\t\t\t&quot;spec&quot;: &quot;q&quot;,\t\t\t&quot;goodsNum&quot;: 1,\t\t\t&quot;amount&quot;: 111.0,\t\t\t&quot;stateId&quot;: 0,\t\t\t&quot;state&quot;: &quot;未付款&quot;,\t\t\t&quot;user&quot;: &#123;\t\t\t\t&quot;nickname&quot;: &quot;Pikachu&quot;,\t\t\t\t&quot;name&quot;: &quot;皮卡丘&quot;,\t\t\t\t&quot;address&quot;: &quot;仙女座星系M18星皮卡丘部落&quot;,\t\t\t\t&quot;phone&quot;: &quot;130110110&quot;\t\t\t&#125;\t\t&#125;]\t&#125;&#125;\ngetOrder\n\tGET /api/admin/order?id=1844 HTTP/1.1\t\t~~// 多返回一个 dFlag 用于修改是否删除~~\t\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: &#123;\t\t&quot;id&quot;: 1864,\t\t&quot;amount&quot;: 500.0,\t\t&quot;num&quot;: 1,\t\t&quot;goodsDetailId&quot;: 1247,\t\t&quot;state&quot;: 1,\t\t&quot;goods&quot;: &quot;组合音响&quot;,\t\t&quot;spec&quot;: [&#123;\t\t\t&quot;id&quot;: 1245,\t\t\t&quot;specName&quot;: &quot;单件&quot;,\t\t\t&quot;unitPrice&quot;: 0.0\t\t&#125;, &#123;\t\t\t&quot;id&quot;: 1246,\t\t\t&quot;specName&quot;: &quot;两件&quot;,\t\t\t&quot;unitPrice&quot;: 0.0\t\t&#125;, &#123;\t\t\t&quot;id&quot;: 1247,\t\t\t&quot;specName&quot;: &quot;三件&quot;,\t\t\t&quot;unitPrice&quot;: 0.0\t\t&#125;],\t\t&quot;states&quot;: [&#123;\t\t\t&quot;id&quot;: 0,\t\t\t&quot;name&quot;: &quot;未付款&quot;\t\t&#125;, &#123;\t\t\t&quot;id&quot;: 1,\t\t\t&quot;name&quot;: &quot;未发货&quot;\t\t&#125;, &#123;\t\t\t&quot;id&quot;: 2,\t\t\t&quot;name&quot;: &quot;已发货&quot;\t\t&#125;, &#123;\t\t\t&quot;id&quot;: 3,\t\t\t&quot;name&quot;: &quot;已完成订单&quot;\t\t&#125;],\t\t&quot;curState&quot;: &#123;\t\t\t&quot;id&quot;: 1\t\t&#125;,\t\t&quot;curSpec&quot;: &#123;\t\t\t&quot;id&quot;: 1247\t\t&#125;\t&#125;&#125;\n// Demo.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private Data data;&#125;// Data.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Data &#123;    private long id;    private long amount;    private long num;    private long goodsDetailID;    private long state;    private String goods;    private List&lt;Spec&gt; spec;    private List&lt;State&gt; states;    private CurS curState;    private CurS curSpec;&#125;// CurS.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CurS &#123;    private long id;&#125;// Spec.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Spec &#123;    private long id;    private String specName;    private long unitPrice;&#125;// State.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class State &#123;    private long id;    private String name;&#125;\nUpdate\nchangeOrder\n\tPOST /api/admin/changeOrder HTTP/1.1\t\t// 只实现更改订单状态的功能\t~~// 多返回一个 dFlag 用于修改是否删除~~\t&#123;\t&quot;id&quot;: &quot;1844&quot;,\t&quot;state&quot;: 3,\t&quot;spec&quot;: 1741,\t&quot;num&quot;: 1&#125;&#123;\t&quot;code&quot;: 0&#125;\nDelete\ndeleteOrder\n\tGET /api/admin/deleteOrder?id=1821 HTTP/1.1\t&#123;\t&quot;code&quot;: 0&#125;\n参考代码\nCreate\n\nRetrieve\nordersByPage\nServlet//1. 处理解析参数异常 &quot;参数必须是数字&quot;//2. 校验金额上下限 是否为数字 &quot;金额上下限必须是数字&quot;Service  //1. 获取 total  //2. 获取OrderVO  //3. 返回ordersPageVODao  getTotalCount    getDynamicSql    ordersByPage  \tparameter.add(ordersPageBO.getPagesize());    parameter.add((ordersPageBO.getCurrentPage() - 1) * ordersPageBO.getPagesize());model  Orders  OrdersPageBO  UserVO  OrderVO  OrdersPageVO    \nUpdate\n\nDelete\n\n代码实现\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n商城模块（mall）\n商城首页（index&amp;goods）\n需求分析\nDateBase\n\nCreate\npost http://localhost:8084/api/mall/goods/askGoodsMsg&#123;&quot;token&quot;:&quot;admin&quot;,&quot;msg&quot;:&quot;性能怎么样？？&quot;,&quot;goodsId&quot;:&quot;17&quot;&#125;&#123;&quot;code&quot;:0&#125;\nRetrieve\ngetType\nGET /api/mall/getType HTTP/1.\ngetGoodsByType\nGET /api/mall/getGoodsByType?typeId=-1 HTTP/1.http://localhost:8084/api/mall/goods/getGoodsByType?typeId=-1\ngetGoodsInfo\n\thttp://localhost:8084/api/mall/goods/getGoodsInfo?id=1\t\t&#123;    &quot;code&quot;: 0,    &quot;data&quot;: &#123;        &quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1571230945079156699823447120190828211623.jpg&quot;,        &quot;name&quot;: &quot;组合音响&quot;,        &quot;desc&quot;: &quot;优雅奢华&quot;,        &quot;typeId&quot;: 191,        &quot;specs&quot;: [            &#123;                &quot;id&quot;: 1245,                &quot;specName&quot;: &quot;单件&quot;,                &quot;stockNum&quot;: 72,                &quot;unitPrice&quot;: 200            &#125;,            &#123;                &quot;id&quot;: 1246,                &quot;specName&quot;: &quot;两件&quot;,                &quot;stockNum&quot;: 481,                &quot;unitPrice&quot;: 380            &#125;,            &#123;                &quot;id&quot;: 1247,                &quot;specName&quot;: &quot;三件&quot;,                &quot;stockNum&quot;: 996,                &quot;unitPrice&quot;: 500            &#125;        ],        &quot;unitPrice&quot;: 0    &#125;&#125;\n// Demo.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private Data data;&#125;// Data.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Data &#123;    private String img;    private String name;    private String desc;    private long typeID;    private List&lt;Spec&gt; specs;    private long unitPrice;&#125;// Spec.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Spec &#123;    private long id;    private String specName;    private long stockNum;    private long unitPrice;&#125;\ngetGoodsMsg // 问答\nhttp://localhost:8084/api/mall/goods/getGoodsMsg?id=1&#123;   &quot;code&quot;: 0,   &quot;data&quot;: [       &#123;           &quot;id&quot;: 334,           &quot;content&quot;: &quot;才1000块，会不会是假的&quot;,           &quot;asker&quot;: &quot;admin&quot;,           &quot;time&quot;: &quot;2020-10-06 08:35:57&quot;,           &quot;reply&quot;: &#123;               &quot;content&quot;: &quot;是假的&quot;,               &quot;time&quot;: &quot;2020-10-06 15:38:58&quot;           &#125;       &#125;,       &#123;           &quot;id&quot;: 397,           &quot;content&quot;: &quot;我是大傻子&quot;,           &quot;asker&quot;: &quot;admin&quot;,           &quot;time&quot;: &quot;2020-10-07 21:02:43&quot;,           &quot;reply&quot;: &#123;&#125;       &#125;   ]&#125;\n// 留言管理package io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private List&lt;Datum&gt; data;&#125;// Datum.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Datum &#123;    private long id;    private long userID;    private long goodsID;    private String content;    private String replyContent;    private long state;    private String createtime;    private Goods goods;    private Goods user;&#125;// Goods.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Goods &#123;    private String name;&#125;//留言显示// Demo.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private List&lt;Datum&gt; data;&#125;// Datum.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Datum &#123;    private long id;    private String content;    private String asker;    private String time;    private Reply reply;&#125;// Reply.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Reply &#123;    private String content;    private String time;&#125;\npublic class GoodsMsg &#123;    private long id;    private long userID;    private long goodsID;    private String content; //提问内容    private long state; //状态    private String createtime; //创建时间    private Goods goods;// 商品名称    private User user; //用户名称    private long id;    private String content;    private String asker;//用户名称    private String time;//创建时间    private Reply reply;    public class Reply &#123;        private String content;//回复内容        private String time; //回复时间    &#125;    public class Goods &#123;        private String name;    &#125;    public class User &#123;        private String name;    &#125;    &#125;\ngetGoodsComment //评价\n\thttp://localhost:8084/api/mall/goods/getGoodsComment?goodsId=1\t\t&#123;  &quot;code&quot;: 0,  &quot;data&quot;: &#123;    &quot;commentList&quot;: [      &#123;        &quot;user&quot;: &#123;          &quot;nickname&quot;: &quot;admin&quot;        &#125;,        &quot;score&quot;: 100,        &quot;id&quot;: 121,        &quot;specName&quot;: &quot;单件&quot;,        &quot;comment&quot;: &quot;不错不错&quot;,        &quot;time&quot;: &quot;2020-10-06 21:16:53&quot;,        &quot;userId&quot;: 1      &#125;,      &#123;        &quot;user&quot;: &#123;          &quot;nickname&quot;: &quot;hello&quot;        &#125;,        &quot;score&quot;: 60,        &quot;id&quot;: 133,        &quot;specName&quot;: &quot;单件&quot;,        &quot;comment&quot;: &quot;很好&quot;,        &quot;time&quot;: &quot;2020-10-07 14:59:00&quot;,        &quot;userId&quot;: 93      &#125;,      &#123;        &quot;user&quot;: &#123;          &quot;nickname&quot;: &quot;55kai&quot;        &#125;,        &quot;score&quot;: 20,        &quot;id&quot;: 134,        &quot;specName&quot;: &quot;单件&quot;,        &quot;comment&quot;: &quot;1&quot;,        &quot;time&quot;: &quot;2020-10-07 15:30:12&quot;,        &quot;userId&quot;: 73      &#125;,      &#123;        &quot;user&quot;: &#123;          &quot;nickname&quot;: &quot;55kai&quot;        &#125;,        &quot;score&quot;: 20,        &quot;id&quot;: 135,        &quot;specName&quot;: &quot;单件&quot;,        &quot;comment&quot;: &quot;2&quot;,        &quot;time&quot;: &quot;2020-10-07 15:30:17&quot;,        &quot;userId&quot;: 73      &#125;,      &#123;        &quot;user&quot;: &#123;          &quot;nickname&quot;: &quot;admin&quot;        &#125;,        &quot;score&quot;: 80,        &quot;id&quot;: 138,        &quot;specName&quot;: &quot;单件&quot;,        &quot;comment&quot;: &quot;好&quot;,        &quot;time&quot;: &quot;2020-10-07 20:50:45&quot;,        &quot;userId&quot;: 1      &#125;    ],    &quot;rate&quot;: 20  &#125;&#125;//没有评价&#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;commentList&quot;:[],&quot;rate&quot;:&quot;NaN&quot;&#125;&#125;//add评价&#123;    &quot;token&quot;: &quot;admin&quot;,    &quot;orderId&quot;: 2035,    &quot;goodsId&quot;: 482,    &quot;goodsDetailId&quot;: 1249,    &quot;content&quot;: &quot;Hello : ) &quot;,    &quot;score&quot;: 80&#125;\n// Demo.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private Data data;&#125;// Data.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Data &#123;    private List&lt;CommentList&gt; commentList;    private long rate;&#125;// CommentList.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class CommentList &#123;    private User user;    private long score;    private long id;    private String specName;    private String comment;    private String time;    private long userID;&#125;// User.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class User &#123;    private String nickname;&#125;//add 评价public class Demo &#123;    private String token;    private long orderID;    private long goodsID;    private long goodsDetailID;    private String content;    private long score;&#125;\n请求 URL: http://localhost:8084/api/mall/goods/searchGoods?keyword=18请求方法: GET    &#123;    &quot;code&quot;: 0,    &quot;data&quot;: [        &#123;            &quot;id&quot;: 483,            &quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1571231123170156699900581320190828212458.jpg&quot;,            &quot;name&quot;: &quot;华为p30&quot;,            &quot;price&quot;: 1000,            &quot;typeId&quot;: 191        &#125;,        &#123;            &quot;id&quot;: 485,            &quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1571231806126156699895929620190828212422.jpg&quot;,            &quot;name&quot;: &quot;真华为P30&quot;,            &quot;price&quot;: 2000,            &quot;typeId&quot;: 191        &#125;    ]&#125;// Demo.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private List&lt;Datum&gt; data;&#125;// Datum.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Datum &#123;    private long id;    private String img;    private String name;    private long price;    private long typeID;&#125;\nUpdate\n\nDelete\n\n代码实现\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n商品详情\n个人中心(order)\ngetOrderByState\nhttp://localhost:8084/api/mall/order/getOrderByState?state=0&amp;token=admin&#123;    &quot;code&quot;: 0,    &quot;data&quot;: [        &#123;            &quot;id&quot;: 2037,            &quot;state&quot;: 3,            &quot;goodsNum&quot;: 1,            &quot;amount&quot;: 1000,            &quot;goodsDetailId&quot;: 1248,            &quot;createtime&quot;: &quot;2020-10-08 08:53:34&quot;,            &quot;hasComment&quot;: true,            &quot;goods&quot;: &#123;                &quot;id&quot;: 482,                &quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1571231038163156699833630520190828211347.jpg&quot;,                &quot;name&quot;: &quot;摄像机&quot;,                &quot;goodsDetailId&quot;: 1248,                &quot;spec&quot;: &quot;型号一&quot;,                &quot;unitPrice&quot;: 1000            &#125;        &#125;,        &#123;            &quot;id&quot;: 2085,            &quot;state&quot;: 1,            &quot;goodsNum&quot;: 1,            &quot;amount&quot;: 200,            &quot;goodsDetailId&quot;: 1245,            &quot;createtime&quot;: &quot;2020-10-08 11:23:56&quot;,            &quot;hasComment&quot;: false,            &quot;goods&quot;: &#123;                &quot;id&quot;: 481,                &quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1571230945079156699823447120190828211623.jpg&quot;,                &quot;name&quot;: &quot;组合音响&quot;,                &quot;goodsDetailId&quot;: 1245,                &quot;spec&quot;: &quot;单件&quot;,                &quot;unitPrice&quot;: 200            &#125;        &#125;,        &#123;            &quot;id&quot;: 2086,            &quot;state&quot;: 1,            &quot;goodsNum&quot;: 3,            &quot;amount&quot;: 90,            &quot;goodsDetailId&quot;: 1268,            &quot;createtime&quot;: &quot;2020-10-08 11:24:07&quot;,            &quot;hasComment&quot;: false,            &quot;goods&quot;: &#123;                &quot;id&quot;: 489,                &quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/15712322839761567589634340Banana.jpg&quot;,                &quot;name&quot;: &quot;香蕉&quot;,                &quot;goodsDetailId&quot;: 1268,                &quot;spec&quot;: &quot;10KG&quot;,                &quot;unitPrice&quot;: 30            &#125;        &#125;,        &#123;            &quot;id&quot;: 2089,            &quot;state&quot;: 0,            &quot;goodsNum&quot;: 1,            &quot;amount&quot;: 1200,            &quot;goodsDetailId&quot;: 1251,            &quot;createtime&quot;: &quot;2020-10-08 11:24:24&quot;,            &quot;hasComment&quot;: false,            &quot;goods&quot;: &#123;                &quot;id&quot;: 483,                &quot;img&quot;: &quot;http://115.29.141.32:8084/static/image/1571231123170156699900581320190828212458.jpg&quot;,                &quot;name&quot;: &quot;华为p30&quot;,                &quot;goodsDetailId&quot;: 1251,                &quot;spec&quot;: &quot;256G&quot;,                &quot;unitPrice&quot;: 1200            &#125;        &#125;    ]&#125;\n// Demo.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private List&lt;Datum&gt; data;&#125;// Datum.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Datum &#123;    private long id;    private long state;    private long goodsNum;    private long amount;    private long goodsDetailID;    private String createtime;    private boolean hasComment;    private Goods goods;&#125;// Goods.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Goods &#123;    private long id;    private String img;    private String name;    private long goodsDetailID;    private String spec;    private long unitPrice;&#125;\naddOrder\nhttp://localhost:8084/api/mall/order/addOrder&#123;    &quot;token&quot;: &quot;admin&quot;,    &quot;goodsDetailId&quot;: 50,    &quot;num&quot;: 1,    &quot;state&quot;: 1,    &quot;amount&quot;: 1&#125;&#123;&quot;code&quot;:0&#125;&#123;&quot;code&quot;:1000,&quot;message&quot;:&quot;库存容量不够!&quot;&#125;\nsettleAccounts\n请求 URL: http://localhost:8084/api/mall/order/settleAccounts请求方法: POST&#123;&quot;cartList&quot;:[&#123;&quot;id&quot;:16,&quot;goodsNum&quot;:10,&quot;amount&quot;:20&#125;]&#125;&#123;&quot;code&quot;:0&#125;\npay\n请求 URL: http://localhost:8084/api/mall/order/pay?id=21请求方法: GET\nconfirmReceive\n请求 URL: http://localhost:8084/api/mall/order/confirmReceive?id=13请求方法: GET\ndeleteOrder\n请求 URL: http://localhost:8084/api/mall/order/deleteOrder?id=7请求方法: GET\nsendComment\n请求 URL: http://localhost:8084/api/mall/order/sendComment请求方法: POST    &#123;  &quot;token&quot;: &quot;admin&quot;,  &quot;orderId&quot;: 13,  &quot;goodsId&quot;: 17,  &quot;goodsDetailId&quot;: 56,  &quot;content&quot;: &quot;Good&quot;,  &quot;score&quot;: 80&#125;package io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private String token;    private long orderID;    private long goodsID;    private long goodsDetailID;    private String content;    private long score;&#125;&#123;&quot;code&quot;:0&#125;\n用户模块（user）\n需求分析\nDateBase\n![image-20201005093715092](/Users/wumin/Library/Application Support/typora-user-images/image-20201005093715092.png)\n![image-20201005092851067](/Users/wumin/Library/Application Support/typora-user-images/image-20201005092851067.png)\n\n&#123;&quot;email&quot;:&quot;135799753111@qq.com&quot;,&quot;nickname&quot;:&quot;pikapika&quot;,&quot;pwd&quot;:&quot;Aa`!1234&quot;,&quot;recipient&quot;:&quot;皮卡丘&quot;,&quot;address&quot;:&quot;仙女座星系M18星皮卡丘部落&quot;,&quot;phone&quot;:&quot;130110110&quot;&#125;\nCreate\nsignup\n\tPOST /api/user/signup HTTP/1.1\t\t&#123;\t&quot;email&quot;: &quot;13579975322@qq.com&quot;,\t&quot;nickname&quot;: &quot;pikapikapi&quot;,\t&quot;pwd&quot;: &quot;Aa`!1234&quot;,\t&quot;recipient&quot;: &quot;皮卡丘&quot;,\t&quot;address&quot;: &quot;仙女座星系M18星皮卡丘部落&quot;,\t&quot;phone&quot;: &quot;130110110&quot;\t&#125;//成功&#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;code&quot;:0,&quot;name&quot;:&quot;pikuy&quot;,&quot;token&quot;:&quot;pikuy&quot;&#125;&#125;\t&#123;\t&quot;code&quot;: 0,\t&quot;data&quot;: &#123;\t\t&quot;code&quot;: 0  //??\t\t&quot;name&quot;: &quot;pikapikapi&quot;,\t\t&quot;token&quot;: &quot;pikapikapi&quot;\t&#125;\t&#125;//失败\t&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;用户信息不能为空&quot;&#125;\t&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;账号已存在&quot;&#125;\t&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;昵称已存在&quot;&#125;\t&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;当前系统繁忙&quot;&#125;\t\nlogin\nPOST /api/user/login HTTP/1.1http://localhost:8084/api/mall/user/login&#123;&quot;email&quot;:&quot;13579975311@qq.com&quot;,&quot;pwd&quot;:&quot;Aa`!1234&quot;&#125;&#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;code&quot;:0,&quot;name&quot;:&quot;pipi&quot;,&quot;token&quot;:&quot;pipi&quot;&#125;&#125;//失败&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;登录信息不能为空!&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;账号或密码不正确!&quot;&#125;&#123;&quot;code&quot;:10000,&quot;message&quot;:&quot;当前系统繁忙!&quot;&#125;\nRetrieve\ndata\n请求 URL: http://localhost:8084/api/mall/user/data?token=wsdsz请求方法: GET    &#123;  &quot;code&quot;: 0,  &quot;data&quot;: &#123;    &quot;code&quot;: 0,    &quot;id&quot;: &quot;160&quot;,    &quot;email&quot;: &quot;13579975323@qq.com&quot;,    &quot;nickname&quot;: &quot;apikapu&quot;,    &quot;recipient&quot;: &quot;皮卡丘&quot;,    &quot;address&quot;: &quot;仙女座星系M18星皮卡丘部落&quot;,    &quot;phone&quot;: &quot;130110110&quot;  &#125;&#125;// Demo.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Demo &#123;    private long code;    private Data data;&#125;// Data.javapackage io.quicktype;import java.util.*;import lombok.Data;@Datapublic class Data &#123;    private long code;    private String id;    private String email;    private String nickname;    private String recipient;    private String address;    private String phone;&#125;\nUpdate\nlogoutClient\n请求 URL: http://localhost:8084/api/mall/user/logoutClient请求方法: POST    \nDelete\n\n代码实现\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n购物车\n权限验证\n参考代码\norigin=http://loocalhost:8085request.getMethod().equalsIgnoreCase(&quot;OPTIONS&quot;)    // 判断是否是登录  auth(request)         request.getSession().getAttribute(&quot;email&quot;);\n?\n管理员账号&amp;用户管理\n\n\nCharles 抓 http://localhost/ 的包？\n\n\nCharles 保存抓包记录？\n\n\nisEmpty( )\n\n\npublic boolean isEmpty() &#123;\n        if(StringUtils.isEmpty(this.email) || StringUtils.isEmpty(this.pwd))&#123;\n            return true;\n        &#125;\n        return false;\n&#125;\n-  ~~gson json字符串---&gt;Java 对象~~  - &#96;&#96;&#96;java    Gson gson &#x3D; new Gson();        AdminLoginBO loginBO &#x3D; gson.fromJson(requestBody, AdminLoginBO.class);\n\n\n\n\n\nSQL DButils\n\n\nQueryRunner runner = new QueryRunner(DruidUtils.getDataSource());\n- ~~Code &#x3D;&#x3D; 0~~  - &#96;&#96;&#96;java    &#123;&quot;code&quot;:0,&quot;data&quot;:&#123;&quot;token&quot;:&quot;admin&quot;,&quot;name&quot;:&quot;admin&quot;&#125;&#125;        ----&gt;          HashMap&lt;String, Object&gt; map &#x3D; new HashMap&lt;&gt;();    map.put(&quot;token&quot;, loginBO.getEmail());    map.put(&quot;name&quot;, loginBO.getEmail());\n\n\n\n\n\n商品管理\n\n数据库 int… 类型长度 ? 设置长度没有意义\n\n![image-20201004150215173](/Users/wumin/Library/Application Support/typora-user-images/image-20201004150215173.png)\n\n\n? 校验什么？ 校验 typeId 是否是数字\n![image-20201004150548284](/Users/wumin/Library/Application Support/typora-user-images/image-20201004150548284.png)\n\nFileuploadutils ???\n\n注释\n\n![image-20201004152911283](/Users/wumin/Library/Application Support/typora-user-images/image-20201004152911283.png)\n\n\napplication.properties\n![image-20201004155841484](/Users/wumin/Library/Application Support/typora-user-images/image-20201004155841484.png)\nselect_last_insert id()  #SQL ???\naddGoods, updateGoods, addSpec 处理解析异常 ?\n\n![image-20201006095603409](/Users/wumin/Library/Application Support/typora-user-images/image-20201006095603409.png)\n\n\nSQL 批处理 ???\n\n订单管理\n\n\n处理非法 isValid ?\n\n\ngoodsdetailId 规格id   ?\n\n\n权限验证\n商城模块\n\n\n\n![image-20201007102001736](/Users/wumin/Library/Application Support/typora-user-images/image-20201007102001736.png)\n\n\n\n\n![image-20201007102617592](/Users/wumin/Library/Application Support/typora-user-images/image-20201007102617592.png)\n\n\n\nMark\n\nvo&amp;bo\n\nvo：封装📦展现给前端的 java 对象，用作中间处理\nbo：封装📦从前端获取的 java 对象，用作中间处理\n\n\n\n\n项目迭代\n先实现主要功能，推出**“能用即可”**的产品，再根据初期用户反馈快速迭代！\n管理员账号&amp;用户管理\n密码储存 SHA-2 散列（加盐）\n注册 登录 修改 加入正则验证\n![image-20201008102128136](/Users/wumin/Library/Application Support/typora-user-images/image-20201008102128136.png)\n用户ID列删除后会出现断层\n![image-20200930084722876](/Users/wumin/Library/Application Support/typora-user-images/image-20200930084722876.png)\n✅禁止删除当前登录的账号\n✅修改当前用户密码需要注销重新登录\n有 bug  updateAdminss 接口修改的是用户名/昵称的时候也会注销 😂\n商品管理\n编辑商品信息返回 默认跳转到第一个类目 #前端相关\n✅删除类目后该类目下商品移至默认类目\n订单管理\nUpdatetme #前端相关\n✅ 增加一个订单回收站功能，在回收站可彻底删除\n商城模块\n用户信息修改 &amp; 评论 &amp; 后台管理的留言回复 显示头像\n![image-20201008111723949](/Users/wumin/Library/Application Support/typora-user-images/image-20201008111723949.png)\n注册根据用户名生成头像\n购物车下单逻辑\n购物车删除逻辑\nXXXXX\n需求分析\nDateBase\n\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n参考代码\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n代码实现\nCreate\n\nRetrieve\n\nUpdate\n\nDelete\n\n\n✅ updatetime\n✅密码 SHA-256 散列\n✅头像自动生成 API\n购物车 下单逻辑\n图片识别 API\n购物车 删除订单逻辑\n弹窗样式\n","plink":"https://gardenZzz.github.io/2020/382317/Project-01/"},{"title":"about","date":"2020-11-28T18:37:10.000Z","date_formatted":{"ll":"Nov 28, 2020","L":"11/28/2020","MM-DD":"11-28"},"updated":"2020-11-28T10:37:10.746Z","content":"","plink":"https://gardenZzz.github.io/about/"}]