<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<title>Project03_GpMall - gardenZzz'Blog</title>
<base href="/">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<link rel="canonical" href="https://gardenzzz.github.io/2020/222029/Project-03/">
<link rel="icon" type="image/x-icon" href="/img/favicon.jpg">
<link rel="manifest" href="/manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="description" content="基于开源项目 gpmall 前端部分的微服务架构的高并发商城。具体实现了项目中用户模块、商品模块、订单模块、支付 模块，增加了秒杀模块的业务。">
<meta property="og:type" content="website">
<meta property="og:title" content="Project03_GpMall">
<meta property="og:url" content="https://gardenzzz.github.io/2020/222029/Project-03/index.html">
<meta property="og:site_name" content="gardenZzz'Blog">
<meta property="og:description" content="基于开源项目 gpmall 前端部分的微服务架构的高并发商城。具体实现了项目中用户模块、商品模块、订单模块、支付 模块，增加了秒杀模块的业务。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://gardenzzz.github.io/2020/222029/Project-03/img/avatar.jpg">
<meta property="article:published_time" content="2020-11-06T20:22:29.000Z">
<meta property="article:modified_time" content="2020-12-07T15:52:30.373Z">
<meta property="article:author" content="Garden X">
<meta property="article:tag" content="微服务">
<meta property="article:tag" content="分布式">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gardenzzz.github.io/2020/222029/Project-03/img/avatar.jpg">
<script type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","publisher":{"@type":"Person","name":"Garden X","description":"ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀🍀｀ヽヽ｀ヽ、ヽ｀ヽ｀、ヽ｀、ヽ 、｀｀、 ｀、ヽ｀ 、｀ ヽ｀ヽ、ヽ ｀、ヽ｀｀、ヽ、｀｀、｀、ヽ｀｀、 、ヽ｀、｀、、ヽヽ、｀｀、 、 ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀ヽ、｀ヽ｀、、｀ヽ｀、ヽ、🚶｀｀、ヽ｀｀ヽ、｀","image":"https://gardenzzz.github.io/img/avatar.jpg"},"url":"https://gardenZzz.github.io","image":"https://gardenzzz.github.io/img/avatar.jpg","description":"Interesting Stuff","author":{"@type":"Person","name":"Garden X","description":"ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀🍀｀ヽヽ｀ヽ、ヽ｀ヽ｀、ヽ｀、ヽ 、｀｀、 ｀、ヽ｀ 、｀ ヽ｀ヽ、ヽ ｀、ヽ｀｀、ヽ、｀｀、｀、ヽ｀｀、 、ヽ｀、｀、、ヽヽ、｀｀、 、 ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀ヽ、｀ヽ｀、、｀ヽ｀、ヽ、🚶｀｀、ヽ｀｀ヽ、｀","image":"https://gardenzzz.github.io/img/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"}},{"@context":"http://schema.org","@type":"Article","articleSection":"项目","url":"https://gardenzzz.github.io/2020/220429/Project-03/","headline":"Project03_GpMall","image":"https://gardenzzz.github.io/img/avatar.jpg","datePublished":"2020-11-06T20:22:29.000Z","dateModified":"2020-12-07T15:52:30.373Z","keywords":"微服务,分布式,Java,Spring","description":"基于开源项目 gpmall 前端部分的微服务架构的高并发商城。具体实现了项目中用户模块、商品模块、订单模块、支付\n模块，增加了秒杀模块的业务。","publisher":{"@type":"Organization","name":"gardenZzz'Blog","logo":{"@type":"ImageObject","url":"https://gardenzzz.github.io/img/avatar.jpg"}},"author":{"@type":"Person","name":"Garden X","description":"ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀🍀｀ヽヽ｀ヽ、ヽ｀ヽ｀、ヽ｀、ヽ 、｀｀、 ｀、ヽ｀ 、｀ ヽ｀ヽ、ヽ ｀、ヽ｀｀、ヽ、｀｀、｀、ヽ｀｀、 、ヽ｀、｀、、ヽヽ、｀｀、 、 ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀ヽ、｀ヽ｀、、｀ヽ｀、ヽ、🚶｀｀、ヽ｀｀ヽ、｀","image":"https://gardenzzz.github.io/img/avatar.jpg"},"inLanguage":{"@type":"Language","alternateName":"en"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://gardenzzz.github.io/2020/220429/Project-03/"}}]</script><link rel="alternate" type="application/atom+xml" title="gardenZzz'Blog" href="/atom.xml">
<script async="" src="//www.googletagmanager.com/gtag/js?id=G-HLN09S22B7"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','G-HLN09S22B7');</script>
<!-- hexo injector head_end start --><style is="theme">html{--inside-accent-color:#80989b;--inside-foreground-color:#363636;--inside-border-color:#e0e0e0;--inside-background:#f3f6f7;--inside-sidebar-background:#607d8b linear-gradient(to bottom,#607d8b 0%,#26323b 100%);--inside-card-background:#fff;--inside-font-base:'Josefin Sans','PingFang SC',Microsoft YaHei;--inside-font-logo:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;--inside-font-menu:Source Code Pro,'Josefin Sans','PingFang SC',Microsoft YaHei;--inside-font-heading:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;--inside-font-label:Montserrat,'Josefin Sans','PingFang SC',Microsoft YaHei;--inside-font-code:Inconsolata,monospace;--inside-font-print:-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;--inside-content-width:720px;--inside-highlight-00:#f8f8f8;--inside-highlight-01:#e8e8e8;--inside-highlight-02:#d8d8d8;--inside-highlight-03:#b8b8b8;--inside-highlight-04:#585858;--inside-highlight-05:#383838;--inside-highlight-06:#282828;--inside-highlight-07:#181818;--inside-highlight-08:#ab4642;--inside-highlight-09:#dc9656;--inside-highlight-0a:#f7ca88;--inside-highlight-0b:#a1b56c;--inside-highlight-0c:#86c1b9;--inside-highlight-0d:#7cafc2;--inside-highlight-0e:#ba8baf;--inside-highlight-0f:#a16946;--inside-card-color:#fff;--inside-accent-color-005:rgba(128,152,155,.05);--inside-accent-color-01:rgba(128,152,155,.1);--inside-accent-color-02:rgba(128,152,155,.2);--inside-accent-color-04:rgba(128,152,155,.4);--inside-accent-color-08:rgba(128,152,155,.8)}</style><link href="//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat|Source+Code+Pro" rel="stylesheet"><script src="/js/theme.js"></script><link href="styles.2468167679d87ac17ba2.css" rel="stylesheet">
<script src="/config.0784cae46a7b7fcd9134.js"></script>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"><meta name="theme-color" content=""><script type="application/json" is="state">{&q;api/MjAyMC8yMjIwMjkvUHJvamVjdC0wMw.json&q;:{&q;title&q;:&q;Project03_GpMall&q;,&q;date&q;:&q;2020-11-06T20:22:29.000Z&q;,&q;date_formatted&q;:{&q;ll&q;:&q;Nov 6, 2020&q;,&q;L&q;:&q;11/06/2020&q;,&q;MM-DD&q;:&q;11-06&q;},&q;link&q;:&q;2020/222029/Project-03&q;,&q;comments&q;:true,&q;tags&q;:[&q;Java&q;,&q;Spring&q;,&q;分布式&q;,&q;微服务&q;],&q;categories&q;:[&q;项目&q;],&q;updated&q;:&q;2020-12-07T15:52:30.373Z&q;,&q;content&q;:&q;&l;p&g;基于开源项目 &l;a href=\&q;https://github.com/2227324689/gpmall\&q; target=\&q;_blank\&q;&g;gpmall&l;/a&g; 前端部分的微服务架构的高并发商城。具体实现了项目中用户模块、商品模块、订单模块、支付&l;br&g;\n模块，增加了秒杀模块的业务。&l;/p&g;\n&l;a id=\&q;more\&q;&g;&l;/a&g;\n&l;p&g;项目划分：&l;/p&g;\n&l;div class=\&q;φbt\&q;&g;&l;div class=\&q;φbv\&q;&g;&l;table&g;&l;thead&g;\n&l;tr&g;\n&l;th style=\&q;padding:0\&q;&g;&l;/th&g;\n&l;th style=\&q;padding:0\&q;&g;&l;/th&g;\n&l;th style=\&q;padding:0\&q;&g;&l;/th&g;\n&l;/tr&g;\n&l;/thead&g;\n&l;tbody&g;\n&l;tr&g;\n&l;td&g;db_script 本项目的数据库脚本&l;/td&g;\n&l;td&g;使用mysql&l;/td&g;\n&l;td&g;暂时未做分表处理，不过有考虑到分表的情况&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;gpmall-cashier 收银台，负责支付相关的交互逻辑&l;/td&g;\n&l;td&g;web项目&l;/td&g;\n&l;td&g;8083端口&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;gpmall-commons 公共的组件&l;/td&g;\n&l;td&g;jar&l;/td&g;\n&l;td&g;公共组件，很多地方都有引用，改动的时候要注意&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;gpmall-front 咕泡商城的前端项目&l;/td&g;\n&l;td&g;前端项目&l;/td&g;\n&l;td&g;使用vue、node、es等前端技术开发&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;gpmall-parent 父控文件，用来统一管理所有jar包&l;/td&g;\n&l;td&g;父控文件&l;/td&g;\n&l;td&g;用来统一管理所有项目的jar包的版本&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;gpmall-shopping 商品/购物车/首页渲染等交互&l;/td&g;\n&l;td&g;web项目&l;/td&g;\n&l;td&g;8081端口&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;gpmall-user 提供用户相关的交互，如登录、注册、个人中心等&l;/td&g;\n&l;td&g;web项目&l;/td&g;\n&l;td&g;8082端口&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;market-service 促销活动的Dubbo服务【暂时未联调完成，可以不启动】&l;/td&g;\n&l;td&g;dubbo服务&l;/td&g;\n&l;td&g;20884端口&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;pay-service 提供支付处理能力&l;/td&g;\n&l;td&g;dubbo服务&l;/td&g;\n&l;td&g;20883端口&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;shopping-service，提供购物车、推荐商品、商品等服务&l;/td&g;\n&l;td&g;dubbo服务&l;/td&g;\n&l;td&g;20881端口&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;user-service ，提供用户相关服务&l;/td&g;\n&l;td&g;dubbo服务&l;/td&g;\n&l;td&g;20880端口&l;/td&g;\n&l;/tr&g;\n&l;tr&g;\n&l;td&g;order-service ，提供订单服务&l;/td&g;\n&l;td&g;dubbo服务&l;/td&g;\n&l;td&g;20882端口&l;/td&g;\n&l;/tr&g;\n&l;/tbody&g;\n&l;/table&g;&l;/div&g;&l;/div&g;&l;h2 id=\&q;user-模块\&q;&g;user 模块&l;a title=\&q;#user-模块\&q; href=\&q;#user-模块\&q;&g;&l;/a&g;&l;/h2&g;\n&l;h3 id=\&q;用户模块（/user）\&q;&g;用户模块（/user）&l;a title=\&q;#用户模块（/user）\&q; href=\&q;#用户模块（/user）\&q;&g;&l;/a&g;&l;/h3&g;\n&l;h4 id=\&q;✅注册激活（/verify）\&q;&g;✅注册激活（/verify）&l;a title=\&q;#✅注册激活（/verify）\&q; href=\&q;#✅注册激活（/verify）\&q;&g;&l;/a&g;&l;/h4&g;\n&l;p&g;​\t&l;strong&g;入参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;uid\t\t\t\t\t\tString\t\t\t\t\t激活id&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;username\t\t\t\tString\t\t\t\t\t用户名&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;请求路径：/user/verify&l;/p&g;\n&l;p&g;是否需要携带Token：否&l;/p&g;\n&l;p&g;请求类型：get&l;/p&g;\n&l;p&g;请求路径示例：&l;/p&g;\n&l;p&g;&l;a href=\&q;http://localhost:8080/user/verify?uid=xxx&a;amp;username=xxx\&q;&g;http://localhost:8080/user/verify?uid=xxx&a;amp;username=xxx&l;/a&g;&l;/p&g;\n&l;p&g;&l;strong&g;出参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;success\t\t\t\t\tboolean\t\t\t\t成功标记&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;message\t\t\t\t\tString\t\t\t\t具体信息&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;code\t\t\t\t\t\tInteger\t\t\t\t状态码&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;result\t\t\t\t\tString(JSON)\t具体数据&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;timestamp\t\t\t\tLong\t\t\t\t\t时间戳&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;返回参数示例：&l;/p&g;\n&l;figure class=\&q;highlight json\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&a;#123;&l;span class=\&q;attr\&q;&g;&a;quot;success&a;quot;&l;/span&g;:&l;span class=\&q;literal\&q;&g;true&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;message&a;quot;&l;/span&g;:&l;span class=\&q;string\&q;&g;&a;quot;success&a;quot;&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;code&a;quot;&l;/span&g;:&l;span class=\&q;number\&q;&g;200&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;result&a;quot;&l;/span&g;:&l;span class=\&q;literal\&q;&g;null&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;timestamp&a;quot;&l;/span&g;:&l;span class=\&q;number\&q;&g;1587710244802&l;/span&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h2 id=\&q;shopping-模块\&q;&g;Shopping 模块&l;a title=\&q;#shopping-模块\&q; href=\&q;#shopping-模块\&q;&g;&l;/a&g;&l;/h2&g;\n&l;h3 id=\&q;商品模块\&q;&g;商品模块&l;a title=\&q;#商品模块\&q; href=\&q;#商品模块\&q;&g;&l;/a&g;&l;/h3&g;\n&l;h4 id=\&q;✅获得购物车列表（/carts）\&q;&g;✅获得购物车列表（/carts）&l;a title=\&q;#✅获得购物车列表（/carts）\&q; href=\&q;#✅获得购物车列表（/carts）\&q;&g;&l;/a&g;&l;/h4&g;\n&l;h5 id=\&q;接口文档\&q;&g;接口文档&l;a title=\&q;#接口文档\&q; href=\&q;#接口文档\&q;&g;&l;/a&g;&l;/h5&g;\n&l;p&g;&l;strong&g;入参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;无&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;请求路径：/shopping/carts&l;/p&g;\n&l;p&g;是否需要携带Token：是&l;/p&g;\n&l;p&g;请求类型：get&l;/p&g;\n&l;p&g;请求参数示例：无&l;/p&g;\n&l;p&g;&l;strong&g;出参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;success\t\t\t\t\tboolean\t\t\t\t成功标记&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;message\t\t\t\t\tString\t\t\t\t具体信息&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;code\t\t\t\t\t\tInteger\t\t\t\t状态码&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;result\t\t\t\t\tString(JSON)\t具体数据&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;timestamp\t\t\t\tLong\t\t\t\t\t时间戳&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;返回参数示例：&l;/p&g;\n&l;figure class=\&q;highlight json\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;span class=\&q;attr\&q;&g;&a;quot;success&a;quot;&l;/span&g;: &l;span class=\&q;literal\&q;&g;true&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;span class=\&q;attr\&q;&g;&a;quot;message&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;success&a;quot;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;span class=\&q;attr\&q;&g;&a;quot;code&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;200&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;span class=\&q;attr\&q;&g;&a;quot;result&a;quot;&l;/span&g;: [&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productId&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;100040607&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;salePrice&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;2999&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productNum&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;100&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;limitNum&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;100&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;checked&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;true&a;quot;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productName&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;坚果 3&a;quot;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productImg&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;https://resource.smartisan.com/resource/13e91511f6ba3227ca5378fd2e93c54b.png&a;quot;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productId&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;100040501&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;salePrice&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;2999&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productNum&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;1&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;limitNum&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;100&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;checked&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;false&a;quot;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productName&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;畅呼吸智能空气净化器 · 超级除甲醛版&a;quot;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productImg&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;https://resource.smartisan.com/resource/71432ad30288fb860a4389881069b874.png&a;quot;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productId&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;100039702&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;salePrice&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;1&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productNum&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;1&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;limitNum&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;100&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;checked&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;true&a;quot;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productName&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;Smartisan 帆布鞋&a;quot;&l;/span&g;,&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      &l;span class=\&q;attr\&q;&g;&a;quot;productImg&a;quot;&l;/span&g;: &l;span class=\&q;string\&q;&g;&a;quot;https://resource.smartisan.com/resource/578116bddf1d170c89e9af7ba5073fb6.jpg&a;quot;&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  ],&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;span class=\&q;attr\&q;&g;&a;quot;timestamp&a;quot;&l;/span&g;: &l;span class=\&q;number\&q;&g;1605518470998&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h5 id=\&q;参考代码\&q;&g;参考代码&l;a title=\&q;#参考代码\&q; href=\&q;#参考代码\&q;&g;&l;/a&g;&l;/h5&g;\n&l;h6 id=\&q;provider\&q;&g;Provider&l;a title=\&q;#provider\&q; href=\&q;#provider\&q;&g;&l;/a&g;&l;/h6&g;\n&l;figure class=\&q;highlight java\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;@Slf4j&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;@RestController&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;@RequestMapping(&a;quot;/shopping&a;quot;)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;@Api(tags = &a;quot;AddressController&a;quot;, description = &a;quot;地址控制层&a;quot;)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;class\&q;&g;&l;span class=\&q;keyword\&q;&g;class&l;/span&g; &l;span class=\&q;title\&q;&g;AddressController&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  &l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;   &l;span class=\&q;meta\&q;&g;@Reference(timeout = 3000,check = false)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    IAddressService addressService;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@ApiOperation(&a;quot;添加地址&a;quot;)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@PostMapping(&a;quot;/addresses&a;quot;)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@ApiImplicitParam(name = &a;quot;form&a;quot;, value = &a;quot;地址信息&a;quot;, dataType = &a;quot;AddressForm&a;quot;, required = true)&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; ResponseData &l;span class=\&q;title\&q;&g;addressAdd&l;/span&g;&l;span class=\&q;params\&q;&g;(&l;span class=\&q;meta\&q;&g;@RequestBody&l;/span&g; AddressForm form, HttpServletRequest servletRequest)&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        log.debug(form.is_Default()+&l;span class=\&q;string\&q;&g;&a;quot;&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        log.debug(form.toString());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        AddAddressRequest request = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; AddAddressRequest();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        String userInfo = (String) servletRequest.getAttribute(TokenIntercepter.USER_INFO_KEY);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        JSONObject object = JSON.parseObject(userInfo);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        Long uid = Long.parseLong(object.get(&l;span class=\&q;string\&q;&g;&a;quot;uid&a;quot;&l;/span&g;).toString());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        request.setUserId(uid);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        request.setUserName(form.getUserName());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        request.setStreetName(form.getStreetName());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        request.setTel(form.getTel());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        request.setIsDefault(form.is_Default() ? &l;span class=\&q;number\&q;&g;1&l;/span&g; : &l;span class=\&q;keyword\&q;&g;null&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        AddAddressResponse response = addressService.createAddress(request);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;if&l;/span&g; (response.getCode().equals(ShoppingRetCode.SUCCESS.getCode())) &a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;            &l;span class=\&q;keyword\&q;&g;return&l;/span&g; &l;span class=\&q;keyword\&q;&g;new&l;/span&g; ResponseUtil().setData(response.getMsg());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; &l;span class=\&q;keyword\&q;&g;new&l;/span&g; ResponseUtil().setErrorMsg(response.getMsg());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h6 id=\&q;consumer\&q;&g;Consumer&l;a title=\&q;#consumer\&q; href=\&q;#consumer\&q;&g;&l;/a&g;&l;/h6&g;\n&l;figure class=\&q;highlight java\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;@Service(interfaceClass = IProductService.class)&l;/span&g;&l;span class=\&q;comment\&q;&g;//指定接口&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;meta\&q;&g;@Component&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;class\&q;&g;&l;span class=\&q;keyword\&q;&g;class&l;/span&g; &l;span class=\&q;title\&q;&g;IProductServiceImpl&l;/span&g; &l;span class=\&q;keyword\&q;&g;implements&l;/span&g; &l;span class=\&q;title\&q;&g;IProductService&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Autowired&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    ItemMapper itemMapper;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Override&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; ProductDetailResponse &l;span class=\&q;title\&q;&g;getProductDetail&l;/span&g;&l;span class=\&q;params\&q;&g;(ProductDetailRequest request)&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        ProductDetailResponse productDetailResponse = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; ProductDetailResponse();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;comment\&q;&g;// 参数基础检查&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        request.requestCheck();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        Long productId = request.getId();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        Item item = itemMapper.selectByPrimaryKey(productId);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        ProductDetailDto productDetailDto = &l;span class=\&q;keyword\&q;&g;new&l;/span&g; ProductDetailDto();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        productDetailDto.setProductId(item.getId());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        productDetailDto.setSubTitle(item.getTitle());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        productDetailDto.setSalePrice(item.getPrice());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        productDetailResponse.setProductDetailDto(productDetailDto);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        productDetailResponse.setCode(ShoppingRetCode.SUCCESS.getCode());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        productDetailResponse.setMsg(ShoppingRetCode.SUCCESS.getMessage());&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;keyword\&q;&g;return&l;/span&g; productDetailResponse;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h5 id=\&q;redis-相关\&q;&g;Redis 相关&l;a title=\&q;#redis-相关\&q; href=\&q;#redis-相关\&q;&g;&l;/a&g;&l;/h5&g;\n&l;p&g;List&a;lt;Product&a;gt; list&l;/p&g;\n&l;p&g;key -----&a;gt; cart_intem 85 cart_intem 86 HKEYS&l;/p&g;\n&l;ol&g;\n&l;li&g;\n&l;p&g;把 List 转化为JSONSonstring&l;/p&g;\n&l;/li&g;\n&l;li&g;\n&l;p&g;使用 Hash&l;/p&g;\n&l;p&g;key: userId&l;/p&g;\n&l;p&g;field1: porductId&l;/p&g;\n&l;p&g;value1: 购物车里面商品的对象 Cartproductdt&l;/p&g;\n&l;p&g;field2: porductId&l;/p&g;\n&l;p&g;value2: 购物车里面商品的对象 Cartproductdt&l;/p&g;\n&l;figure class=\&q;highlight java\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;class\&q;&g;&l;span class=\&q;keyword\&q;&g;class&l;/span&g; &l;span class=\&q;title\&q;&g;RedissonTest&l;/span&g; &l;span class=\&q;keyword\&q;&g;extends&l;/span&g; &l;span class=\&q;title\&q;&g;RedissonDemoApplicationTests&l;/span&g; &l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;  \t&l;span class=\&q;comment\&q;&g;//注入 redissonClient&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Autowired&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    RedissonClient redissonClient;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Test&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;test01&l;/span&g;&l;span class=\&q;params\&q;&g;()&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;\t\t\t\t&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;      \t&l;span class=\&q;comment\&q;&g;//使用 redissonClient&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        RBucket&a;lt;Object&a;gt; bucket = redissonClient.getBucket(&l;span class=\&q;string\&q;&g;&a;quot;liushifu&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        bucket.set(&l;span class=\&q;string\&q;&g;&a;quot;shai&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Test&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;test02&l;/span&g;&l;span class=\&q;params\&q;&g;()&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        RBucket&a;lt;Object&a;gt; bucket = redissonClient.getBucket(&l;span class=\&q;string\&q;&g;&a;quot;liushifu&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        String val = (String) bucket.get();&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        System.out.println(val);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Test&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;test03&l;/span&g;&l;span class=\&q;params\&q;&g;()&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        RMap&a;lt;Object, Object&a;gt; rMap = redissonClient.getMap(&l;span class=\&q;string\&q;&g;&a;quot;ligenli&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        rMap.put(&l;span class=\&q;string\&q;&g;&a;quot;weight&a;quot;&l;/span&g;,&l;span class=\&q;string\&q;&g;&a;quot;130&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Test&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;test04&l;/span&g;&l;span class=\&q;params\&q;&g;()&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        RMap&a;lt;Object, Object&a;gt; rMap = redissonClient.getMap(&l;span class=\&q;string\&q;&g;&a;quot;ligenli&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        &l;span class=\&q;comment\&q;&g;// hget&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        String weight = (String) rMap.get(&l;span class=\&q;string\&q;&g;&a;quot;weight&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        System.out.println(weight);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;meta\&q;&g;@Test&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &l;span class=\&q;function\&q;&g;&l;span class=\&q;keyword\&q;&g;public&l;/span&g; &l;span class=\&q;keyword\&q;&g;void&l;/span&g; &l;span class=\&q;title\&q;&g;test05&l;/span&g;&l;span class=\&q;params\&q;&g;()&l;/span&g;&l;/span&g;&a;#123;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;        RDeque&a;lt;Object&a;gt; rDeque = redissonClient.getDeque(&l;span class=\&q;string\&q;&g;&a;quot;mylist&a;quot;&l;/span&g;);&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;//        rDeque.addFirst();&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;span class=\&q;comment\&q;&g;//        rDeque.addLast();&l;/span&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;    &a;#125;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;/li&g;\n&l;/ol&g;\n&l;h4 id=\&q;✅删除购物车中的商品（/carts/{uid}/{pid}）\&q;&g;✅删除购物车中的商品（/carts/{uid}/{pid}）&l;a title=\&q;#✅删除购物车中的商品（/carts/{uid}/{pid}）\&q; href=\&q;#✅删除购物车中的商品（/carts/{uid}/{pid}）\&q;&g;&l;/a&g;&l;/h4&g;\n&l;p&g;&l;strong&g;入参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;uid\t\t\t\t\t\tlong\t\t\t\t\t\t用户id&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;pid\t\t\t\t\t\tlong\t\t\t\t\t\t商品ID&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;请求路径：/shopping/carts/{uid}/{pid}&l;/p&g;\n&l;p&g;是否需要携带Token：是&l;/p&g;\n&l;p&g;请求类型：delete&l;/p&g;\n&l;p&g;请求参数示例：无&l;/p&g;\n&l;p&g;&l;strong&g;出参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;success\t\t\t\t\tboolean\t\t\t\t成功标记&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;message\t\t\t\t\tString\t\t\t\t具体信息&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;code\t\t\t\t\t\tInteger\t\t\t\t状态码&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;result\t\t\t\t\tString(JSON)\t具体数据&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;timestamp\t\t\t\tLong\t\t\t\t\t时间戳&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;返回参数示例：&l;/p&g;\n&l;figure class=\&q;highlight json\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&a;#123;&l;span class=\&q;attr\&q;&g;&a;quot;success&a;quot;&l;/span&g;:&l;span class=\&q;literal\&q;&g;true&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;message&a;quot;&l;/span&g;:&l;span class=\&q;string\&q;&g;&a;quot;success&a;quot;&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;code&a;quot;&l;/span&g;:&l;span class=\&q;number\&q;&g;200&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;result&a;quot;&l;/span&g;:&l;span class=\&q;string\&q;&g;&a;quot;成功&a;quot;&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;timestamp&a;quot;&l;/span&g;:&l;span class=\&q;number\&q;&g;1587794411224&l;/span&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h3 id=\&q;订单模块\&q;&g;订单模块&l;a title=\&q;#订单模块\&q; href=\&q;#订单模块\&q;&g;&l;/a&g;&l;/h3&g;\n&l;h4 id=\&q;✅取消订单（cancelorder）\&q;&g;✅取消订单（cancelOrder）&l;a title=\&q;#✅取消订单（cancelorder）\&q; href=\&q;#✅取消订单（cancelorder）\&q;&g;&l;/a&g;&l;/h4&g;\n&l;p&g;&l;strong&g;入参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;id\t\t\t\t\t\tLong\t\t\t\t\t订单id&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;请求路径：/shopping/cancelOrder&l;/p&g;\n&l;p&g;是否需要携带Token：是&l;/p&g;\n&l;p&g;请求类型：post&l;/p&g;\n&l;p&g;请求参数示例：&l;/p&g;\n&l;p&g;{“id”:“1”}&l;/p&g;\n&l;p&g;&l;strong&g;出参&l;/strong&g;\t\t\t\t\t\t&l;strong&g;类型&l;/strong&g;\t\t\t\t\t\t&l;strong&g;含义&l;/strong&g;&l;/p&g;\n&l;figure class=\&q;highlight xml\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;success\t\t\t\t\tboolean\t\t\t\t成功标记&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;message\t\t\t\t\tString\t\t\t\t具体信息&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;code\t\t\t\t\t\tInteger\t\t\t\t状态码&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;result\t\t\t\t\tString(JSON)\t具体数据&l;/span&g;&l;br&g;&l;span class=\&q;line\&q;&g;timestamp\t\t\t\tLong\t\t\t\t\t时间戳&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;p&g;&l;strong&g;数据库&l;/strong&g;&l;/p&g;\n&l;p&g;更新表 tb_order&l;/p&g;\n&l;p&g;![image-20201117092949558](/Users/wumin/Library/Application Support/typora-user-images/image-20201117092949558.png)&l;/p&g;\n&l;p&g;tb_order_item&l;/p&g;\n&l;p&g;![image-20201117103928650](/Users/wumin/Library/Application Support/typora-user-images/image-20201117103928650.png)&l;/p&g;\n&l;p&g;返回参数示例：&l;/p&g;\n&l;figure class=\&q;highlight json\&q;&g;&l;table&g;&l;tr&g;&l;td class=\&q;code\&q;&g;&l;pre&g;&l;span class=\&q;line\&q;&g;&a;#123;&l;span class=\&q;attr\&q;&g;&a;quot;success&a;quot;&l;/span&g;:&l;span class=\&q;literal\&q;&g;true&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;message&a;quot;&l;/span&g;:&l;span class=\&q;string\&q;&g;&a;quot;success&a;quot;&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;code&a;quot;&l;/span&g;:&l;span class=\&q;number\&q;&g;200&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;result&a;quot;&l;/span&g;:&l;span class=\&q;string\&q;&g;&a;quot;成功&a;quot;&l;/span&g;,&l;span class=\&q;attr\&q;&g;&a;quot;timestamp&a;quot;&l;/span&g;:&l;span class=\&q;number\&q;&g;1587795935665&l;/span&g;&a;#125;&l;/span&g;&l;br&g;&l;/pre&g;&l;/td&g;&l;/tr&g;&l;/table&g;&l;/figure&g;\n&l;h3 id=\&q;支付模块\&q;&g;支付模块&l;a title=\&q;#支付模块\&q; href=\&q;#支付模块\&q;&g;&l;/a&g;&l;/h3&g;\n&l;h3 id=\&q;秒杀模块\&q;&g;秒杀模块&l;a title=\&q;#秒杀模块\&q; href=\&q;#秒杀模块\&q;&g;&l;/a&g;&l;/h3&g;\n&l;h4 id=\&q;项目结构\&q;&g;项目结构&l;a title=\&q;#项目结构\&q; href=\&q;#项目结构\&q;&g;&l;/a&g;&l;/h4&g;\n&l;img src=\&q;/Users/wumin/Library/Application Support/typora-user-images/image-20201123142328324.png\&q; alt=\&q;image-20201123142328324\&q; style=\&q;zoom:50%;\&q; align=\&q;left\&q;/&g;\n&l;h2 id=\&q;其他\&q;&g;其他&l;a title=\&q;#其他\&q; href=\&q;#其他\&q;&g;&l;/a&g;&l;/h2&g;\n&l;p&g;压测对比结果&l;/p&g;\n&l;p&g;样本1&l;/p&g;\n&l;p&g;![image-20201125201712268](/Users/wumin/Library/Application Support/typora-user-images/image-20201125201712268.png)&l;/p&g;\n&l;p&g;样本2&l;/p&g;\n&l;p&g;![image-20201125202401250](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202401250.png)&l;/p&g;\n&l;p&g;![image-20201125202421028](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202421028.png)&l;/p&g;\n&l;p&g;![image-20201125202440625](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202440625.png)&l;/p&g;\n&l;p&g;样本3&l;/p&g;\n&l;h2 id=\&q;???\&q;&g;???&l;a title=\&q;#???\&q; href=\&q;#???\&q;&g;&l;/a&g;&l;/h2&g;\n&q;,&q;prev&q;:{&q;title&q;:&q;Project03_Tmall&q;,&q;link&q;:&q;2020/491633/Test&q;},&q;next&q;:{&q;title&q;:&q;Project02_LiteMall&q;,&q;link&q;:&q;2020/382324/Project-02&q;},&q;plink&q;:&q;https://gardenZzz.github.io/2020/222029/Project-03/&q;,&q;toc&q;:[{&q;id&q;:&q;user-模块&q;,&q;title&q;:&q;user 模块&q;,&q;index&q;:&q;1&q;,&q;children&q;:[{&q;id&q;:&q;用户模块（/user）&q;,&q;title&q;:&q;用户模块（&a;#x2F;user）&q;,&q;index&q;:&q;1.1&q;}]},{&q;id&q;:&q;shopping-模块&q;,&q;title&q;:&q;Shopping 模块&q;,&q;index&q;:&q;2&q;,&q;children&q;:[{&q;id&q;:&q;商品模块&q;,&q;title&q;:&q;商品模块&q;,&q;index&q;:&q;2.1&q;},{&q;id&q;:&q;订单模块&q;,&q;title&q;:&q;订单模块&q;,&q;index&q;:&q;2.2&q;},{&q;id&q;:&q;支付模块&q;,&q;title&q;:&q;支付模块&q;,&q;index&q;:&q;2.3&q;},{&q;id&q;:&q;秒杀模块&q;,&q;title&q;:&q;秒杀模块&q;,&q;index&q;:&q;2.4&q;}]},{&q;id&q;:&q;其他&q;,&q;title&q;:&q;其他&q;,&q;index&q;:&q;3&q;},{&q;id&q;:&q;???&q;,&q;title&q;:&q;???&q;,&q;index&q;:&q;4&q;}],&q;reward&q;:true,&q;copyright&q;:{&q;author&q;:&q;Garden X&q;,&q;link&q;:&q;&l;a href=\&q;https://gardenZzz.github.io/2020/222029/Project-03/\&q; title=\&q;Project03_GpMall\&q;&g;https://gardenZzz.github.io/2020/222029/Project-03/&l;/a&g;&q;,&q;license&q;:&q;自由转载-非商用-禁止演绎-保持署名 (&l;a href=\&q;https://creativecommons.org/licenses/by-nc-sa/4.0/\&q; rel=\\\&q;external nofollow\\\&q; target=\\\&q;_blank\\\&q;&g;CC BY-NC-ND 4.0&l;/a&g;)&q;},&q;reading_time&q;:&q;1338 words in 9 min&q;}}</script></head>
<body lang="en"><!-- hexo injector body_begin start --><is-a class="φh" ng-version="11.0.2"><is-l class="φcx"><div class="φdh"><section class="φdi"><header class="φcy"><!----><is-c class="φcz"><img draggable="false" class="φr" src="img/avatar.jpg" alt="" title="" width="160" height="160"></is-c><!----><a href="" class="φdb">Garden X</a><p class="φda">ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀🍀｀ヽヽ｀ヽ、ヽ｀ヽ｀、ヽ｀、ヽ 、｀｀、 ｀、ヽ｀ 、｀ ヽ｀ヽ、ヽ ｀、ヽ｀｀、ヽ、｀｀、｀、ヽ｀｀、 、ヽ｀、｀、、ヽヽ、｀｀、 、 ヽ｀、ヽ｀｀、ヽ｀ヽ｀、、ヽ ｀ヽ 、ヽ｀ヽ、｀ヽ｀、、｀ヽ｀、ヽ、🚶｀｀、ヽ｀｀ヽ、｀</p></header><div class="φdm"><a routerlink="/archives" class="φdn" href="/archives"><span>7</span><span>Archives</span></a><a class="φdn" href="/categories/Test"><span>2</span><span>Categories</span></a><!----><a routerlink="/tags" class="φdn" href="/tags"><span>6</span><span>Tags</span></a><!----></div><!----><nav class="φdj"><a class="φdk" href="/">🏠 Home</a><!----><!----><!----><a class="φdk" href="/search">🔍 Search</a><!----><!----><!----><a class="φdk" href="/404">🚷 404</a><!----><!----><!----><a class="φdk" href="/about">👾 About</a><!----><!----><!----><!----></nav><!----><div issnippet="" class="φb"><is-darkmode block=""></is-darkmode><is-palette></is-palette></div><!----><!----><!----></section><footer class="φdc φdd"><div class="φdf"><a target="_blank" rel="external nofollow noopener" class="φdg φa icon-email" title="email" href="mailto:wuminjd@gmail.com">email</a><a target="_blank" rel="external nofollow noopener" class="φdg φa icon-github" title="github" href="https://github.com/gardenZzz">github</a><a target="_blank" rel="external nofollow noopener" class="φdg φa icon-twitter" title="twitter" href="https://twitter.com/wuminwjd">twitter</a><a target="_blank" rel="external nofollow noopener" class="φdg φa icon-feed" title="feed" href="/atom.xml">feed</a><!----></div><!----><p class="φe">© 2020 • <a href="">Garden X</a></p><!----><!----><!----></footer></div></is-l><div class="φj"><div class="φi"><div class="φn"><main class="φm"><router-outlet></router-outlet><is-s class="φeu"><header class="φfe φff" style="background-image:;background-color:;"><div class="φfn"><h1 class="φfq">Project03_GpMall</h1><!----><p class="φfg"><span class="φfh φfl">Nov 6, 2020</span><a class="φfh φfj" href="/categories/%E9%A1%B9%E7%9B%AE">项目</a><!----><span class="φfh φfk">1338 words in 9 min</span><!----><!----></p><!----><!----></div></header><article itemscope="" itemtype="http://schema.org/Article" class="φex" data-title="Project03_GpMall"><div itemprop="articleBody" issnippet="" iszoomable="" class="φe"><p>基于开源项目 <a href="https://github.com/2227324689/gpmall" target="_blank">gpmall</a> 前端部分的微服务架构的高并发商城。具体实现了项目中用户模块、商品模块、订单模块、支付<br>
模块，增加了秒杀模块的业务。</p>
<a id="more"></a>
<p>项目划分：</p>
<div class="φbt"><div class="φbv"><table><thead>
<tr>
<th style="padding:0"></th>
<th style="padding:0"></th>
<th style="padding:0"></th>
</tr>
</thead>
<tbody>
<tr>
<td>db_script 本项目的数据库脚本</td>
<td>使用mysql</td>
<td>暂时未做分表处理，不过有考虑到分表的情况</td>
</tr>
<tr>
<td>gpmall-cashier 收银台，负责支付相关的交互逻辑</td>
<td>web项目</td>
<td>8083端口</td>
</tr>
<tr>
<td>gpmall-commons 公共的组件</td>
<td>jar</td>
<td>公共组件，很多地方都有引用，改动的时候要注意</td>
</tr>
<tr>
<td>gpmall-front 咕泡商城的前端项目</td>
<td>前端项目</td>
<td>使用vue、node、es等前端技术开发</td>
</tr>
<tr>
<td>gpmall-parent 父控文件，用来统一管理所有jar包</td>
<td>父控文件</td>
<td>用来统一管理所有项目的jar包的版本</td>
</tr>
<tr>
<td>gpmall-shopping 商品/购物车/首页渲染等交互</td>
<td>web项目</td>
<td>8081端口</td>
</tr>
<tr>
<td>gpmall-user 提供用户相关的交互，如登录、注册、个人中心等</td>
<td>web项目</td>
<td>8082端口</td>
</tr>
<tr>
<td>market-service 促销活动的Dubbo服务【暂时未联调完成，可以不启动】</td>
<td>dubbo服务</td>
<td>20884端口</td>
</tr>
<tr>
<td>pay-service 提供支付处理能力</td>
<td>dubbo服务</td>
<td>20883端口</td>
</tr>
<tr>
<td>shopping-service，提供购物车、推荐商品、商品等服务</td>
<td>dubbo服务</td>
<td>20881端口</td>
</tr>
<tr>
<td>user-service ，提供用户相关服务</td>
<td>dubbo服务</td>
<td>20880端口</td>
</tr>
<tr>
<td>order-service ，提供订单服务</td>
<td>dubbo服务</td>
<td>20882端口</td>
</tr>
</tbody>
</table></div></div><h2 id="user-模块">user 模块<a title="#user-模块" href="#user-模块"></a></h2>
<h3 id="用户模块（/user）">用户模块（/user）<a title="#用户模块（/user）" href="#用户模块（/user）"></a></h3>
<h4 id="✅注册激活（/verify）">✅注册激活（/verify）<a title="#✅注册激活（/verify）" href="#✅注册激活（/verify）"></a></h4>
<p>​	<strong>入参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">uid						String					激活id</span><br><span class="line">username				String					用户名</span><br></pre></td></tr></tbody></table></figure>
<p>请求路径：/user/verify</p>
<p>是否需要携带Token：否</p>
<p>请求类型：get</p>
<p>请求路径示例：</p>
<p><a href="http://localhost:8080/user/verify?uid=xxx&amp;username=xxx">http://localhost:8080/user/verify?uid=xxx&amp;username=xxx</a></p>
<p><strong>出参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">success					boolean				成功标记</span><br><span class="line">message					String				具体信息</span><br><span class="line">code						Integer				状态码</span><br><span class="line">result					String(JSON)	具体数据</span><br><span class="line">timestamp				Long					时间戳</span><br></pre></td></tr></tbody></table></figure>
<p>返回参数示例：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{<span class="attr">"success"</span>:<span class="literal">true</span>,<span class="attr">"message"</span>:<span class="string">"success"</span>,<span class="attr">"code"</span>:<span class="number">200</span>,<span class="attr">"result"</span>:<span class="literal">null</span>,<span class="attr">"timestamp"</span>:<span class="number">1587710244802</span>}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="shopping-模块">Shopping 模块<a title="#shopping-模块" href="#shopping-模块"></a></h2>
<h3 id="商品模块">商品模块<a title="#商品模块" href="#商品模块"></a></h3>
<h4 id="✅获得购物车列表（/carts）">✅获得购物车列表（/carts）<a title="#✅获得购物车列表（/carts）" href="#✅获得购物车列表（/carts）"></a></h4>
<h5 id="接口文档">接口文档<a title="#接口文档" href="#接口文档"></a></h5>
<p><strong>入参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">无</span><br></pre></td></tr></tbody></table></figure>
<p>请求路径：/shopping/carts</p>
<p>是否需要携带Token：是</p>
<p>请求类型：get</p>
<p>请求参数示例：无</p>
<p><strong>出参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">success					boolean				成功标记</span><br><span class="line">message					String				具体信息</span><br><span class="line">code						Integer				状态码</span><br><span class="line">result					String(JSON)	具体数据</span><br><span class="line">timestamp				Long					时间戳</span><br></pre></td></tr></tbody></table></figure>
<p>返回参数示例：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"success"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"message"</span>: <span class="string">"success"</span>,</span><br><span class="line">  <span class="attr">"code"</span>: <span class="number">200</span>,</span><br><span class="line">  <span class="attr">"result"</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">"productId"</span>: <span class="number">100040607</span>,</span><br><span class="line">      <span class="attr">"salePrice"</span>: <span class="number">2999</span>,</span><br><span class="line">      <span class="attr">"productNum"</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">"limitNum"</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">"checked"</span>: <span class="string">"true"</span>,</span><br><span class="line">      <span class="attr">"productName"</span>: <span class="string">"坚果 3"</span>,</span><br><span class="line">      <span class="attr">"productImg"</span>: <span class="string">"https://resource.smartisan.com/resource/13e91511f6ba3227ca5378fd2e93c54b.png"</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">"productId"</span>: <span class="number">100040501</span>,</span><br><span class="line">      <span class="attr">"salePrice"</span>: <span class="number">2999</span>,</span><br><span class="line">      <span class="attr">"productNum"</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">"limitNum"</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">"checked"</span>: <span class="string">"false"</span>,</span><br><span class="line">      <span class="attr">"productName"</span>: <span class="string">"畅呼吸智能空气净化器 · 超级除甲醛版"</span>,</span><br><span class="line">      <span class="attr">"productImg"</span>: <span class="string">"https://resource.smartisan.com/resource/71432ad30288fb860a4389881069b874.png"</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">"productId"</span>: <span class="number">100039702</span>,</span><br><span class="line">      <span class="attr">"salePrice"</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">"productNum"</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">"limitNum"</span>: <span class="number">100</span>,</span><br><span class="line">      <span class="attr">"checked"</span>: <span class="string">"true"</span>,</span><br><span class="line">      <span class="attr">"productName"</span>: <span class="string">"Smartisan 帆布鞋"</span>,</span><br><span class="line">      <span class="attr">"productImg"</span>: <span class="string">"https://resource.smartisan.com/resource/578116bddf1d170c89e9af7ba5073fb6.jpg"</span></span><br><span class="line">    }</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"timestamp"</span>: <span class="number">1605518470998</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h5 id="参考代码">参考代码<a title="#参考代码" href="#参考代码"></a></h5>
<h6 id="provider">Provider<a title="#provider" href="#provider"></a></h6>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/shopping")</span></span><br><span class="line"><span class="meta">@Api(tags = "AddressController", description = "地址控制层")</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddressController</span> </span>{</span><br><span class="line">  </span><br><span class="line">   <span class="meta">@Reference(timeout = 3000,check = false)</span></span><br><span class="line">    IAddressService addressService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation("添加地址")</span></span><br><span class="line">    <span class="meta">@PostMapping("/addresses")</span></span><br><span class="line">    <span class="meta">@ApiImplicitParam(name = "form", value = "地址信息", dataType = "AddressForm", required = true)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ResponseData <span class="title">addressAdd</span><span class="params">(<span class="meta">@RequestBody</span> AddressForm form, HttpServletRequest servletRequest)</span> </span>{</span><br><span class="line">        log.debug(form.is_Default()+<span class="string">""</span>);</span><br><span class="line">        log.debug(form.toString());</span><br><span class="line"></span><br><span class="line">        AddAddressRequest request = <span class="keyword">new</span> AddAddressRequest();</span><br><span class="line">        String userInfo = (String) servletRequest.getAttribute(TokenIntercepter.USER_INFO_KEY);</span><br><span class="line">        JSONObject object = JSON.parseObject(userInfo);</span><br><span class="line">        Long uid = Long.parseLong(object.get(<span class="string">"uid"</span>).toString());</span><br><span class="line">        request.setUserId(uid);</span><br><span class="line">        request.setUserName(form.getUserName());</span><br><span class="line">        request.setStreetName(form.getStreetName());</span><br><span class="line">        request.setTel(form.getTel());</span><br><span class="line">        request.setIsDefault(form.is_Default() ? <span class="number">1</span> : <span class="keyword">null</span>);</span><br><span class="line">        AddAddressResponse response = addressService.createAddress(request);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (response.getCode().equals(ShoppingRetCode.SUCCESS.getCode())) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ResponseUtil().setData(response.getMsg());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ResponseUtil().setErrorMsg(response.getMsg());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h6 id="consumer">Consumer<a title="#consumer" href="#consumer"></a></h6>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Service(interfaceClass = IProductService.class)</span><span class="comment">//指定接口</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IProductServiceImpl</span> <span class="keyword">implements</span> <span class="title">IProductService</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ItemMapper itemMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ProductDetailResponse <span class="title">getProductDetail</span><span class="params">(ProductDetailRequest request)</span> </span>{</span><br><span class="line"></span><br><span class="line">        ProductDetailResponse productDetailResponse = <span class="keyword">new</span> ProductDetailResponse();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 参数基础检查</span></span><br><span class="line">        request.requestCheck();</span><br><span class="line"></span><br><span class="line">        Long productId = request.getId();</span><br><span class="line"></span><br><span class="line">        Item item = itemMapper.selectByPrimaryKey(productId);</span><br><span class="line"></span><br><span class="line">        ProductDetailDto productDetailDto = <span class="keyword">new</span> ProductDetailDto();</span><br><span class="line">        productDetailDto.setProductId(item.getId());</span><br><span class="line">        productDetailDto.setSubTitle(item.getTitle());</span><br><span class="line">        productDetailDto.setSalePrice(item.getPrice());</span><br><span class="line"></span><br><span class="line">        productDetailResponse.setProductDetailDto(productDetailDto);</span><br><span class="line">        productDetailResponse.setCode(ShoppingRetCode.SUCCESS.getCode());</span><br><span class="line">        productDetailResponse.setMsg(ShoppingRetCode.SUCCESS.getMessage());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> productDetailResponse;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h5 id="redis-相关">Redis 相关<a title="#redis-相关" href="#redis-相关"></a></h5>
<p>List&lt;Product&gt; list</p>
<p>key -----&gt; cart_intem 85 cart_intem 86 HKEYS</p>
<ol>
<li>
<p>把 List 转化为JSONSonstring</p>
</li>
<li>
<p>使用 Hash</p>
<p>key: userId</p>
<p>field1: porductId</p>
<p>value1: 购物车里面商品的对象 Cartproductdt</p>
<p>field2: porductId</p>
<p>value2: 购物车里面商品的对象 Cartproductdt</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedissonTest</span> <span class="keyword">extends</span> <span class="title">RedissonDemoApplicationTests</span> </span>{</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//注入 redissonClient</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    RedissonClient redissonClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>{</span><br><span class="line">				</span><br><span class="line">      	<span class="comment">//使用 redissonClient</span></span><br><span class="line">        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(<span class="string">"liushifu"</span>);</span><br><span class="line"></span><br><span class="line">        bucket.set(<span class="string">"shai"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        RBucket&lt;Object&gt; bucket = redissonClient.getBucket(<span class="string">"liushifu"</span>);</span><br><span class="line"></span><br><span class="line">        String val = (String) bucket.get();</span><br><span class="line"></span><br><span class="line">        System.out.println(val);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(<span class="string">"ligenli"</span>);</span><br><span class="line"></span><br><span class="line">        rMap.put(<span class="string">"weight"</span>,<span class="string">"130"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        RMap&lt;Object, Object&gt; rMap = redissonClient.getMap(<span class="string">"ligenli"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// hget</span></span><br><span class="line">        String weight = (String) rMap.get(<span class="string">"weight"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(weight);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test05</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        RDeque&lt;Object&gt; rDeque = redissonClient.getDeque(<span class="string">"mylist"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        rDeque.addFirst();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        rDeque.addLast();</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<h4 id="✅删除购物车中的商品（/carts/{uid}/{pid}）">✅删除购物车中的商品（/carts/{uid}/{pid}）<a title="#✅删除购物车中的商品（/carts/{uid}/{pid}）" href="#✅删除购物车中的商品（/carts/{uid}/{pid}）"></a></h4>
<p><strong>入参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">uid						long						用户id</span><br><span class="line">pid						long						商品ID</span><br></pre></td></tr></tbody></table></figure>
<p>请求路径：/shopping/carts/{uid}/{pid}</p>
<p>是否需要携带Token：是</p>
<p>请求类型：delete</p>
<p>请求参数示例：无</p>
<p><strong>出参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">success					boolean				成功标记</span><br><span class="line">message					String				具体信息</span><br><span class="line">code						Integer				状态码</span><br><span class="line">result					String(JSON)	具体数据</span><br><span class="line">timestamp				Long					时间戳</span><br></pre></td></tr></tbody></table></figure>
<p>返回参数示例：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{<span class="attr">"success"</span>:<span class="literal">true</span>,<span class="attr">"message"</span>:<span class="string">"success"</span>,<span class="attr">"code"</span>:<span class="number">200</span>,<span class="attr">"result"</span>:<span class="string">"成功"</span>,<span class="attr">"timestamp"</span>:<span class="number">1587794411224</span>}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="订单模块">订单模块<a title="#订单模块" href="#订单模块"></a></h3>
<h4 id="✅取消订单（cancelorder）">✅取消订单（cancelOrder）<a title="#✅取消订单（cancelorder）" href="#✅取消订单（cancelorder）"></a></h4>
<p><strong>入参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">id						Long					订单id</span><br></pre></td></tr></tbody></table></figure>
<p>请求路径：/shopping/cancelOrder</p>
<p>是否需要携带Token：是</p>
<p>请求类型：post</p>
<p>请求参数示例：</p>
<p>{“id”:“1”}</p>
<p><strong>出参</strong>						<strong>类型</strong>						<strong>含义</strong></p>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line">success					boolean				成功标记</span><br><span class="line">message					String				具体信息</span><br><span class="line">code						Integer				状态码</span><br><span class="line">result					String(JSON)	具体数据</span><br><span class="line">timestamp				Long					时间戳</span><br></pre></td></tr></tbody></table></figure>
<p><strong>数据库</strong></p>
<p>更新表 tb_order</p>
<p>![image-20201117092949558](/Users/wumin/Library/Application Support/typora-user-images/image-20201117092949558.png)</p>
<p>tb_order_item</p>
<p>![image-20201117103928650](/Users/wumin/Library/Application Support/typora-user-images/image-20201117103928650.png)</p>
<p>返回参数示例：</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{<span class="attr">"success"</span>:<span class="literal">true</span>,<span class="attr">"message"</span>:<span class="string">"success"</span>,<span class="attr">"code"</span>:<span class="number">200</span>,<span class="attr">"result"</span>:<span class="string">"成功"</span>,<span class="attr">"timestamp"</span>:<span class="number">1587795935665</span>}</span><br></pre></td></tr></tbody></table></figure>
<h3 id="支付模块">支付模块<a title="#支付模块" href="#支付模块"></a></h3>
<h3 id="秒杀模块">秒杀模块<a title="#秒杀模块" href="#秒杀模块"></a></h3>
<h4 id="项目结构">项目结构<a title="#项目结构" href="#项目结构"></a></h4>
<img src="/Users/wumin/Library/Application Support/typora-user-images/image-20201123142328324.png" alt="image-20201123142328324" style="zoom:50%;" align="left">
<h2 id="其他">其他<a title="#其他" href="#其他"></a></h2>
<p>压测对比结果</p>
<p>样本1</p>
<p>![image-20201125201712268](/Users/wumin/Library/Application Support/typora-user-images/image-20201125201712268.png)</p>
<p>样本2</p>
<p>![image-20201125202401250](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202401250.png)</p>
<p>![image-20201125202421028](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202421028.png)</p>
<p>![image-20201125202440625](/Users/wumin/Library/Application Support/typora-user-images/image-20201125202440625.png)</p>
<p>样本3</p>
<h2 id="???">???<a title="#???" href="#???"></a></h2>
</div><is-f class="φx"><!----><ul class="φbb"><li class="φz"><strong class="φba">Author<span>:</span></strong><p class="φy">Garden X</p></li><li class="φz"><strong class="φba">Link<span>:</span></strong><p class="φy"><a href="https://gardenZzz.github.io/2020/222029/Project-03/" title="Project03_GpMall">https://gardenZzz.github.io/2020/222029/Project-03/</a></p></li><li class="φz"><strong class="φba">Copyright<span>:</span></strong><p class="φy">自由转载-非商用-禁止演绎-保持署名 (<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="\&quot;external" target="\&quot;_blank\&quot;">CC BY-NC-ND 4.0</a>)</p></li><!----></ul><!----></is-f><!----><is-k class="φcp"><p class="φcu">Buy me a cup of coffee ☕.</p><div class="φcr"><div class="φcw"><a class="φcv φa icon-paypal" style="color:;"></a><a class="φcv" style="color:;">支</a><a class="φcv φa icon-wechat" style="color:;"></a><!----></div><div class="φct"><!----></div></div></is-k><!----><!----></article><footer class="φey"><div class="φfd"><is-m class="φdp"><a class="φdq" href="/tags/Java">Java</a></is-m><is-m class="φdp"><a class="φdq" href="/tags/Spring">Spring</a></is-m><is-m class="φdp"><a class="φdq" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F">分布式</a></is-m><is-m class="φdp"><a class="φdq" href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1">微服务</a></is-m><!----></div><!----><div class="φez"><a class="φfa φfc" href="/2020/491633/Test">Project03_Tmall</a><!----><a class="φfa φfb" href="/2020/382324/Project-02">Project02_LiteMall</a><!----></div><!----></footer><is-e class="φu"><!----><a class="φv">Load Disqus<!----><!----><!----></a><!----><div class="φw" style="display:none;"></div><!----><!----></is-e><!----><!----><!----></is-s><!----></main><!----></div></div></div><is-g class="φbc"><div class="φbl"><span class="φa icon-up"></span><span class="φa icon-down"></span><!----><span class="φa icon-toc"></span><!----><span class="φa icon-search"></span><!----></div><div class="φbe φbf"><svg class="φbk"><defs><filter id="dp"><feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur></filter></defs><circle filter="url(#dp)" fill="rgba(0,0,0,.3)" cx="50%" cy="52%" r="44%"></circle><circle cx="50%" cy="50%" r="44%" class="φbg"></circle><circle cx="50%" cy="50%" r="48%" class="φbj" stroke-dasharray="0% 314.15926%"></circle><!----><g class="φbh"><circle r=".2rem" cx="0" cy="-.8rem"></circle><circle r=".2rem"></circle><circle r=".2rem" cx="0" cy=".8rem"></circle></g><!----></svg></div></is-g><is-n class="φdr"><div class="φdt φdu"><a class="φdw"><span class="φdy">1 </span><!----><span class="φdz">user 模块</span></a><div class="φdt"><a class="φdw"><span class="φdy">1.1 </span><!----><span class="φdz">用户模块（/user）</span></a><!----></div><!----><!----><!----></div><div class="φdt φdu"><a class="φdw"><span class="φdy">2 </span><!----><span class="φdz">Shopping 模块</span></a><div class="φdt"><a class="φdw"><span class="φdy">2.1 </span><!----><span class="φdz">商品模块</span></a><!----></div><div class="φdt"><a class="φdw"><span class="φdy">2.2 </span><!----><span class="φdz">订单模块</span></a><!----></div><div class="φdt"><a class="φdw"><span class="φdy">2.3 </span><!----><span class="φdz">支付模块</span></a><!----></div><div class="φdt"><a class="φdw"><span class="φdy">2.4 </span><!----><span class="φdz">秒杀模块</span></a><!----></div><!----><!----><!----></div><div class="φdt φdu"><a class="φdw"><span class="φdy">3 </span><!----><span class="φdz">其他</span></a><!----></div><div class="φdt φdu"><a class="φdw"><span class="φdy">4 </span><!----><span class="φdz">???</span></a><!----></div><!----></is-n><!----><!----></is-a><!-- hexo injector body_begin end --><!-- hexo injector body_end start --><script src="/js/theme.js"></script><script src="/js/theme2.js"></script><script src="/js/darkmode.js"></script><script src="runtime.1627035ae7607fe619b2.js"></script><script src="polyfills.67bd14d004c90208818f.js"></script><script src="main.fcb6f92cf68fd1cc7d50.js"></script><!-- hexo injector body_end end -->

</body></html>